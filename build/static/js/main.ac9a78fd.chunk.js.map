{"version":3,"sources":["AuthContext.js","theme.js","DarkModeContext.js","utils/constants.js","axios.js","utils/text.js","components/Layout/ProtectedRoute.js","utils/paths.js","utils/axios_wrapper.js","utils/index.js","utils/token.js","utils/update.js","components/Placeholder.js","components/Channel/AddMemberDialog.js","components/Message/AddMessageTimerDialog.js","components/Message/AddMessage.js","components/Dm/DmMessages.js","components/Message/MessageEdit.js","components/Message/MessagePin.js","components/Message/MessageReact.js","components/Message/MessageRemove.js","components/Message/MessageShareDialog.js","components/Message/index.js","components/Channel/ChannelMessages.js","components/Channel/index.js","components/Layout/Body.js","components/Admin/SetUserPermissionsDialog.js","components/Admin/UserRemoveDialog.js","components/Admin/index.js","components/NotificationList.js","components/PollToggle/index.js","components/Search/SearchBar.js","components/Layout/DarkModeToggle.js","components/Layout/Header.js","components/Layout/SideMenu.js","components/Layout/index.js","components/Channel/AddChannelDialog.js","components/ChannelList.js","components/Dm/AddDmDialog.js","components/DmList.js","components/ProfileList.js","components/ProfileChannelLists.js","pages/ChannelPage.js","components/Dm/index.js","pages/DmPage.js","pages/ForgotPasswordPage.js","components/WorkspaceStats.js","pages/HomePage.js","pages/LoginPage.js","components/Profile/EditableFields.js","components/Profile/UserStats.js","components/Profile/index.js","pages/ProfilePage.js","pages/RegisterPage.js","pages/ResetPasswordPage.js","components/Search/index.js","pages/SearchPage.js","App.js","serviceWorker.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","Consumer","themes","type","light","primary","main","secondary","error","red","A400","background","default","dark","DarkModeContext","isDark","theme","DarkModeProvider","require","config","port","deployedUrl","undefined","window","BACKEND_PORT","DEPLOYED_URL","process","REACT_APP_BACKEND_PORT","url","PERMISSION_IDS","ITERATION","parseInt","REACT_APP_ITERATION","console","log","axios","defaults","baseURL","headers","put","post","delete","interceptors","request","use","response","data","toast","Promise","reject","message","ProtectedRoute","props","useContext","to","PATHS","AUTH_LOGIN","AUTH_REGISTER","AUTH_LOGOUT","CHANNEL_INVITE","CHANNEL_DETAILS","CHANNEL_MESSAGES","CHANNEL_JOIN","CHANNEL_ADDOWNER","CHANNEL_REMOVEOWNER","CHANNEL_LEAVE","CHANNELS_LIST","CHANNELS_LISTALL","CHANNELS_CREATE","MESSAGE_SEND","MESSAGE_EDIT","MESSAGE_REMOVE","DM_DETAILS","DM_LIST","DM_CREATE","DM_REMOVE","DM_LEAVE","DM_MESSAGES","MESSAGE_SENDDM","USER_PROFILE","USER_PROFILE_SETNAME","USER_PROFILE_SETEMAIL","USER_PROFILE_SETHANDLE","USERS_ALL","SEARCH","CLEAR","MESSAGE_SHARE","ADMIN_USER_REMOVE","ADMIN_USERPERMISSION_CHANGE","NOTIFICATIONS_GET","STANDUP_START","STANDUP_ACTIVE","STANDUP_SEND","AUTH_PASSWORDRESET_REQUEST","AUTH_PASSWORDRESET_RESET","USER_STATS","USERS_STATS","USER_PROFILE_UPLOADPHOTO","MESSAGE_SENDLATER","MESSAGE_SENDLATERDM","MESSAGE_REACT","MESSAGE_UNREACT","MESSAGE_PIN","MESSAGE_UNPIN","common","makeRequest","method","path","options","Error","get","params","token","others","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","isMatchingId","a","b","extractUId","uId","localStorage","getItem","stepSubscribers","subscribeToStep","subscriber","interval","find","o","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","isPolling","count","Placeholder","style","display","width","height","justifyContent","alignItems","CircularProgress","AddMemberDialog","channelId","useState","open","setOpen","selectedUser","setSelectedUser","users","setUsers","handleClose","then","catch","err","Button","variant","color","onClick","Dialog","onClose","aria-labelledby","DialogTitle","onSubmit","event","preventDefault","Number","DialogContent","DialogContentText","Select","onChange","newUserId","target","value","map","d","idx","MenuItem","key","nameFirst","nameLast","DialogActions","AddMessageTimerDialog","onTimerChange","Date","selectedDate","setSelectedDate","margin","label","toDate","KeyboardButtonProps","useStyles","makeStyles","flex","flexDirection","input","spacing","marginRight","button","marginLeft","alignSelf","rightIcon","standupTimer","AddMessage","dmId","classes","currentMessage","setCurrentMessage","currentTimer","setCurrentTimer","timerDialogOpen","setTimerDialogOpen","showEmoji","setShowEmoji","onAdd","StepContext","onAddDm","StepContextDm","isTimerSet","standupRemaining","setStandupRemaining","standupEndTime","setStandupEndTime","submitMessage","trim","timeSent","getTime","startsWith","found","match","length","alert","isNaN","isInteger","timeFinish","now","Math","round","checkStandupActive","isActive","Typography","className","TextField","multiline","placeholder","fullWidth","onKeyDown","e","getModifierState","InputProps","endAdornment","InputAdornment","position","IconButton","aria-label","disabled","emojiStyle","EmojiStyle","FACEBOOK","onEmojiClick","emojiData","emoji","autoFocusSearch","previewConfig","showPreview","skinTonesDisabled","StepProvider","DmMessages","messages","setMessages","isPaginating","currentStart","currentEnd","sliceStart","pagination","setPagination","fetchDmMessages","p","start","newMessages","end","isEnd","pinnedMessages","m","isPinned","subheader","min","List","ListSubheader","messageId","ListItem","slice","reverse","PAGINATION_SIZE","MessageEdit","stepDm","prompt","size","edge","fontSize","withTheme","isPinnedState","setIsPinnedState","mdiPin","palette","action","active","mdiPinOutline","MessageReact","reacts","usersReacted","thumbUpCount","isReacted","thumbUpIndex","findIndex","react","reactId","uIds","isThisUserReacted","u","toggleEmoji","getUserReactedName","reduce","acc","curr","handleStr","messageReact","Badge","anchorOrigin","horizontal","vertical","badgeContent","String","title","codePointAt","MessageRemove","MessageShareDialog","ogMessageId","selectedChannel","setSelectedChannel","selectedDm","setSelectedDm","selectedChDm","setSelectedChDm","channelsShare","setChannelsShare","dmsShare","setDmsShare","setMessage","name","rowsMax","Message","setNameFirst","setNameLast","imgUrl","setImgUrl","fullName","s","join","initials","user","profileImgUrl","ListItemAvatar","Avatar","border","src","ListItemText","paddingLeft","timeago","fontFamily","ChannelMessages","fetchChannelMessages","Channel","loading","setLoading","setName","members","setMembers","owners","setOwners","fetchChannelData","ownerMembers","allMembers","finally","userIsMember","member","userIsOwner","owner","viewerIsMember","toUpperCase","Grid","container","item","Link","href","removeOwner","addOwner","leaveChannel","joinChannel","body","breakpoints","up","toolbar","mixins","Body","children","SetUserPermissionsDialog","permissionId","setPermissionId","direction","justify","xs","RadioGroup","newPermissionId","row","FormControlLabel","control","Radio","labelPlacement","UserRemoveDialog","Admin","buttonRef","ref","aria-controls","aria-haspopup","anchorEl","keepMounted","NotificationList","notifs","setNotifs","notifications","notif","component","notificationMessage","PollToggle","anchorRef","selectedIndex","setSelectedIndex","handleMenuItemClick","index","contains","ButtonGroup","aria-owns","prevOpen","Popper","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","option","selected","search","borderRadius","shape","backgroundColor","fade","white","searchIcon","pointerEvents","inputRoot","inputInput","padding","transitions","create","withRouter","queryStr","setQueryStr","history","InputBase","root","inputProps","DarkModeToggle","darkMode","switchTheme","appBar","menuButton","flexGrow","logoutButton","float","Header","handleMenuToggle","useTheme","matches","useMediaQuery","loggedOut","setLoggedOut","removeItem","AppBar","Toolbar","textDecoration","noWrap","drawer","flexShrink","drawerPaper","SideMenu","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","Divider","xsDown","Layout","menu","AddChannelDialog","secret","checked","isPublic","autoFocus","Switch","ChannelList","currChannelId","myChannels","setMyChannels","allChannels","setAllChannels","fetchChannelsData","getMyChannels","getAllChannels","all","spread","myChannelResponse","allChannelResponse","myChannelData","channels","filteredChannels","channel","c","ListItemIcon","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","AddDmDialog","selectedUsers","setSelectedUsers","multiple","Input","DmList","currDmId","myDms","setMyDms","fetchDmsData","ProfileList","uid","ProfileChannelLists","ChannelPage","Dm","membersList","setMembersList","fetchDmData","leaveDm","removeDm","DmPage","card","marginTop","ForgotPasswordPage","Container","maxWidth","Box","boxShadow","noValidate","email","required","WorkspaceStats","utilizationRate","setUtilizationRate","channelsData","setChannelsData","dmsData","setDmsData","messagesData","setMessagesData","workspaceStats","obj","x","y","toFixed","datasets","fill","borderColor","showLine","legend","labels","fontColor","scales","xAxes","gridLines","lineWidth","time","unitStepSize","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","ticks","yAxes","HomePage","paddingTop","LoginPage","setAuth","password","authUserId","autoComplete","EditableFields","editable","master","masterValue","slaves","slaveValues","onSave","edit","setEdit","prevMasterValue","setPrevMasterValue","currMasterValue","setCurrMasterValue","prevSlaveValues","setPrevSlaveValues","currSlaveValues","setCurrSlaveValues","toggleEdit","slave","readOnly","valueIndex","copySlaves","val","onSlaveChange","cursor","UserStats","involvementRate","setInvolvementRate","userStats","Profile","profile","profileDetails","setProfileDetails","toString","passedProps","rawText","items","split","xStart","yStart","xEnd","yEnd","ProfilePage","RegisterPage","values","setValues","handleChange","resetCode","newPassword","Search","Array","isArray","marginBottom","LinearProgress","SearchPage","App","document","authDetails","setAuthDetails","checkDarkMode","test","setWindowTheme","prevState","setItem","windowTheme","useMemo","createTheme","ThemeProvider","CssBaseline","exact","render","ResetPasswordPage","Boolean","location","hostname","ReactDOM","utils","MomentUtils","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ac9a78fd.chunk.js","sourcesContent":["import React from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","import { red } from '@material-ui/core/colors';\n\nexport const themes = {\n  type: 'light',\n  light: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n  dark: {\n    type: 'dark',\n    primary: {\n      main: '#77adf7',\n    },\n    secondary: {\n      main: '#73acfa',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#303030',\n    },\n  }\n}\n","import React from 'react';\nimport { themes } from './theme';\n\nexport const DarkModeContext = React.createContext({\n  isDark: false,\n  theme: themes.light,\n});\n\nexport const DarkModeProvider = DarkModeContext.Provider;\nexport const DarkModeConsumer = DarkModeContext.Consumer;\n\n\n","require('dotenv').config();\n\nlet port = '0';\nlet deployedUrl = 'https://example.alwaysdata.net';\nif (window.BACKEND_PORT !== undefined) {\n  port = window.BACKEND_PORT;\n  deployedUrl = window.DEPLOYED_URL;\n} else {\n  port = process.env.REACT_APP_BACKEND_PORT;\n}\nexport const url = port === '0' || port === undefined ? deployedUrl : 'http://localhost:' + port;\n\nexport const drawerWidth = 240;\nexport const PERMISSION_IDS = {\n  OWNER: 1,\n  MEMBER: 2,\n};\nexport const PAGINATION_SIZE = 50;\nexport const SLICE_SIZE = 10;\n\nlet iterationBlah;\nif (window.ITERATION !== undefined) {\n  iterationBlah = parseInt(window.ITERATION);\n} else {\n  iterationBlah = parseInt(process.env.REACT_APP_ITERATION);\n}\n\nexport const ITERATION = iterationBlah;\n\nconsole.log('Using backend at', url);\nconsole.log('Running frontend for iteration', ITERATION);\n","import axios from 'axios';\nimport _ from 'lodash';\nimport { toast } from 'react-toastify';\nimport { url } from './utils/constants';\nimport { DEFAULT_ERROR_TEXT } from './utils/text';\n\naxios.defaults.baseURL = url;\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\naxios.interceptors.request.use(request => {\n  // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n  //     request.data = qs.stringify(request.data);\n  // }\n  return request;\n});\n\nconst errorHandler = error => {\n  // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n  // if has response show the error\n  console.error(error);\n\n  toast.error(error.response.data.error.message || DEFAULT_ERROR_TEXT);\n\n  return Promise.reject({ ...error });\n};\n\nconst responseHandler = response => {\n  if ('error' in response.data) {\n    toast.error(DEFAULT_ERROR_TEXT);\n    return Promise.reject();\n  }\n\n  return response;\n};\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n","// General POST error\nexport const DEFAULT_ERROR_TEXT = 'An error occured. Try again later';\n\n// Specific GET errors (deprecated)\nexport const CHANNEL_ERROR_TEXT = 'Unable to retrieve channel information';\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext);\n  if (!token) {\n    return <Redirect to=\"/login\"/>;\n  }\n  return <Route {...props}/>;\n}\n\nexport default ProtectedRoute;\n","export const PATHS = [\n  {\n    // not applicable for iteration 0\n  },\n  {\n    // not applicable for iteration 1\n  },\n  {\n    // iteration 2\n    AUTH_LOGIN: 'auth/login/v2',\n    AUTH_REGISTER: 'auth/register/v2',\n    AUTH_LOGOUT: 'auth/logout/v1',\n    CHANNEL_INVITE: 'channel/invite/v2',\n    CHANNEL_DETAILS: 'channel/details/v2',\n    CHANNEL_MESSAGES: 'channel/messages/v2',\n    CHANNEL_JOIN: 'channel/join/v2',\n    CHANNEL_ADDOWNER: 'channel/addowner/v1',\n    CHANNEL_REMOVEOWNER: 'channel/removeowner/v1',\n    CHANNEL_LEAVE: 'channel/leave/v1',\n    CHANNELS_LIST: 'channels/list/v2',\n    CHANNELS_LISTALL: 'channels/listall/v2',\n    CHANNELS_CREATE: 'channels/create/v2',\n    MESSAGE_SEND: 'message/send/v1',\n    MESSAGE_EDIT: 'message/edit/v1',\n    MESSAGE_REMOVE: 'message/remove/v1',\n    DM_DETAILS: 'dm/details/v1',\n    DM_LIST: 'dm/list/v1',\n    DM_CREATE: 'dm/create/v1',\n    DM_REMOVE: 'dm/remove/v1',\n    DM_LEAVE: 'dm/leave/v1',\n    DM_MESSAGES: 'dm/messages/v1',\n    MESSAGE_SENDDM: 'message/senddm/v1',\n    USER_PROFILE: 'user/profile/v2',\n    USER_PROFILE_SETNAME: 'user/profile/setname/v1',\n    USER_PROFILE_SETEMAIL: 'user/profile/setemail/v1',\n    USER_PROFILE_SETHANDLE: 'user/profile/sethandle/v1',\n    USERS_ALL: 'users/all/v1',\n    SEARCH: 'search/v1',\n    CLEAR: 'clear/v1',\n  },\n  {\n    // iteration 3\n    AUTH_LOGIN: 'auth/login/v3',\n    AUTH_REGISTER: 'auth/register/v3',\n    AUTH_LOGOUT: 'auth/logout/v2',\n    CHANNEL_INVITE: 'channel/invite/v3',\n    CHANNEL_DETAILS: 'channel/details/v3',\n    CHANNEL_MESSAGES: 'channel/messages/v3',\n    CHANNEL_JOIN: 'channel/join/v3',\n    CHANNEL_ADDOWNER: 'channel/addowner/v2',\n    CHANNEL_REMOVEOWNER: 'channel/removeowner/v2',\n    CHANNEL_LEAVE: 'channel/leave/v2',\n    CHANNELS_LIST: 'channels/list/v3',\n    CHANNELS_LISTALL: 'channels/listall/v3',\n    CHANNELS_CREATE: 'channels/create/v3',\n    MESSAGE_SEND: 'message/send/v2',\n    MESSAGE_EDIT: 'message/edit/v2',\n    MESSAGE_REMOVE: 'message/remove/v2',\n    MESSAGE_SHARE: 'message/share/v1',\n    DM_DETAILS: 'dm/details/v2',\n    DM_LIST: 'dm/list/v2',\n    DM_CREATE: 'dm/create/v2',\n    DM_REMOVE: 'dm/remove/v2',\n    DM_LEAVE: 'dm/leave/v2',\n    DM_MESSAGES: 'dm/messages/v2',\n    MESSAGE_SENDDM: 'message/senddm/v2',\n    USER_PROFILE: 'user/profile/v3',\n    USER_PROFILE_SETNAME: 'user/profile/setname/v2',\n    USER_PROFILE_SETEMAIL: 'user/profile/setemail/v2',\n    USER_PROFILE_SETHANDLE: 'user/profile/sethandle/v2',\n    USERS_ALL: 'users/all/v2',\n    SEARCH: 'search/v1',\n    ADMIN_USER_REMOVE: 'admin/user/remove/v1',\n    ADMIN_USERPERMISSION_CHANGE: 'admin/userpermission/change/v1',\n    NOTIFICATIONS_GET: 'notifications/get/v1',\n    CLEAR: 'clear/v1',\n    STANDUP_START: 'standup/start/v1',\n    STANDUP_ACTIVE: 'standup/active/v1',\n    STANDUP_SEND: 'standup/send/v1',\n    AUTH_PASSWORDRESET_REQUEST: 'auth/passwordreset/request/v1',\n    AUTH_PASSWORDRESET_RESET: 'auth/passwordreset/reset/v1',\n    USER_STATS: 'user/stats/v1',\n    USERS_STATS: 'users/stats/v1',\n    USER_PROFILE_UPLOADPHOTO: 'user/profile/uploadphoto/v1',\n    MESSAGE_SENDLATER: 'message/sendlater/v1',\n    MESSAGE_SENDLATERDM: 'message/sendlaterdm/v1',\n    MESSAGE_REACT: 'message/react/v1',\n    MESSAGE_UNREACT: 'message/unreact/v1',\n    MESSAGE_PIN: 'message/pin/v1',\n    MESSAGE_UNPIN: 'message/unpin/v1',\n  },\n];\n","import axios from 'axios';\nimport { ITERATION } from './constants';\nimport { PATHS } from './paths';\n\naxios.defaults.headers.common['user-agent'] = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36';\naxios.defaults.baseURL = 'https://colossal-ruddy-swoop.glitch.me';\n\nexport const makeRequest = (method, path, options) => {\n  if (ITERATION === 2) {\n    if (PATHS[ITERATION][path] == null) {\n      return Promise.reject(new Error(\"Don\\'t worry - this is not part of iteration 2 so this error is expected\"))\n    }\n    switch (method) {\n      case 'GET':\n        return axios.get(PATHS[ITERATION][path], { params: options });\n      case 'POST':\n        return axios.post(PATHS[ITERATION][path], options);\n      case 'PUT':\n        return axios.put(PATHS[ITERATION][path], options);\n      case 'DELETE':\n        return axios.delete(PATHS[ITERATION][path], { params: options });\n      default:\n        console.log('yikes');\n    }\n  } else if (ITERATION === 3) {\n    const { token, ...others } = options;\n    switch (method) {\n      case 'GET':\n        return axios.get(PATHS[ITERATION][path], {\n          params: others,\n          headers: { token },\n        });\n      case 'POST':\n        return axios.post(PATHS[ITERATION][path], others, {\n          headers: { token },\n        });\n      case 'PUT':\n        return axios.put(PATHS[ITERATION][path], others, {\n          headers: { token },\n        });\n      case 'DELETE':\n        return axios.delete(PATHS[ITERATION][path], {\n          params: others,\n          headers: { token },\n        });\n      default:\n        console.log('yikes');\n    }\n  }\n};\n","// from: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nimport { useEffect, useRef } from 'react';\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport const isMatchingId = (a, b) => parseInt(a, 10) === parseInt(b, 10);\n","export function extractUId(token) {\n  let uId = localStorage.getItem('uId');\n  if (uId == null) {\n    uId = -1;\n  }\n  return uId;\n}\n","import React from 'react';\nimport { useInterval } from './index';\n\nexport let stepSubscribers = [];\n\nexport const subscribeToStep = (subscriber, interval = 1) => {\n  if (stepSubscribers.find(o => o.subscriber === subscriber) !== undefined) {\n    return;\n  }\n  stepSubscribers.push({ subscriber, interval });\n};\nexport const unsubscribeToStep =\n    unsubscriber => (stepSubscribers = stepSubscribers.filter(o => o.subscriber !== unsubscriber));\n\nexport const step = iter => {\n  stepSubscribers.forEach(o => {\n    if (!iter || iter % o.interval === 0) {\n      o.subscriber();\n    }\n  });\n};\n\nexport const useStep = (subscriber, watches = [], interval = 1) => {\n  const shouldSubscribe = subscriber && typeof subscriber === 'function';\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval);\n      return () => unsubscribeToStep(subscriber);\n    }\n  }, watches);\n  return step;\n};\n\nlet isPolling = false;\nexport const pollingInterval = 2000;\nexport const getIsPolling = () => isPolling;\nexport const setIsPolling = bool => {\n  isPolling = !!bool; // force boolean type\n};\n\n/* IMPORTANT: Called in PollToggle */\nlet count = 0;\nexport const usePolling = () => {\n  useInterval(() => {\n    if (isPolling) {\n      step(count++);\n    }\n  }, pollingInterval);\n};\n","import { CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nfunction Placeholder() {\r\n  return (\r\n      <div\r\n          style={{\r\n            display: 'flex',\r\n            width: '100%',\r\n            height: '100%',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n      >\r\n        <CircularProgress/>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Placeholder;\r\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\n\nfunction AddMemberDialog({ channelId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const uId = selectedUser;\n\n    if (uId == null) {\n      return;\n    }\n\n    makeRequest('POST', 'CHANNEL_INVITE', { token, uId, channelId: Number.parseInt(channelId) })\n        .then(response => {\n          console.log(response);\n          step();\n        })\n        .catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>Invite Member</Button>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Invite User</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>\n                Select a user below to invite them to this channel\n              </DialogContentText>\n              <Select\n                  style={{ width: '100%' }}\n                  id=\"uId\"\n                  onChange={handleUserSelect}\n                  value={selectedUser}\n              >\n                {users.map((d, idx) => {\n                  return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>;\n                })}\n              </Select>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Invite</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddMemberDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core';\nimport { KeyboardTimePicker } from '@material-ui/pickers';\nimport React from 'react';\n\nfunction AddMessageTimerDialog({ open, handleClose, onTimerChange, ...props }) {\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onTimerChange(selectedDate);\n  }\n\n  return (\n      <div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Send later</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <KeyboardTimePicker\n                  margin=\"normal\"\n                  id=\"time-picker\"\n                  label=\"Time picker\"\n                  value={selectedDate}\n                  onChange={d => setSelectedDate(d.toDate())}\n                  KeyboardButtonProps={{\n                    'aria-label': 'change time',\n                  }}\n              />\n              <DialogContentText>Enter a time to send</DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Set Time</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddMessageTimerDialog;\n","import { Button, IconButton, InputAdornment, TextField, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { useInterval } from '../../utils';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\nimport AddMessageTimerDialog from './AddMessageTimerDialog';\nimport EmojiPicker, {EmojiStyle} from 'emoji-picker-react';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  input: {\n    margin: theme.spacing(1),\n    marginRight: 0,\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0,\n    alignSelf: 'stretch',\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1),\n  },\n  standupTimer: {\n    margin: theme.spacing(2),\n  },\n}));\n\nconst TIMER_INACTIVE_VALUE = -1;\n\nfunction AddMessage({ channelId = -1, dmId = -1 }) {\n  const classes = useStyles();\n  const [currentMessage, setCurrentMessage] = React.useState('');\n  const [currentTimer, setCurrentTimer] = React.useState(TIMER_INACTIVE_VALUE);\n  const [timerDialogOpen, setTimerDialogOpen] = React.useState(false);\n  const [showEmoji, setShowEmoji] = React.useState(false);\n\n  const token = React.useContext(AuthContext);\n  let onAdd = React.useContext(StepContext);\n  let onAddDm = React.useContext(StepContextDm);\n  onAdd = onAdd ? onAdd : () => {}; // sanity check\n  onAddDm = onAddDm ? onAddDm : () => {}; // sanity check\n  const toggleEmoji = () => {\n    setShowEmoji(!showEmoji);\n  };\n  const getEmoji = (emojiData) => {\n    setCurrentMessage(currentMessage + emojiData.emoji);\n  }\n\n\n  const isTimerSet = currentTimer !== TIMER_INACTIVE_VALUE;\n\n  const [standupRemaining, setStandupRemaining] = React.useState();\n  const [standupEndTime, setStandupEndTime] = React.useState();\n\n  const submitMessage = () => {\n    const message = currentMessage.trim();\n    if (!message) {\n      return;\n    }\n    setCurrentMessage('');\n\n    /**\n     * Sending a message when a standup is active\n     * note: probably makes sense that this takes precedence over\n     *       starting a standup.\n     */\n    if (dmId === -1 && standupRemaining && standupRemaining > 0) {\n      makeRequest('POST', 'STANDUP_SEND', {\n        token,\n        channelId: Number.parseInt(channelId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAdd();\n      })\n          .catch(err => console.log(err));\n      return;\n    }\n\n    /**\n     * Sending a message when the sendlater timer has been set\n     */\n    if (isTimerSet) {\n      if (dmId === -1) {\n        makeRequest('POST', 'MESSAGE_SENDLATER', {\n          token,\n          channelId: Number.parseInt(channelId),\n          message,\n          timeSent: currentTimer.getTime() / 1000, // ms to s conversion\n        }).then(({ data }) => console.log(data)).catch(err => console.log(err));\n      } else {\n        makeRequest('POST', 'MESSAGE_SENDLATERDM', {\n          token,\n          dmId: Number.parseInt(dmId),\n          message,\n          timeSent: currentTimer.getTime() / 1000, // ms to s conversion\n        }).then(({ data }) => console.log(data)).catch(err => console.log(err));\n      }\n      setCurrentTimer(TIMER_INACTIVE_VALUE);\n      return;\n    }\n\n    /**\n     * Starting a standup (any message which starts with /standup)\n     */\n    if (dmId === -1 && message.startsWith('/standup')) {\n      const re = /\\/standup\\s+([1-9][0-9]*)/;\n      const found = message.match(re);\n      if (!found || found.length < 2) {\n        alert('Usage: /standup <duration in seconds>');\n      } else {\n        var length = parseInt(found[1], 10);\n        if (isNaN(length) || !Number.isInteger(length)) {\n          alert('Usage: /standup <duration in seconds>');\n        } else {\n          makeRequest('POST', 'STANDUP_START', {\n            token,\n            channelId: Number.parseInt(channelId),\n            length,\n          }).then(({ data }) => {\n            const { timeFinish } = data;\n            setStandupEndTime(timeFinish);\n            alert(`You've started a standup for ${length} seconds`);\n          }).catch(err => console.log(err));\n        }\n      }\n      return;\n    }\n\n    /**\n     * Default message sending behaviour\n     */\n    if (dmId === -1) {\n      makeRequest('POST', 'MESSAGE_SEND', {\n        token,\n        channelId: Number.parseInt(channelId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAdd();\n      })\n          .catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_SENDDM', {\n        token,\n        dmId: Number.parseInt(dmId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAddDm();\n      }).catch(err => console.log(err));\n    }\n  };\n\n  useInterval(() => {\n    if (standupEndTime > Date.now() / 1000) {\n      setStandupRemaining(() => Math.round(standupEndTime - Math.round(Date.now() / 1000)));\n    } else {\n      setStandupRemaining();\n    }\n  }, 1000);\n\n  const checkStandupActive = () => {\n    if (channelId === -1) {\n      return;\n    }\n    makeRequest('GET', 'STANDUP_ACTIVE', {\n      token,\n      channelId,\n    }).then(({ data }) => {\n      const { isActive = false, timeFinish } = data;\n      if (isActive && timeFinish) {\n        setStandupEndTime(timeFinish);\n      } else {\n        setStandupRemaining(0);\n        setStandupEndTime(-1);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  useStep(checkStandupActive, [currentMessage] /* check when user is typing */);\n\n  React.useEffect(checkStandupActive, [channelId]);\n\n  const keyDown = e => {\n    if (e.key === 'Enter' && !e.getModifierState('Shift')) {\n      e.preventDefault();\n      submitMessage();\n    }\n  };\n\n  return (\n      <>\n        {standupRemaining > 0 && (\n            <Typography variant=\"caption\" className={classes.standupTimer}>\n              {`STANDUP ACTIVE: ${standupRemaining} seconds remaining`}\n            </Typography>\n        )}\n        <div className={classes.flex}>\n          <TextField\n              className={classes.input}\n              label=\"Send a message 💬\"\n              multiline\n              placeholder=\"...\"\n              fullWidth\n              margin=\"normal\"\n              variant=\"filled\"\n              onKeyDown={keyDown}\n              value={currentMessage}\n              onChange={e => setCurrentMessage(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton>\n                        <InsertEmoticonIcon onClick={toggleEmoji}></InsertEmoticonIcon>\n                      </IconButton>\n                      \n                      <IconButton\n                          aria-label=\"toggle visibility\"\n                          disabled={standupRemaining > 0}\n                          onClick={() =>\n                              isTimerSet ? setCurrentTimer(-1) : setTimerDialogOpen(true)}\n                      >\n                        <TimerIcon color={isTimerSet ? 'secondary' : undefined}/>\n                      </IconButton>\n                    </InputAdornment>\n                ),\n              }}\n          />\n          {showEmoji && <EmojiPicker emojiStyle={EmojiStyle.FACEBOOK} onEmojiClick={getEmoji} autoFocusSearch={false} width={270} height={350} previewConfig={{showPreview: false}} skinTonesDisabled/>}\n          <Button\n              className={classes.button}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={submitMessage}\n          >\n            Send\n            <SendIcon className={classes.rightIcon}/>\n          </Button>\n        </div>\n        <AddMessageTimerDialog\n            open={timerDialogOpen}\n            handleClose={() => setTimerDialogOpen(false)}\n            onTimerChange={setCurrentTimer}\n        />\n      </>\n  );\n}\n\nexport default AddMessage;\n","import { Button, List, ListItem, ListSubheader } from '@material-ui/core';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AddMessage from '../Message/AddMessage';\n\nexport const StepContextDm = React.createContext();\nexport const StepProvider = StepContextDm.Provider;\nexport const StepConsumer = StepContextDm.Consumer;\n\nfunction DmMessages({ dmId = '' }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    dmId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0,\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchDmMessages = () => {\n    const p = pagination.dmId === dmId ? pagination : {\n      dmId,\n      isPaginating: false,\n      currentStart: 0,\n      currentEnd: 0,\n      sliceStart: 0,\n    };\n    makeRequest('GET', 'DM_MESSAGES', {\n      token,\n      dmId: Number.parseInt(dmId),\n      start: p.isPaginating ? p.currentStart : 0,\n    }).then(({ data }) => {\n      const { messages: newMessages, end } = data;\n      setPagination({ ...p, dmId, currentEnd: end }); // TODO: add/remove problems\n      setMessages(newMessages);\n    }).catch(err => console.log(err));\n  };\n  useStep(fetchDmMessages, [dmId, pagination.currentStart]);\n\n  const onPrev = () =>\n      setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n        const pageSize = messages.length;\n\n        if (sliceStart + SLICE_SIZE < pageSize) {\n          return {\n            ...pagination,\n            currentStart,\n            currentEnd,\n            sliceStart: sliceStart + SLICE_SIZE,\n            isPaginating: true,\n          };\n        }\n\n        return {\n          ...pagination,\n          currentEnd,\n          currentStart: currentEnd,\n          sliceStart: 0,\n          isPaginating: true,\n        };\n      });\n\n  const onNext = () =>\n      setPagination(({ sliceStart, currentStart, ...pagination }) => {\n        if (sliceStart >= SLICE_SIZE) {\n          return {\n            ...pagination,\n            currentStart,\n            sliceStart: sliceStart - SLICE_SIZE,\n            isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE),\n          };\n        }\n\n        if (currentStart >= PAGINATION_SIZE) {\n          if (currentStart) {\n            return {\n              ...pagination,\n              currentStart: currentStart - PAGINATION_SIZE,\n              sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n            };\n          }\n        }\n\n        return {\n          ...pagination,\n          currentStart: 0,\n          sliceStart: 0,\n          isPaginating: false,\n        };\n      });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n      ? `Messages (None)`\n      : `Messages [${currentStart + sliceStart + 1}...${\n          Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)\n      }]`;\n\n  return (\n      <StepProvider value={fetchDmMessages}>\n        {pinnedMessages.length > 0 && (\n            <>\n              <hr/>\n              <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n                {pinnedMessages.map(m => <Message key={m.messageId} {...m}/>)}\n              </List>\n            </>\n        )}\n        <hr/>\n        <List subheader={<ListSubheader>{subheader}</ListSubheader>} style={{ width: '100%' }}>\n          {!isEnd && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n                  Previous messages\n                </Button>\n              </ListItem>\n          )}\n          {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map(message => (\n              <Message key={message.messageId} {...message}/>\n          ))}\n          {isPaginating && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>Next messages</Button>\n              </ListItem>\n          )}\n        </List>\n        <AddMessage dmId={dmId}/>\n      </StepProvider>\n  );\n}\n\nexport default DmMessages;\n","import { IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageEdit({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageEdit = () => {\n    const message = prompt();\n    if (message === null) {\n      return; // basic validation\n    }\n\n    /**\n     * Empty message should delete original\n     */\n    if (message === '') {\n      makeRequest('DELETE', 'MESSAGE_REMOVE', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n      return;\n    }\n\n    /**\n     * Default message edit behaviour\n     */\n    makeRequest('PUT', 'MESSAGE_EDIT', {\n      token,\n      messageId: Number.parseInt(messageId),\n      message,\n    }).then(() => {\n      step();\n      stepDm();\n    }).catch(err => console.log(err));\n  };\n\n  return (\n      <IconButton\n          disabled={disabled}\n          onClick={messageEdit}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        <EditIcon fontSize=\"small\"/>\n      </IconButton>\n  );\n}\n\nexport default MessageEdit;\n","import { IconButton } from '@material-ui/core';\nimport { withTheme } from '@material-ui/styles';\nimport { mdiPin, mdiPinOutline } from '@mdi/js';\nimport MdiIcon from '@mdi/react';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessagePin({ messageId, isPinned = false, theme }) {\n  const [isPinnedState, setIsPinnedState] = React.useState(isPinned);\n  React.useEffect(() => setIsPinnedState(isPinned), [isPinned]);\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const toggle = () => {\n    if (isPinnedState) {\n      makeRequest('POST', 'MESSAGE_UNPIN', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_PIN', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    }\n    // Optimistic re-rendering\n    // setIsPinned(isPinnedState => !!!isPinnedState);\n  };\n\n  return (\n      <IconButton\n          onClick={toggle}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        {isPinnedState\n            ? <MdiIcon path={mdiPin} size=\"1em\" color={theme && theme.palette.action.active}/>\n            : (\n                <MdiIcon\n                    path={mdiPinOutline}\n                    size=\"1em\"\n                    color={theme && theme.palette.action.active}\n                />\n            )}\n      </IconButton>\n  );\n}\n\nexport default withTheme(MessagePin);\n","import { Badge, IconButton } from '@material-ui/core';\nimport EmojiPicker, {EmojiStyle} from 'emoji-picker-react';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageReact({ messageId, reacts = [] /* [{ reactId, uIds }] */ }) {\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  const [users, setUsers] = React.useState([]);\n  const [showEmoji, setShowEmoji] = React.useState(false);\n\n  let usersReacted = [];\n\n  \n  let thumbUpCount = 0;\n  let isReacted = false;\n  const thumbUpIndex = reacts.findIndex(react => react.reactId === 1);\n  if (thumbUpIndex !== -1) {\n    thumbUpCount = reacts[thumbUpIndex].uIds.length;\n    isReacted = reacts[thumbUpIndex].isThisUserReacted;\n    usersReacted = users.filter(u => reacts[thumbUpIndex].uIds.find(e => e === u.uId));\n  }\n  const toggleEmoji = () => {\n    setShowEmoji(!showEmoji);\n  };\n  const getEmoji = (emojiData) => {\n    // Get the selected emoji and, and convert it to a number\n    let emojiCode = emojiData.emoji.codePointAt();\n    messageReact(isReacted, 1);\n  };\n\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n        .then(({ data }) => {\n          setUsers(data['users']);\n        })\n        .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n  \n  let getUserReactedName = usersReacted.length === 0 ?\n    'No reactions, react to this message!' :\n    usersReacted.reduce((acc, curr) => acc + '\\n' + curr.handleStr, 'Reacted by:');\n\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageReact = (isReacted, reactId) => {\n    if (isReacted) {\n      makeRequest('POST', 'MESSAGE_UNREACT', {\n        token,\n        messageId: Number.parseInt(messageId),\n        reactId: 1,\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_REACT', {\n        token,\n        messageId: Number.parseInt(messageId),\n        reactId: 1,\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    }\n  };\n\n  // console.log(messageId);\n  // console.log(reacts);\n  // console.log(usersReacted);\n\n\n\n  return (\n      <Badge\n          anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n          badgeContent={String(thumbUpCount) + '🔔'}\n          color=\"secondary\"\n      >\n\n        {showEmoji && <IconButton><CloseIcon onClick={toggleEmoji}/></IconButton>}\n\n        <IconButton\n            onClick={() => {toggleEmoji();}}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"delete\"\n            title={getUserReactedName}\n        >\n          {showEmoji && <EmojiPicker emojiStyle={EmojiStyle.FACEBOOK} onEmojiClick={getEmoji} autoFocusSearch={false} width={270} height={350} previewConfig={{showPreview: false}} skinTonesDisabled/>}\n          {isReacted ? <EmojiEmotionsIcon fontSize=\"small\"/> : <InsertEmoticonIcon fontSize=\"small\"/>}\n        </IconButton>\n        \n                \n        <div style={{fontSize: 10}} title={getUserReactedName}>\n          2🔔\n        </div>\n        <div style={{fontSize: 10}}>\n          2🙂\n        </div>\n        \n\n        \n      </Badge>\n  );\n}\n\nexport default MessageReact;\n","import { IconButton } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageRemove({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageRemove = () => {\n    makeRequest('DELETE', 'MESSAGE_REMOVE', {\n      token,\n      messageId: Number.parseInt(messageId),\n    }).then(() => {\n      step();\n      stepDm();\n    });\n  };\n\n  return (\n      <IconButton\n          disabled={disabled}\n          onClick={messageRemove}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        <DeleteIcon fontSize=\"small\"/>\n      </IconButton>\n  );\n}\n\nexport default MessageRemove;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  MenuItem,\n  Select,\n  TextField,\n} from '@material-ui/core';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\n\nfunction MessageShareDialog({ ogMessageId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedChannel, setSelectedChannel] = React.useState(-1);\n  const [selectedDm, setSelectedDm] = React.useState(-1);\n  const [selectedChDm, setSelectedChDm] = React.useState('');\n  const [channelsShare, setChannelsShare] = React.useState([]);\n  const [dmsShare, setDmsShare] = React.useState([]);\n  const [message, setMessage] = React.useState('');\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchChannelData() {\n      makeRequest('GET', 'CHANNELS_LIST', {\n        token,\n      }).then(({ data }) => {\n        setChannelsShare(data['channels']);\n      })\n          .catch(err => console.log(err));\n      makeRequest('GET', 'DM_LIST', {\n        token,\n      }).then(({ data }) => {\n        setDmsShare(data['dms']);\n      })\n          .catch(err => console.log(err));\n    }\n    fetchChannelData();\n  }, [token]);\n\n  const handleChannelSelect = event => {\n    setSelectedChDm(event.target.value);\n    if (event.target.value.slice(0, 1) === 'd') {\n      setSelectedDm(event.target.value.slice(1));\n      setSelectedChannel(-1);\n    } else {\n      setSelectedChannel(event.target.value.slice(1));\n      setSelectedDm(-1);\n    }\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  const handleChange = event => {\n    setMessage(event.target.value);\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    makeRequest('POST', 'MESSAGE_SHARE', {\n      token,\n      ogMessageId: Number.parseInt(ogMessageId),\n      message,\n      channelId: Number.parseInt(selectedChannel),\n      dmId: Number.parseInt(selectedDm),\n    }).then(response => {\n      console.log(response);\n      step();\n    }).catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <IconButton\n            onClick={handleClickOpen}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"share\"\n        >\n          <ArrowForwardIcon fontSize=\"small\"/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Share message</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Enter a channel below to share the message to</DialogContentText>\n              <Select\n                  style={{ width: '100%' }}\n                  id=\"u_id\"\n                  onChange={handleChannelSelect}\n                  value={selectedChDm}\n              >\n                {channelsShare.map(d => {\n                  return <MenuItem key={d.channelId} value={`c${d.channelId}`}>{d.name}</MenuItem>;\n                })}\n                {dmsShare.map(d => {\n                  return <MenuItem key={d.dmId} value={`d${d.dmId}`}>{d.name}</MenuItem>;\n                })}\n              </Select>\n              <br/>\n              <br/>\n              <DialogContentText>Optionally, enter an additional message</DialogContentText>\n              <TextField multiline fullWidth rowsMax={4} value={message} onChange={handleChange}/>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Share</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default MessageShareDialog;\n","import { Avatar, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core';\nimport timeago from 'epoch-timeago';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport MessageEdit from './MessageEdit';\nimport MessagePin from './MessagePin';\nimport MessageReact from './MessageReact';\nimport MessageRemove from './MessageRemove';\nimport MessageShareDialog from './MessageShareDialog';\n\nfunction Message({\n  messageId,\n  message = '',\n  uId,\n  timeSent,\n  isPinned = false,\n  reacts = [], /* [{ reactId, uIds }] */\n}) {\n  const [nameFirst, setNameFirst] = React.useState();\n  const [nameLast, setNameLast] = React.useState();\n  const [imgUrl, setImgUrl] = React.useState();\n  const token = React.useContext(AuthContext);\n\n  const fullName = [nameFirst, nameLast].filter(s => s != null && s !== '').join(' ');\n  const initials = [nameFirst, nameLast].filter(s => s != null && s !== '').map(s => s[0]).join('');\n\n  React.useEffect(() => {\n    setNameFirst();\n    setNameLast();\n    setImgUrl();\n    makeRequest('GET', 'USER_PROFILE', {\n      token,\n      uId,\n    }).then(({ data }) => {\n      const {\n        user: {\n          nameFirst = '',\n          nameLast = '',\n          profileImgUrl = '',\n        },\n      } = data;\n      setNameFirst(nameFirst);\n      setNameLast(nameLast);\n      setImgUrl(`${profileImgUrl}`);\n    }).catch(err => console.log(err));\n  }, [messageId, token, uId]);\n\n  return (\n      <ListItem key={messageId} style={{ width: '100%' }}>\n        {message && (\n            <>\n              <ListItemAvatar>\n                <Avatar\n                    style={{\n                      width: '50px',\n                      height: '50px',\n                      border: '1px solid #ccc',\n                    }}\n                    src={imgUrl}\n                >\n                  {initials}\n                </Avatar>\n              </ListItemAvatar>\n              <div\n                  style={{\n                    display: 'flex',\n                    width: '100%',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                  }}\n              >\n                <ListItemText\n                    primary={(\n                        <>\n                          <span>{fullName}</span>\n                          <span style={{ paddingLeft: 10, fontSize: 10 }}>\n                            {timeago(timeSent * 1000)}\n                          </span>\n                        </>\n                    )}\n                    secondary={(\n                        <div>\n                          <pre style={{ fontFamily: 'inherit' }}>{message}</pre>\n                        </div>\n                    )}\n                />\n                <div style={{ display: 'flex', height: 30, marginLeft: 20 }}>\n                  <MessageReact messageId={messageId} reacts={reacts} uId={uId}/>\n                  <MessagePin messageId={messageId} isPinned={isPinned}/>\n                  <MessageShareDialog ogMessageId={messageId}/>\n                  <MessageEdit messageId={messageId} // disabled={!isUser} /* We have no way of checking admin status */\n                  />\n                  <MessageRemove messageId={messageId} // disabled={!isUser} /* We have no way of checking admin status */\n                  />\n                </div>\n              </div>\n            </>\n        )}\n      </ListItem>\n  );\n}\n\nexport default Message;\n","import { Button, List, ListItem, ListSubheader } from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AddMessage from '../Message/AddMessage';\n\nexport const StepContext = React.createContext();\nexport const StepProvider = StepContext.Provider;\nexport const StepConsumer = StepContext.Consumer;\n\nfunction ChannelMessages({ channelId = '' }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    channelId: channelId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0,\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelMessages = () => {\n    const p = pagination.channelId === channelId ? pagination : {\n      channelId: channelId,\n      isPaginating: false,\n      currentStart: 0,\n      currentEnd: 0,\n      sliceStart: 0,\n    };\n    makeRequest('GET', 'CHANNEL_MESSAGES', {\n      token,\n      channelId: Number.parseInt(channelId),\n      start: p.isPaginating ? p.currentStart : 0,\n    }).then(({ data }) => {\n      const { messages: newMessages, end } = data;\n      setPagination({ ...p, channelId: channelId, currentEnd: end }); // TODO: add/remove problems\n      setMessages(newMessages);\n    }).catch(err => console.log(err));\n  };\n  useStep(fetchChannelMessages, [channelId, pagination.currentStart]);\n\n  const onPrev = () =>\n      setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n        const pageSize = messages.length;\n\n        if (sliceStart + SLICE_SIZE < pageSize) {\n          return {\n            ...pagination,\n            currentStart,\n            currentEnd,\n            sliceStart: sliceStart + SLICE_SIZE,\n            isPaginating: true,\n          };\n        }\n\n        return {\n          ...pagination,\n          currentEnd,\n          currentStart: currentEnd,\n          sliceStart: 0,\n          isPaginating: true,\n        };\n      });\n\n  const onNext = () =>\n      setPagination(({ sliceStart, currentStart, ...pagination }) => {\n        if (sliceStart >= SLICE_SIZE) {\n          return {\n            ...pagination,\n            currentStart,\n            sliceStart: sliceStart - SLICE_SIZE,\n            isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE),\n          };\n        }\n\n        if (currentStart >= PAGINATION_SIZE) {\n          if (currentStart) {\n            return {\n              ...pagination,\n              currentStart: currentStart - PAGINATION_SIZE,\n              sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n            };\n          }\n        }\n\n        return {\n          ...pagination,\n          currentStart: 0,\n          sliceStart: 0,\n          isPaginating: false,\n        };\n      });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n      ? `Messages (None)`\n      : `Messages [${currentStart + sliceStart + 1}...${\n          Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)\n      }]`;\n\n  return (\n      <StepProvider value={fetchChannelMessages}>\n        {pinnedMessages.length > 0 && (\n            <>\n              <hr/>\n              <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n                {pinnedMessages.map(m => <Message key={m.messageId} {...m}/>)}\n              </List>\n            </>\n        )}\n        <hr/>\n        <List subheader={<ListSubheader>{subheader}</ListSubheader>} style={{ width: '100%' }}>\n          {!isEnd && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n                  Previous messages\n                </Button>\n              </ListItem>\n          )}\n          {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map(message => (\n              <Message key={message.messageId} {...message}/>\n          ))}\n          {isPaginating && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>Next messages</Button>\n              </ListItem>\n          )}\n        </List>\n        <AddMessage channelId={channelId}/>\n      </StepProvider>\n  );\n}\n\nexport default ChannelMessages;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n} from '@material-ui/core';\nimport PersonAdd from '@material-ui/icons/PersonAdd';\nimport PersonAddDisabled from '@material-ui/icons/PersonAddDisabled';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { isMatchingId } from '../../utils';\nimport { extractUId } from '../../utils/token';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\nimport AddMemberDialog from './AddMemberDialog';\nimport ChannelMessages from './ChannelMessages';\n\nfunction Channel({ channelId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [members, setMembers] = React.useState([]);\n  const [owners, setOwners] = React.useState([]);\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  function fetchChannelData() {\n    makeRequest('GET', 'CHANNEL_DETAILS', {\n      token,\n      channelId,\n    }).then(({ data }) => {\n      const { name, ownerMembers, allMembers } = data;\n      // assumes members of form [{ uId, nameFirst, nameLast }]\n      setMembers(allMembers);\n      setOwners(ownerMembers);\n      setName(name);\n    })\n        .catch(err => {\n          console.log(err);\n          setMembers([]);\n          setOwners([]);\n          setName('');\n        })\n        .finally(() => setLoading(false));\n  }\n\n  useStep(fetchChannelData, [channelId, token], 2);\n\n  function joinChannel(channelId, token) {\n    makeRequest('POST', 'CHANNEL_JOIN', { token, channelId: Number.parseInt(channelId) })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function leaveChannel(channelId, token) {\n    makeRequest('POST', 'CHANNEL_LEAVE', { token, channelId: Number.parseInt(channelId) })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function addOwner(uId) {\n    makeRequest('POST', 'CHANNEL_ADDOWNER', { token, channelId: Number.parseInt(channelId), uId })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function removeOwner(uId) {\n    makeRequest('POST', 'CHANNEL_REMOVEOWNER', { token, channelId: Number.parseInt(channelId), uId })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function userIsMember(members) {\n    return members.find(member => isMatchingId(member.uId, uId)) !== undefined;\n  }\n\n  function userIsOwner(owners, uId) {\n    return owners.find(owner => isMatchingId(owner.uId, uId)) !== undefined;\n  }\n\n  const viewerIsMember = userIsMember(members);\n\n  return (\n      <>\n        {loading ? <Placeholder/> : (\n            <>\n              <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n              <List subheader={<ListSubheader>Members</ListSubheader>}>\n                {members.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n                    <ListItem key={uId}>\n                      <ListItemAvatar>\n                        <Avatar\n                            style={{\n                              width: '50px',\n                              height: '50px',\n                              border: '1px solid #ccc',\n                            }}\n                            src={profileImgUrl}\n                        >\n                          {[nameFirst, nameLast]\n                              .filter(s => s != null && s !== '')\n                              .map(s =>\n                                  s[0],\n                              )\n                              .join('')}\n                        </Avatar>\n                      </ListItemAvatar>\n                      <ListItemText\n                          primary={(\n                              <>\n                                <Grid container alignItems=\"center\" spacing={1}>\n                                  <Grid item>\n                                    <Link href={`/profile/${uId}`}>\n                                      {`${nameFirst} ${nameLast}`}\n                                    </Link>\n                                    {`${userIsOwner(owners, uId) ? ' ⭐' : ' '}`}\n                                  </Grid>\n                                  <Grid item>\n                                    {userIsOwner(owners, uId)\n                                        ? (\n                                            <IconButton\n                                                size=\"small\"\n                                                onClick={() => removeOwner(uId)}\n                                            >\n                                              <PersonAddDisabled/>\n                                            </IconButton>\n                                        )\n                                        : (\n                                            <IconButton\n                                                size=\"small\"\n                                                onClick={() => addOwner(uId)}\n                                            >\n                                              <PersonAdd/>\n                                            </IconButton>\n                                        )}\n                                  </Grid>\n                                </Grid>\n                              </>\n                          )}\n                      />\n                    </ListItem>\n                ))}\n                <ListItem key=\"invite_member\">\n                  {userIsMember(members)\n                      ? (\n                          <Grid container spacing={1}>\n                            <Grid item>\n                              <AddMemberDialog channelId={channelId}/>\n                            </Grid>\n                            <Grid item>\n                              <Button\n                                  variant=\"outlined\"\n                                  onClick={() => leaveChannel(channelId, token)}\n                              >\n                                Leave Channel\n                              </Button>\n                            </Grid>\n                          </Grid>\n                      )\n                      : (\n                          <Button\n                              variant=\"outlined\"\n                              color=\"primary\"\n                              onClick={() => joinChannel(channelId, token)}\n                          >\n                            Join Channel\n                          </Button>\n                      )}\n                </ListItem>\n              </List>\n              {viewerIsMember && <ChannelMessages channelId={channelId}/>}\n            </>\n        )}\n      </>\n  );\n}\n\nexport default Channel;\n","import { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { drawerWidth } from '../../utils/constants';\n\nconst useStyles = makeStyles(theme => ({\n  body: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n    padding: 20,\n  },\n  toolbar: theme.mixins.toolbar,\n}));\n\nfunction Body({ children }) {\n  const classes = useStyles();\n  return (\n      <div className={classes.body}>\n        {/* Padding */}\n        <div className={classes.toolbar}/>\n        {children}\n      </div>\n  );\n}\n\nexport default Body;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  MenuItem,\n  Radio,\n  RadioGroup,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { PERMISSION_IDS } from '../../utils/constants';\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleRadioChange = event => {\n    const newPermissionId = parseInt(event.target.value, 10);\n    setPermissionId(newPermissionId);\n  };\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) {\n      return;\n    }\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    makeRequest('POST', 'ADMIN_USERPERMISSION_CHANGE', {\n      token,\n      uId: Number.parseInt(uId),\n      permissionId: Number.parseInt(permissionId),\n    }).then(response => {\n      console.log(response);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        <div onClick={handleClickOpen}>{children}</div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>\n                Select a user below to set permissions for this user\n              </DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <Select\n                      style={{ width: '100%' }}\n                      id=\"uId\"\n                      onChange={handleUserSelect}\n                      value={selectedUser}\n                  >\n                    {users.map((d, idx) => {\n                      return (\n                          <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Grid>\n                <Grid container item justify=\"center\" alignItems=\"center\">\n                  <RadioGroup\n                      aria-label=\"position\"\n                      name=\"position\"\n                      value={permissionId}\n                      onChange={handleRadioChange}\n                      row\n                  >\n                    <FormControlLabel\n                        value={PERMISSION_IDS.MEMBER}\n                        control={<Radio color=\"primary\"/>}\n                        label=\"Member\"\n                        labelPlacement=\"bottom\"\n                    />\n                    <FormControlLabel\n                        value={PERMISSION_IDS.OWNER}\n                        control={<Radio color=\"primary\"/>}\n                        label=\"Owner\"\n                        labelPlacement=\"bottom\"\n                    />\n                  </RadioGroup>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Set</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </>\n  );\n}\n\nexport default SetUserPermissionsDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Grid,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\n\nfunction UserRemoveDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) {\n      return;\n    }\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    makeRequest('DELETE', 'ADMIN_USER_REMOVE', {\n      token,\n      uId: Number.parseInt(uId),\n    }).then(response => {\n      console.log(response);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        <div onClick={handleClickOpen}>{children}</div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Remove Users</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Select a user below to remove</DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <Select\n                      style={{ width: '100%' }}\n                      id=\"uId\"\n                      onChange={handleUserSelect}\n                      value={selectedUser}\n                  >\n                    {users.map(d => {\n                      return (\n                          <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Remove</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </>\n  );\n}\n\nexport default UserRemoveDialog;\n","import Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React from 'react';\nimport SetUserPermissionsDialog from './SetUserPermissionsDialog';\nimport UserRemoveDialog from './UserRemoveDialog';\n\nexport default function Admin() {\n  const [open, setOpen] = React.useState(false);\n  const buttonRef = React.useRef();\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n      <div>\n        <Button\n            ref={buttonRef}\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            onClick={handleClick}\n            color=\"inherit\"\n        >\n          Admin\n        </Button>\n        <Menu\n            id=\"simple-menu\"\n            anchorEl={buttonRef.current}\n            keepMounted\n            open={open}\n            onClose={handleClose}\n        >\n          <SetUserPermissionsDialog>\n            <MenuItem onClick={handleClose}>Set User Permissions</MenuItem>\n          </SetUserPermissionsDialog>\n          <UserRemoveDialog>\n            <MenuItem onClick={handleClose}>Remove Users</MenuItem>\n          </UserRemoveDialog>\n          <MenuItem onClick={handleClose}>Close</MenuItem>\n        </Menu>\n      </div>\n  );\n}\n","import Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\n\nexport default function NotificationList() {\n  const [open, setOpen] = React.useState(false);\n  const [notifs, setNotifs] = React.useState([]);\n  const buttonRef = React.useRef();\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'NOTIFICATIONS_GET', { token })\n        .then(({ data }) => {\n          setNotifs(data.notifications);\n        })\n        .catch(err => console.log(err));\n  }, [open, token]);\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n      <div>\n        <Button\n            ref={buttonRef}\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            onClick={handleClick}\n            color=\"inherit\"\n        >\n          Notifications\n        </Button>\n        <Menu\n            id=\"simple-menu\"\n            anchorEl={buttonRef.current}\n            keepMounted\n            open={open}\n            onClose={handleClose}\n        >\n          {notifs.length === 0 ? <div>&nbsp;You don't have any notifications.&nbsp;</div> : (\n              notifs.map(notif => {\n                if (notif.dmId === -1) {\n                  return (\n                      <MenuItem component={Link} to={`/channel/${notif.channelId}`}>\n                        {notif.notificationMessage}\n                      </MenuItem>\n                  );\n                } else {\n                  return (\n                      <MenuItem component={Link} to={`/dm/${notif.dmId}`}>\n                        {notif.notificationMessage}\n                      </MenuItem>\n                  );\n                }\n              })\n          )}\n          <MenuItem onClick={handleClose}>Close</MenuItem>\n        </Menu>\n      </div>\n  );\n}\n","import Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport React from 'react';\nimport { getIsPolling, setIsPolling, step, usePolling } from '../../utils/update';\n\nconst options = ['Live', 'Step'];\n\nfunction PollToggle() {\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const [selectedIndex, setSelectedIndex] = React.useState(getIsPolling() ? 0 : 1);\n\n  usePolling();\n\n  const handleClick = () => {\n    step();\n  };\n\n  const handleMenuItemClick = (event, index) => {\n    setIsPolling(index === 0);\n    setSelectedIndex(index);\n    setOpen(false);\n  };\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  return (\n      <>\n        <ButtonGroup\n            variant=\"contained\"\n            color=\"primary\"\n            ref={anchorRef}\n            aria-label=\"split button\"\n            style={{ marginRight: 15 }}\n        >\n          <Button onClick={handleClick} disabled={selectedIndex === 0}>\n            {options[selectedIndex]}\n          </Button>\n          <Button\n              color=\"primary\"\n              size=\"small\"\n              aria-owns={open ? 'menu-list-grow' : undefined}\n              aria-haspopup=\"true\"\n              onClick={handleToggle}\n          >\n            <ArrowDropDownIcon/>\n          </Button>\n        </ButtonGroup>\n        <Popper open={open} anchorEl={anchorRef.current} transition disablePortal>\n          {({ TransitionProps, placement }) => (\n              <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n              >\n                <Paper id=\"menu-list-grow\">\n                  <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList>\n                      {options.map((option, index) => (\n                          <MenuItem\n                              key={option}\n                              disabled={index === 2}\n                              selected={index === selectedIndex}\n                              onClick={event => handleMenuItemClick(event, index)}\n                          >\n                            {option}\n                          </MenuItem>\n                      ))}\n                    </MenuList>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n          )}\n        </Popper>\n      </>\n  );\n}\n\nexport default PollToggle;\n","import InputBase from '@material-ui/core/InputBase';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(1),\n      width: 'auto',\n      marginRight: theme.spacing(2),\n    },\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  },\n}));\n\nfunction SearchBar(props) {\n  const classes = useStyles();\n\n  const [queryStr, setQueryStr] = React.useState('');\n\n  const onSubmit = () => props.history.push(`/search/${queryStr}`);\n\n  return (\n      <form onSubmit={onSubmit}>\n        <div className={classes.search}>\n          <div className={classes.searchIcon}>\n            <SearchIcon/>\n          </div>\n          <InputBase\n              placeholder=\"Search…\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n              value={queryStr}\n              onChange={e => setQueryStr(e.target.value)}\n          />\n        </div>\n      </form>\n  );\n}\n\nexport default withRouter(SearchBar);\n","import { Button } from \"@material-ui/core\";\nimport Brightness5Icon from '@material-ui/icons/Brightness5';\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\n\n\nimport React, {useContext} from \"react\";\nimport { DarkModeContext } from \"../../DarkModeContext\";\n\nexport default function DarkModeToggle () {\n  const darkMode = useContext(DarkModeContext);\n\n  return (\n    <Button onClick={darkMode.switchTheme}>\n      {!darkMode.isDark ? <Brightness5Icon/> : <Brightness7Icon/>}\n    </Button>\n  );\n}\n","import { AppBar, Button, IconButton, Toolbar, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { drawerWidth } from '../../utils/constants';\nimport Admin from '../Admin';\nimport NotificationList from '../NotificationList';\nimport PollToggle from '../PollToggle';\nimport SearchBar from '../Search/SearchBar';\nimport DarkModeToggle from './DarkModeToggle';\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    marginLeft: drawerWidth,\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  logoutButton: {\n    float: 'right',\n  },\n}));\n\nfunction Header({ handleMenuToggle = () => {} }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const token = React.useContext(AuthContext);\n  const [loggedOut, setLoggedOut] = React.useState(false);\n\n  if (loggedOut) {\n    makeRequest('POST', 'AUTH_LOGOUT', { token })\n        .then(response => {\n          console.log(response);\n        })\n        .catch(err => console.log(err));\n    localStorage.removeItem('token');\n    localStorage.removeItem('uId');\n    return <Redirect to=\"/login\"/>;\n  }\n\n  return (\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          {!matches && (\n              <>\n                <IconButton\n                    color=\"inherit\"\n                    aria-label=\"open drawer\"\n                    edge=\"start\"\n                    onClick={handleMenuToggle}\n                    className={classes.menuButton}\n                >\n                  <MenuIcon/>\n                </IconButton>\n                <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n                  <Typography variant=\"h5\" noWrap>Memes</Typography>\n                </Link>\n              </>\n          )}\n          <div variant=\"h6\" className={classes.title}></div>\n          <div style={{ display: 'flex' }}>\n            <DarkModeToggle/>\n            <SearchBar/>\n            <PollToggle/>\n            <NotificationList/>\n            <Admin/>\n            <Button\n                color=\"inherit\"\n                className={classes.logoutButton}\n                onClick={() => {\n                  setLoggedOut(true);\n                }}\n            >\n              Logout\n            </Button>\n          </div>\n        </Toolbar>\n      </AppBar>\n  );\n}\n\nexport default Header;\n","import { Divider, Drawer, Hidden, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport React, {useContext} from 'react';\nimport { Link } from 'react-router-dom';\nimport { drawerWidth } from '../../utils/constants';\nimport { DarkModeContext } from \"../../DarkModeContext\";\n\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n\nfunction SideMenu({ container, children, open, setOpen }) {\n  const darkMode = useContext(DarkModeContext);\n  const classes = useStyles();\n  const theme = useTheme();\n  const color = darkMode.isDark ? '#FFFFFF' : '#000000';\n\n  return (\n      <nav className={classes.drawer} aria-label=\"channels\">\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n              open={open}\n              onClose={() => setOpen(false)}\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n          >\n            <div className={classes.toolbar}/>\n            <Divider/>\n            {children}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              variant=\"permanent\"\n              open\n          >\n            <div className={classes.toolbar}>\n              <Link to=\"/\" style={{ color, textDecoration: 'none' }}>\n                <Typography variant=\"h5\" noWrap>1531-MEME</Typography>\n              </Link>\n            </div>\n            {children}\n          </Drawer>\n        </Hidden>\n      </nav>\n  );\n}\n\nexport default SideMenu;\n","import React from 'react';\nimport Body from './Body';\nimport Header from './Header';\nimport SideMenu from './SideMenu';\n\nfunction Layout({ menu, body }) {\n  const [open, setOpen] = React.useState(false);\n  function handleMenuToggle() {\n    setOpen(open => !!!open);\n  }\n  return (\n      <div style={{ display: 'flex' }}>\n        <Header handleMenuToggle={handleMenuToggle}/>\n        <SideMenu open={open} setOpen={setOpen}>{menu}</SideMenu>\n        <Body>{body}</Body>\n      </div>\n  );\n}\n\nexport default Layout;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  IconButton,\n  Switch,\n  TextField,\n} from '@material-ui/core';\nimport Add from '@material-ui/icons/Add';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\n\nfunction AddChannelDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const name = event.target[0].value;\n    const secret = event.target[1].checked;\n    const isPublic = !secret;\n\n    if (!name) {\n      return;\n    }\n\n    makeRequest('POST', 'CHANNELS_CREATE', { token, name, isPublic })\n        .then(response => {\n          console.log(response);\n          props.callback();\n        })\n        .catch(err => console.log(err));\n  }\n\n  return (\n      <div>\n        <IconButton size=\"small\" onClick={handleClickOpen}>\n          <Add/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Create Channel</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Complete the form below to create a new channel</DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <TextField\n                      autoFocus\n                      margin=\"dense\"\n                      id=\"channelName\"\n                      label=\"Channel Name\"\n                      name=\"channelName\"\n                      fullWidth\n                  />\n                </Grid>\n                <Grid container item justify=\"center\" alignItems=\"center\">\n                  <Visibility/>\n                  <FormControlLabel\n                      control={<Switch value=\"secret\" inputProps={{ 'aria-label': 'Secret' }}/>}\n                      label=\"Secret\"\n                      labelPlacement=\"top\"\n                  />\n                  <VisibilityOff/>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Create</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddChannelDialog;\n","import { List, ListItem, ListItemIcon, ListItemText, ListSubheader } from '@material-ui/core';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport axios from 'axios';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport { useStep } from '../utils/update';\nimport AddChannelDialog from './Channel/AddChannelDialog';\n\nfunction ChannelList({ channelId: currChannelId }) {\n  const [myChannels, setMyChannels] = React.useState([]);\n  const [allChannels, setAllChannels] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelsData = () => {\n    // fetch channels data\n    const getMyChannels = makeRequest('GET', 'CHANNELS_LIST', { token });\n    const getAllChannels = makeRequest('GET', 'CHANNELS_LISTALL', { token });\n\n    axios.all([\n      getMyChannels,\n      getAllChannels,\n    ]).then(axios.spread((myChannelResponse, allChannelResponse) => {\n      const myChannelData = myChannelResponse.data.channels;\n      const allChannelData = allChannelResponse.data.channels;\n      const filteredChannels = allChannelData.filter(channel => {\n        return (\n            myChannelData.find(c => c.channelId === channel.channelId) === undefined\n        );\n      });\n      setMyChannels(myChannelData);\n      setAllChannels(filteredChannels);\n    }));\n  };\n\n  useStep(fetchChannelsData, [], 2);\n\n  return (\n      <>\n        <List\n            subheader={(\n                <ListSubheader style={{ display: 'flex' }}>\n                  <span style={{ flex: 1 }}>My Channels</span>\n                  <AddChannelDialog callback={fetchChannelsData}/>\n                </ListSubheader>\n            )}\n        >\n          {myChannels.map(({ channelId, name }, index) => (\n              <ListItem button key={channelId} component={Link} to={`/channel/${channelId}`}>\n                <ListItemIcon>\n                  {channelId == currChannelId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n        <List subheader={<ListSubheader>Other Channels</ListSubheader>}>\n          {allChannels.map(({ channelId, name }, index) => (\n              <ListItem button key={channelId} component={Link} to={`/channel/${channelId}`}>\n                <ListItemIcon>\n                  {channelId == currChannelId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n      </>\n  );\n}\n\nexport default ChannelList;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Input,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport Add from '@material-ui/icons/Add';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { extractUId } from '../../utils/token';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n};\n\nfunction AddDmDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUsers, setSelectedUsers] = React.useState([]);\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleUserSelect(event) {\n    setSelectedUsers(event.target.value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    makeRequest('POST', 'DM_CREATE', { token, uIds: selectedUsers })\n        .then(response => {\n          console.log(response);\n          props.callback();\n        })\n        .catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <IconButton size=\"small\" onClick={handleClickOpen}>\n          <Add/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Create Dm</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Select the users below to create a new dm</DialogContentText>\n              <Select\n                  multiple\n                  value={selectedUsers}\n                  onChange={handleUserSelect}\n                  input={<Input/>}\n                  MenuProps={MenuProps}\n                  style={{ width: '100%' }}\n              >\n                {users.map(d => {\n                  if (uId != d.uId) {\n                    return (\n                        <MenuItem key={d.uId} value={d.uId}>\n                          {d.nameFirst + ' ' + d.nameLast}\n                        </MenuItem>\n                    );\n                  }\n                })}\n              </Select>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Create</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddDmDialog;\n","import { List, ListItem, ListItemIcon, ListItemText, ListSubheader } from '@material-ui/core';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport AddDmDialog from './Dm/AddDmDialog';\n\nfunction DmList({ dmId: currDmId }) {\n  const [myDms, setMyDms] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchDmsData = () => {\n    makeRequest('GET', 'DM_LIST', { token })\n        .then(({ data }) => {\n          setMyDms(data['dms']);\n        })\n        .catch(err => console.log(err));\n  };\n\n  useStep(fetchDmsData, [], 2);\n\n  return (\n      <>\n        <List\n            subheader={(\n                <ListSubheader style={{ display: 'flex' }}>\n                  <span style={{ flex: 1 }}>My Dms</span>\n                  <AddDmDialog callback={fetchDmsData}/>\n                </ListSubheader>\n            )}\n        >\n          {myDms.map(({ dmId, name }) => (\n              <ListItem button key={dmId} component={Link} to={`/dm/${dmId}`}>\n                <ListItemIcon>\n                  {dmId == currDmId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n      </>\n  );\n}\n\nexport default DmList;\n","import { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { extractUId } from '../utils/token';\n\nfunction ProfileList() {\n  const uid = extractUId(React.useContext(AuthContext));\n  return (\n      <List>\n        <ListItem button key={'profile'} component={Link} to={`/profile/${uid}`}>\n          <ListItemIcon>\n            <AccountCircle/>\n          </ListItemIcon>\n          <ListItemText primary=\"Profile\"/>\n        </ListItem>\n      </List>\n  );\n}\n\nexport default ProfileList;\n","import React from 'react';\nimport ChannelList from './ChannelList';\nimport DmList from './DmList';\nimport ProfileList from './ProfileList';\n\nfunction ProfileChannelLists({ channelId, dmId }) {\n  return (\n      <>\n        <ProfileList/>\n        <ChannelList channelId={channelId}/>\n        <DmList dmId={dmId}/>\n      </>\n  );\n}\n\nexport default ProfileChannelLists;\n","import React from 'react';\nimport Channel from '../components/Channel';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction ChannelPage({ match }) {\n  const { channelId } = match.params;\n  return (\n      <Layout\n          menu={<ProfileChannelLists channelId={channelId} dmId={null}/>}\n          body={<Channel channelId={channelId}/>}\n      />\n  );\n}\n\nexport default ChannelPage;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  Link,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\nimport DmMessages from './DmMessages';\n\nfunction Dm({ dmId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [membersList, setMembersList] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  function fetchDmData() {\n    makeRequest('GET', 'DM_DETAILS', {\n      token,\n      dmId,\n    }).then(({ data }) => {\n      const { name, members } = data;\n      // assumes members of form [{ uId, nameFirst, nameLast }]\n      console.log(members);\n      setMembersList(members);\n      setName(name);\n    })\n        .catch(err => {\n          console.log(err)\n          setMembersList([]);\n          setName('');\n        })\n        .finally(() => setLoading(false));\n  }\n\n  useStep(fetchDmData, [dmId, token], 2);\n\n  function leaveDm(dmId, token) {\n    makeRequest('POST', 'DM_LEAVE', { token, dmId: Number.parseInt(dmId) })\n        .then(() => {\n          fetchDmData(dmId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function removeDm(dmId, token) {\n    makeRequest('DELETE', 'DM_REMOVE', {\n      token,\n      dmId: Number.parseInt(dmId),\n    }).then(() => {\n      fetchDmData(dmId, token);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        {loading ? <Placeholder/> : (\n            <>\n              <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n              <List subheader={<ListSubheader>Members</ListSubheader>}>\n                {membersList.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n                    <ListItem key={uId}>\n                      <ListItemAvatar>\n                        <Avatar\n                            style={{\n                              width: '50px',\n                              height: '50px',\n                              border: '1px solid #ccc',\n                            }}\n                            src={profileImgUrl}\n                        >\n                          {[nameFirst, nameLast]\n                              .filter(s =>\n                                  s != null && s !== '',\n                              )\n                              .map(s => s[0])\n                              .join('')}\n                        </Avatar>\n                      </ListItemAvatar>\n                      <ListItemText\n                          primary={(\n                              <>\n                                <Grid container alignItems=\"center\" spacing={1}>\n                                  <Grid item>\n                                    <Link href={`/profile/${uId}`}>\n                                      {`${nameFirst} ${nameLast}`}\n                                    </Link>\n                                  </Grid>\n                                </Grid>\n                              </>\n                          )}\n                      />\n                    </ListItem>\n                ))}\n                <ListItem key=\"leave_dm\">\n                  <Grid container spacing={1}>\n                    <Grid item>\n                      <Button variant=\"outlined\" onClick={() => leaveDm(dmId, token)}>\n                        Leave Dm\n                      </Button>\n                      &nbsp;\n                      <Button variant=\"outlined\" onClick={() => removeDm(dmId, token)}>\n                        Remove Dm\n                      </Button>\n                    </Grid>\n                  </Grid>\n                </ListItem>\n              </List>\n              <DmMessages dmId={dmId}/>\n            </>\n        )}\n      </>\n  );\n}\n\nexport default Dm;\n","import React from 'react';\nimport Dm from '../components/Dm';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction DmPage({ match }) {\n  const { dmId } = match.params;\n  return (\n      <Layout menu={<ProfileChannelLists channelId={null} dmId={dmId}/>} body={<Dm dmId={dmId}/>}/>\n  );\n}\n\nexport default DmPage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n\n    // Quick validation\n    if (!email) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_PASSWORDRESET_REQUEST', { email })\n        .then(response => {\n          console.log(response);\n          props.history.push('/reset_password');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Forgot Password</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"email\"\n                        autoFocus\n                    />\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Send Recovery Email\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">{'Remember your password? Login'}</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import { Typography } from '@material-ui/core';\nimport React, {useContext} from 'react';\nimport { Scatter } from 'react-chartjs-2';\nimport AuthContext from '../AuthContext';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport { DarkModeContext } from '../DarkModeContext';\n\nfunction WorkspaceStats() {\n  const token = React.useContext(AuthContext);\n  const [utilizationRate, setUtilizationRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n  const darkMode = useContext(DarkModeContext); \n  const color = darkMode.isDark ? \"#FFFFFFEE\" : \"#000000EE\";\n  \n\n  React.useEffect(() => {\n    makeRequest('GET', 'USERS_STATS', { token })\n        .then(({ data }) => {\n          console.log(data);\n          const { workspaceStats } = data;\n          setUtilizationRate(workspaceStats['utilizationRate']);\n          setChannelsData(workspaceStats['channelsExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numChannelsExist'],\n            };\n          }));\n          setDmsData(workspaceStats['dmsExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numDmsExist'],\n            };\n          }));\n          setMessagesData(workspaceStats['messagesExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numMessagesExist'],\n            };\n          }));\n        })\n        .catch(err => console.log(err));\n  }, [token]);\n\n  return (\n      <>\n        <Typography variant=\"h5\">Workspace statistics</Typography>\n        <p>Wow! {(utilizationRate * 100).toFixed(2)}% utilisation</p>\n        <Scatter\n            data={{\n              datasets: [\n                {\n                  label: 'Channels',\n                  data: channelsData,\n                  fill: false,\n                  borderColor: '#742774',\n                  showLine: true,\n                },\n                {\n                  label: 'Dms',\n                  data: dmsData,\n                  fill: false,\n                  borderColor: '#4287f5',\n                  showLine: true,\n                },\n                {\n                  label: 'Messages',\n                  data: messagesData,\n                  fill: false,\n                  borderColor: '#bd2d4f',\n                  showLine: true,\n                },\n              ],\n            }}\n            options={{\n              legend: {\n                labels: {\n                  fontColor: color\n                }\n              },\n              scales: {\n                xAxes: [{\n                  title: 'time',\n                  type: 'time',\n                  gridLines: {\n                    lineWidth: 2,\n                    color\n                  },\n                  time: {\n                    unitStepSize: 200,\n                    displayFormats: {\n                      millisecond: 'MMM DD HH:mm',\n                      second: 'MMM DD HH:mm',\n                      minute: 'MMM DD HH:mm',\n                      hour: 'MMM DD HH:mm',\n                      day: 'MMM DD',\n                      week: 'MMM DD',\n                      month: 'MMM DD',\n                      quarter: 'MMM DD',\n                      year: 'MMM DD',\n                    },\n                  },\n                  ticks: {\n                    fontColor: color\n                  }\n                }],\n                yAxes:[{\n                  gridLines: {\n                    color\n                  },\n                  ticks: {\n                    fontColor: color\n                  }\n                }]\n              },\n            }}\n        />\n      </>\n  );\n}\n\nexport default WorkspaceStats;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport WorkspaceStats from '../components/WorkspaceStats';\n\nfunction HomePage() {\n  return (\n      <Layout\n          menu={<ProfileChannelLists/>}\n          body={(\n              <>\n                <Typography variant=\"h4\">WELCOME</Typography>\n                <div style={{ paddingTop: 15 }}>\n                  <Typography variant=\"body1\">\n                    This is Memes: agile messaging for Software Engineers\n                  </Typography>\n                </div>\n                <br/>\n                <WorkspaceStats/>\n              </>\n          )}\n      />\n  );\n}\n\nexport default HomePage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport React from 'react';\nimport '../App.css';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    // body: {\n    //   backgroundColor: theme.palette.primary.light,\n    // },\n  },\n  card: {\n    // backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction LoginPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n    const password = event.target[2].value;\n\n    // Quick validation\n    if (!email || !password) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_LOGIN', { email, password })\n        .then(response => {\n          console.log(response);\n          const data = response.data;\n          setAuth(data.token, data.authUserId);\n          props.history.push('/');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <LockOutlinedIcon/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Login</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"text\"\n                        autoFocus\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                    />\n                    <div className=\"password-warning\">\n                      Passwords are not securely stored.\n                      <br/>\n                      Do not enter any currently used passwords.\n                    </div>\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Sign In\n                    </Button>\n                    <Grid container direction=\"column\" alignItems=\"center\">\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/register\" variant=\"body1\">\n                          {\"Don't have an account? Register\"}\n                        </Link>\n                      </Grid>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/forgot_password\" variant=\"body1\">Forgot password?</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default LoginPage;\n","import { Grid } from '@material-ui/core';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Edit from '@material-ui/icons/Edit';\nimport Save from '@material-ui/icons/Save';\nimport React from 'react';\n\nfunction EditableFields({\n  editable,\n  master,\n  masterValue,\n  slaves,\n  slaveValues,\n  onSave,\n  ...props\n}) {\n  const [edit, setEdit] = React.useState(false);\n  const [prevMasterValue, setPrevMasterValue] = React.useState();\n  const [currMasterValue, setCurrMasterValue] = React.useState(masterValue);\n  const [prevSlaveValues, setPrevSlaveValues] = React.useState([]);\n  const [currSlaveValues, setCurrSlaveValues] = React.useState(slaveValues);\n\n  // Handle async passing of master/slave values\n  React.useEffect(() => {\n    setCurrMasterValue(masterValue);\n    setCurrSlaveValues(slaveValues);\n  }, [masterValue, slaveValues]);\n\n  function toggleEdit() {\n    setPrevMasterValue(currMasterValue);\n    setPrevSlaveValues(currSlaveValues);\n    setEdit(!edit);\n  }\n\n  function icons() {\n    if (!editable) {\n      return null;\n    }\n    if (edit) {\n      return (\n          <>\n            <Save\n                style={{ cursor: 'pointer' }}\n                onClick={() => {\n                  if (currMasterValue == null) {\n                    return;\n                  }\n                  if (onSave) {\n                    if (currSlaveValues) {\n                      onSave(currMasterValue, ...currSlaveValues);\n                    } else {\n                      onSave(currMasterValue);\n                    }\n                  }\n                  toggleEdit();\n                }}\n            />\n            <Cancel\n                style={{ cursor: 'pointer' }}\n                onClick={() => {\n                  setCurrMasterValue(prevMasterValue);\n                  setCurrSlaveValues(prevSlaveValues);\n                  toggleEdit();\n                }}\n            />\n          </>\n      );\n    }\n    return <Edit style={{ cursor: 'pointer' }} onClick={toggleEdit}/>;\n  }\n  function onSlaveChange(event, valueIndex) {\n    let copySlaves = currSlaveValues.map((val, idx) => {\n      if (idx === valueIndex) {\n        return event.target.value;\n      }\n      return val;\n    });\n    setCurrSlaveValues(copySlaves);\n  }\n\n  function onMasterChange(event) {\n    setCurrMasterValue(event.target.value);\n  }\n\n  return (\n      <Grid container spacing={1} alignItems=\"flex-end\">\n        {slaves && slaves.map((slave, idx) => {\n          return (\n              <Grid item key={idx}>\n                {slave({\n                  value: currSlaveValues[idx] || '', // \"\" required for label placeholder mechanics\n                  InputProps: { readOnly: !edit },\n                  onChange: event => onSlaveChange(event, idx),\n                })}\n              </Grid>\n          );\n        })}\n        <Grid item>\n          {master({\n            value: currMasterValue || '', // \"\" required for label placeholder mechanics\n            InputProps: { readOnly: !edit },\n            onChange: onMasterChange,\n          })}\n        </Grid>\n        {editable && <Grid item>{icons()}</Grid>}\n      </Grid>\n  );\n}\n\nexport default EditableFields;\n","import { Typography } from '@material-ui/core';\nimport React, {useContext} from 'react';\nimport { Scatter } from 'react-chartjs-2';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { DarkModeContext } from \"../../DarkModeContext\";\n\n\nfunction UserStats() {\n  const token = React.useContext(AuthContext);\n  const [involvementRate, setInvolvementRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n  const darkMode = useContext(DarkModeContext); \n  const color = darkMode.isDark ? \"#FFFFFFEE\" : \"#000000EE\";\n\n  React.useEffect(() => {\n    makeRequest('GET', 'USER_STATS', { token })\n        .then(({ data }) => {\n          console.log(data);\n          const { userStats } = data;\n          setInvolvementRate(userStats['involvementRate']);\n          setChannelsData(userStats['channelsJoined'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numChannelsJoined'],\n            };\n          }));\n          setDmsData(userStats['dmsJoined'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numDmsJoined'],\n            };\n          }));\n          setMessagesData(userStats['messagesSent'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numMessagesSent'],\n            };\n          }));\n        })\n        .catch(err => console.log(err));\n  }, [token]);\n\n  return (\n      <>\n        <Typography variant=\"h5\">User statistics</Typography>\n        <p>Involvement rate: {(involvementRate * 100).toFixed(2)}%</p>\n        <Scatter\n            data={{\n              datasets: [\n                {\n                  label: 'Channels joined',\n                  data: channelsData,\n                  fill: false,\n                  borderColor: '#742774',\n                  showLine: true,\n                },\n                {\n                  label: 'Dms joined',\n                  data: dmsData,\n                  fill: false,\n                  borderColor: '#4287f5',\n                  showLine: true,\n                },\n                {\n                  label: 'Messages sent',\n                  data: messagesData,\n                  fill: false,\n                  borderColor: '#bd2d4f',\n                  showLine: true,\n                },\n              ],\n            }}\n            options={{\n              legend: {\n                labels: {\n                  fontColor: color\n                }\n              },\n              scales: {\n                xAxes: [{\n                  title: 'time',\n                  type: 'time',\n                  gridLines: {\n                    lineWidth: 2,\n                    color\n                  },\n                  time: {\n                    unitStepSize: 200,\n                    displayFormats: {\n                      millisecond: 'MMM DD HH:mm',\n                      second: 'MMM DD HH:mm',\n                      minute: 'MMM DD HH:mm',\n                      hour: 'MMM DD HH:mm',\n                      day: 'MMM DD',\n                      week: 'MMM DD',\n                      month: 'MMM DD',\n                      quarter: 'MMM DD',\n                      year: 'MMM DD',\n                    },\n                  },\n                  ticks: {\n                    fontColor: color\n                  }\n                }],\n                yAxes:[{\n                  gridLines: {\n                    color\n                  },\n                  ticks: {\n                    fontColor: color\n                  }\n                }]\n              },\n            }}\n        />\n      </>\n  );\n}\nexport default UserStats;\n","import { List, ListItem, ListSubheader, TextField, Typography } from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { extractUId } from '../../utils/token';\nimport Placeholder from '../Placeholder';\nimport EditableFields from './EditableFields';\nimport UserStats from './UserStats';\n\nfunction Profile({ profile }) {\n  const [loading, setLoading] = React.useState(true);\n  const [profileDetails, setProfileDetails] = React.useState({});\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'USER_PROFILE', {\n      token,\n      uId: profile,\n    }).then(({ data }) => {\n      console.log(data);\n      const { user } = data;\n      setProfileDetails(user);\n    })\n        .catch(err => {console.log(err)})\n        .finally(() => setLoading(false));\n  }, [profile, token]);\n\n  function updateName(nameLast, nameFirst) {\n    makeRequest('PUT', 'USER_PROFILE_SETNAME', { token, nameFirst, nameLast })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n  }\n\n  function updateEmail(email) {\n    makeRequest('PUT', 'USER_PROFILE_SETEMAIL', { token, email })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n  }\n\n  function updateProfileImgUrl(rawText) {\n    const items = rawText.split(',');\n    makeRequest('POST', 'USER_PROFILE_UPLOADPHOTO', {\n      token,\n      imgUrl: items[0],\n      xStart: Number.parseInt(items[1]),\n      yStart: Number.parseInt(items[2]),\n      xEnd: Number.parseInt(items[3]),\n      yEnd: Number.parseInt(items[4]),\n    }).then(({ data }) => {\n      console.log(data);\n    }).catch(err => console.log(err));\n  }\n\n  function updateHandle(handleStr) {\n    makeRequest('PUT', 'USER_PROFILE_SETHANDLE', { token, handleStr })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => console.log(err));\n  }\n\n  const editable = uId.toString() === profile;\n\n  return (\n      <>\n        <Typography variant=\"h4\">Profile</Typography>\n        {loading\n            ? <Placeholder/>\n            : (\n                <List subheader={<ListSubheader>Profile Details</ListSubheader>}>\n                  <ListItem key={'name'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.nameLast}\n                        slaveValues={[profileDetails.nameFirst]}\n                        master={passedProps => <TextField label={'Last Name'} {...passedProps}/>}\n                        slaves={[passedProps => <TextField label={'First Name'} {...passedProps}/>]}\n                        onSave={updateName}\n                    />\n                  </ListItem>\n                  <ListItem key={'email'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.email}\n                        master={passedProps => <TextField label={'Email'} {...passedProps}/>}\n                        onSave={updateEmail}\n                    />\n                  </ListItem>\n                  <ListItem key={'handle'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.handleStr}\n                        master={passedProps => <TextField label={'Handle'} {...passedProps}/>}\n                        onSave={updateHandle}\n                    />\n                  </ListItem>\n                  <ListItem key={'imgUrl'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.profileImgUrl}\n                        master={passedProps => (\n                            <TextField label={'imgUrl,x1,y1,x2,y2'} {...passedProps}/>\n                        )}\n                        onSave={updateProfileImgUrl}\n                    />\n                  </ListItem>\n                  <br/>\n                  <div>\n                    NOTE: The final field input is to set a profile image. Please enter the 5\n                    components (image url, xStart, yStart, xEnd, yEnd) separated by commas.\n                  </div>\n                </List>\n            )}\n        <br/>\n        {editable && <UserStats/>}\n      </>\n  );\n}\n\nexport default Profile;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport Profile from '../components/Profile';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction ProfilePage({ match }) {\n  const { profile } = match.params;\n  return <Layout menu={<ProfileChannelLists/>} body={<Profile profile={profile}/>}/>;\n}\n\nexport default ProfilePage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction RegisterPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n  const [values, setValues] = React.useState({\n    nameFirst: '',\n    nameLast: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = name =>\n      event => {\n        setValues({ ...values, [name]: event.target.value });\n      };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Quick validation\n    if (!values.email || !values.password) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_REGISTER', { ...values })\n        .then(response => {\n          console.log(response);\n          const data = response.data;\n          setAuth(data.token, data.authUserId);\n          props.history.push('/');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Register</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"nameFirst\"\n                        label=\"First name\"\n                        name=\"nameFirst\"\n                        type=\"text\"\n                        autoFocus\n                        value={values.nameFirst}\n                        onChange={handleChange('nameFirst')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"nameLast\"\n                        label=\"Last name\"\n                        name=\"nameLast\"\n                        type=\"text\"\n                        value={values.nameLast}\n                        onChange={handleChange('nameLast')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"email\"\n                        value={values.email}\n                        onChange={handleChange('email')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                        value={values.password}\n                        onChange={handleChange('password')}\n                    />\n                    <div className=\"password-warning\">\n                      Passwords are not securely stored.\n                      <br/>\n                      Do not enter any currently used passwords.\n                    </div>\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Sign Up\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">\n                          {'Already have an account? Login'}\n                        </Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default RegisterPage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const resetCode = event.target[0].value;\n    const newPassword = event.target[2].value;\n\n    // Quick validation\n    if (!resetCode || !newPassword) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_PASSWORDRESET_RESET', { resetCode, newPassword })\n        .then(response => {\n          console.log(response);\n          props.history.push('/login');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Reset Password</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"resetCode\"\n                        label=\"Reset code\"\n                        name=\"resetCode\"\n                        type=\"text\"\n                        autoFocus\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"newPassword\"\n                        label=\"New Password\"\n                        name=\"newPassword\"\n                        type=\"password\"\n                    />\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Change Password\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">{'Remember your password? Login'}</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import { List, ListSubheader, Typography } from '@material-ui/core';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport Message from '../Message';\n\nfunction Search({ queryStr, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [messages, setMessages] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  // Only perform search if there is a query\n  React.useEffect(() => {\n    function performSearch() {\n      makeRequest('GET', 'SEARCH', { token, queryStr })\n          .then(({ data }) => {\n            const { messages } = data;\n            if (typeof messages !== 'undefined' && !Array.isArray(messages)) {\n              return;\n            }\n            setMessages(messages);\n            setLoading(false);\n          })\n          .catch(err => {\n            console.log(err);\n            setLoading(false);\n          });\n    }\n    if (queryStr !== '') {\n      performSearch();\n    }\n  }, [token, queryStr]);\n\n  // If there is no query\n  if (queryStr === '') {\n    return (\n        <>\n          <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search</Typography>\n          <Typography variant=\"h6\">Enter a query in the search bar above</Typography>\n        </>\n    );\n  }\n\n  // If there is a query\n  return (\n      <>\n        <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search Results</Typography>\n        {loading\n            ? <LinearProgress/>\n            : messages.length == 0\n                ? <Typography variant=\"h6\">Your search did not return any results</Typography>\n                : (\n                    <List\n                        subheader={<ListSubheader>Messages</ListSubheader>}\n                        style={{ width: '100%' }}\n                    >\n                      {messages.slice().reverse().map(message => (\n                          <Message key={message.messageId} {...message}/>\n                      ))}\n                    </List>\n                )}\n      </>\n  );\n}\n\nexport default Search;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Search from '../components/Search';\n\nfunction SearchPage({ match }) {\n  const { queryStr = '' } = match.params;\n  return <Layout menu={<ProfileChannelLists/>} body={<Search queryStr={queryStr}/>}/>;\n}\n\nexport default SearchPage;\n","import React, {useState} from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport { AuthProvider } from './AuthContext';\nimport { DarkModeProvider } from './DarkModeContext';\nimport './axios';\nimport ProtectedRoute from './components/Layout/ProtectedRoute';\nimport ChannelPage from './pages/ChannelPage';\nimport DmPage from './pages/DmPage';\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ProfilePage from './pages/ProfilePage';\nimport RegisterPage from './pages/RegisterPage';\nimport ResetPasswordPage from './pages/ResetPasswordPage';\nimport SearchPage from './pages/SearchPage';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { themes } from './theme';\n\nfunction App() {\n  document.title = 'UNSW Memes';\n  // Get theme from user OS\n  // const prefersDarkMode = useMediaQuery('(prefers-color-scheme: light)');\n  const [authDetails, setAuthDetails] = React.useState(localStorage.getItem('token'));\n  const checkDarkMode = /true/.test(localStorage.getItem('darkMode'));\n  // Set Theme here\n  const [windowTheme, setWindowTheme] = useState({\n    isDark: checkDarkMode ? true : false,\n    theme: themes.light,\n    switchTheme\n  });\n  function switchTheme () {\n    setWindowTheme((prevState) => {\n      localStorage.setItem('darkMode', !prevState.isDark);\n      return {\n        theme: prevState.isDark ? themes.dark : themes.light,\n        isDark: !prevState.isDark,\n        switchTheme,\n      }\n    });\n  }\n  // -------------------------------------------------------------\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: windowTheme.isDark ? themes.dark : themes.light,\n      }),\n    [windowTheme],\n  );\n\n  function setAuth(token, uId) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('uId', uId);\n    setAuthDetails(token);\n  }\n  return (\n      <AuthProvider value={authDetails}>\n        <DarkModeProvider value={windowTheme}>\n        <ThemeProvider theme={theme}>\n        <CssBaseline/>\n          <Router>\n            <Switch>\n              <Route\n                  exact\n                  path=\"/login\"\n                  render={props => {\n                    return <LoginPage {...props} setAuth={setAuth}/>;\n                  }}\n              />\n              <Route\n                  exact\n                  path=\"/register\"\n                  render={props => {\n                    return <RegisterPage {...props} setAuth={setAuth}/>;\n                  }}\n              />\n              <Route exact path=\"/forgot_password\" component={ForgotPasswordPage}/>\n              <Route exact path=\"/reset_password\" component={ResetPasswordPage}/>\n              <ProtectedRoute exact path=\"/\" component={HomePage}/>\n              <ProtectedRoute path=\"/profile/:profile\" component={ProfilePage}/>\n              <ProtectedRoute path=\"/channel/:channelId\" component={ChannelPage}/>\n              <ProtectedRoute path=\"/dm/:dmId\" component={DmPage}/>\n              <ProtectedRoute path=\"/search/:queryStr\" component={SearchPage}/>\n              <ProtectedRoute path=\"/search\" component={SearchPage}/>\n            </Switch>\n          </Router>\n        </ThemeProvider>\n        </DarkModeProvider>\n      </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import MomentUtils from '@date-io/moment';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport React, {useContext}  from 'react';\nimport ReactDOM from 'react-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport { DarkModeContext } from './DarkModeContext';\n\nReactDOM.render(\n    (\n      <MuiPickersUtilsProvider utils={MomentUtils}>\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        <CssBaseline/>\n        <App/>\n        <ToastContainer\n            position=\"top-center\"\n            autoClose={5000}\n            hideProgressBar={false}\n            newestOnTop\n            closeOnClick\n            rtl={false}\n            pauseOnVisibilityChange\n            draggable\n            pauseOnHover\n        />\n      </MuiPickersUtilsProvider>\n    ),\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}