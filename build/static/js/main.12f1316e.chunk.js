(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{133:function(e,a,t){},213:function(e,a,t){e.exports=t(338)},337:function(e,a,t){},338:function(e,a,t){"use strict";t.r(a);var n=t(157),r=t(407),l=t(26),c=t(406),o=t(0),i=t.n(o),s=t(13),u=t.n(s),m=t(74),E=(t(218),t(6)),d=t(25),f=t(60),p=(t(133),i.a.createContext()),g=p.Provider,h=(p.Consumer,p),v=t(11),b=t(22),S=t.n(b);t(235);t(236).config();var I="0",O="https://example.alwaysdata.net";void 0!==window.BACKEND_PORT?(I=window.BACKEND_PORT,O=window.DEPLOYED_URL):I=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BACKEND_PORT;var y="0"===I||void 0===I?O:"http://localhost:"+I,C=1,T=2,N=void 0!==window.ITERATION?parseInt(window.ITERATION):parseInt(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ITERATION);console.log("Using backend at",y),console.log("Running frontend for iteration",N);S.a.defaults.baseURL=y,S.a.defaults.headers.put["Content-Type"]="application/json",S.a.defaults.headers.post["Content-Type"]="application/json",S.a.defaults.headers.delete["Content-Type"]="application/json",S.a.interceptors.request.use((function(e){return e}));S.a.interceptors.response.use((function(e){return"error"in e.data?(m.b.error("An error occured. Try again later"),Promise.reject()):e}),(function(e){return console.error(e),m.b.error(e.response.data.error.message||"An error occured. Try again later"),Promise.reject(Object(v.a)({},e))}));var j=function(e){var a=i.a.useContext(h);return console.log(a),a?i.a.createElement(f.b,e):i.a.createElement(f.a,{to:"/login"})},A=t(14),k=t(55),M=t(348),w=t(388),D=t(349),_=t(391),L=t(415),R=t(392),P=t(393),x=t(394),U=t(350),F=t(342),H=t(172),G=t.n(H),W=t(171),V=t.n(W),z=[{},{},{AUTH_LOGIN:"auth/login/v2",AUTH_REGISTER:"auth/register/v2",AUTH_LOGOUT:"auth/logout/v1",CHANNEL_INVITE:"channel/invite/v2",CHANNEL_DETAILS:"channel/details/v2",CHANNEL_MESSAGES:"channel/messages/v2",CHANNEL_JOIN:"channel/join/v2",CHANNEL_ADDOWNER:"channel/addowner/v1",CHANNEL_REMOVEOWNER:"channel/removeowner/v1",CHANNEL_LEAVE:"channel/leave/v1",CHANNELS_LIST:"channels/list/v2",CHANNELS_LISTALL:"channels/listall/v2",CHANNELS_CREATE:"channels/create/v2",MESSAGE_SEND:"message/send/v1",MESSAGE_EDIT:"message/edit/v1",MESSAGE_REMOVE:"message/remove/v1",DM_DETAILS:"dm/details/v1",DM_LIST:"dm/list/v1",DM_CREATE:"dm/create/v1",DM_REMOVE:"dm/remove/v1",DM_LEAVE:"dm/leave/v1",DM_MESSAGES:"dm/messages/v1",MESSAGE_SENDDM:"message/senddm/v1",USER_PROFILE:"user/profile/v2",USER_PROFILE_SETNAME:"user/profile/setname/v1",USER_PROFILE_SETEMAIL:"user/profile/setemail/v1",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v1",USERS_ALL:"users/all/v1",SEARCH:"search/v1",CLEAR:"clear/v1"},{AUTH_LOGIN:"auth/login/v3",AUTH_REGISTER:"auth/register/v3",AUTH_LOGOUT:"auth/logout/v2",CHANNEL_INVITE:"channel/invite/v3",CHANNEL_DETAILS:"channel/details/v3",CHANNEL_MESSAGES:"channel/messages/v3",CHANNEL_JOIN:"channel/join/v3",CHANNEL_ADDOWNER:"channel/addowner/v2",CHANNEL_REMOVEOWNER:"channel/removeowner/v2",CHANNEL_LEAVE:"channel/leave/v2",CHANNELS_LIST:"channels/list/v3",CHANNELS_LISTALL:"channels/listall/v3",CHANNELS_CREATE:"channels/create/v3",MESSAGE_SEND:"message/send/v2",MESSAGE_EDIT:"message/edit/v2",MESSAGE_REMOVE:"message/remove/v2",MESSAGE_SHARE:"message/share/v1",DM_DETAILS:"dm/details/v2",DM_LIST:"dm/list/v2",DM_CREATE:"dm/create/v2",DM_REMOVE:"dm/remove/v2",DM_LEAVE:"dm/leave/v2",DM_MESSAGES:"dm/messages/v2",MESSAGE_SENDDM:"message/senddm/v2",USER_PROFILE:"user/profile/v3",USER_PROFILE_SETNAME:"user/profile/setname/v2",USER_PROFILE_SETEMAIL:"user/profile/setemail/v2",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v2",USERS_ALL:"users/all/v2",SEARCH:"search/v1",ADMIN_USER_REMOVE:"admin/user/remove/v1",ADMIN_USERPERMISSION_CHANGE:"admin/userpermission/change/v1",NOTIFICATIONS_GET:"notifications/get/v1",CLEAR:"clear/v1",STANDUP_START:"standup/start/v1",STANDUP_ACTIVE:"standup/active/v1",STANDUP_SEND:"standup/send/v1",AUTH_PASSWORDRESET_REQUEST:"auth/passwordreset/request/v1",AUTH_PASSWORDRESET_RESET:"auth/passwordreset/reset/v1",USER_STATS:"user/stats/v1",USERS_STATS:"users/stats/v1",USER_PROFILE_UPLOADPHOTO:"user/profile/uploadphoto/v1",MESSAGE_SENDLATER:"message/sendlater/v1",MESSAGE_SENDLATERDM:"message/sendlaterdm/v1",MESSAGE_REACT:"message/react/v1",MESSAGE_UNREACT:"message/unreact/v1",MESSAGE_PIN:"message/pin/v1",MESSAGE_UNPIN:"message/unpin/v1"}];S.a.defaults.headers.common["user-agent"]="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36",S.a.defaults.baseURL="https://colossal-ruddy-swoop.glitch.me";var q=function(e,a,t){if(2===N){if(null==z[N][a])return Promise.reject(new Error("Don't worry - this is not part of iteration 2 so this error is expected"));switch(e){case"GET":return S.a.get(z[N][a],{params:t});case"POST":return S.a.post(z[N][a],t);case"PUT":return S.a.put(z[N][a],t);case"DELETE":return S.a.delete(z[N][a],{params:t});default:console.log("yikes")}}else if(3===N){var n=t.token,r=Object(A.a)(t,["token"]);switch(e){case"GET":return S.a.get(z[N][a],{params:r,headers:{token:n}});case"POST":return S.a.post(z[N][a],r,{headers:{token:n}});case"PUT":return S.a.put(z[N][a],r,{headers:{token:n}});case"DELETE":return S.a.delete(z[N][a],{params:r,headers:{token:n}});default:console.log("yikes")}}};function B(e,a){var t=Object(o.useRef)();Object(o.useEffect)((function(){t.current=e}),[e]),Object(o.useEffect)((function(){if(null!==a){var e=setInterval((function(){t.current()}),a);return function(){return clearInterval(e)}}}),[a])}var J=function(e,a){return parseInt(e,10)===parseInt(a,10)};function K(e){var a=localStorage.getItem("uId");return null==a&&(a=-1),a}var Y=[],Q=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===Y.find((function(a){return a.subscriber===e}))&&Y.push({subscriber:e,interval:a})},$=function(e){return Y=Y.filter((function(a){return a.subscriber!==e}))},X=function(e){Y.forEach((function(a){e&&e%a.interval!==0||a.subscriber()}))},Z=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e&&"function"===typeof e;return i.a.useEffect((function(){if(n)return e(),Q(e,t),function(){return $(e)}}),a),X},ee=!1,ae=0,te=t(375);var ne=function(){return i.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}},i.a.createElement(te.a,null))},re=t(377),le=t(378),ce=t(379),oe=t(380),ie=t(411),se=t(383),ue=t(384);var me=function(e){var a=e.channelId,t=(Object(A.a)(e,["channelId"]),i.a.useState(!1)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState(""),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState([]),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useContext(h),v=Z();function b(){l(!1)}return i.a.useEffect((function(){q("GET","USERS_ALL",{token:g}).then((function(e){var a=e.data;p(a.users)})).catch((function(e){return console.log(e)}))}),[g]),i.a.createElement("div",null,i.a.createElement(F.a,{variant:"outlined",color:"primary",onClick:function(){l(!0)}},"Invite Member"),i.a.createElement(re.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Invite User"),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!=s&&q("POST","CHANNEL_INVITE",{token:g,uId:s,channelId:Number.parseInt(a)}).then((function(e){console.log(e),v()})).catch((function(e){return console.log(e)}))}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Select a user below to invite them to this channel"),i.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var a=parseInt(e.target.value,10);u(a)},value:s},f.map((function(e,a){return i.a.createElement(se.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:b,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:b,type:"submit",color:"primary"},"Invite")))))},Ee=t(163),de=t.n(Ee),fe=t(100),pe=t.n(fe),ge=t(410),he=t(387),ve=t(166),be=t.n(ve),Se=t(165),Ie=t.n(Se),Oe=t(164),ye=t.n(Oe),Ce=t(351),Te=t(408);var Ne=function(e){var a=e.open,t=e.handleClose,n=e.onTimerChange,r=(Object(A.a)(e,["open","handleClose","onTimerChange"]),i.a.useState(new Date)),l=Object(E.a)(r,2),c=l[0],o=l[1];return i.a.createElement("div",null,i.a.createElement(re.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Send later"),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(c)}},i.a.createElement(ce.a,null,i.a.createElement(Te.a,{margin:"normal",id:"time-picker",label:"Time picker",value:c,onChange:function(e){return o(e.toDate())},KeyboardButtonProps:{"aria-label":"change time"}}),i.a.createElement(oe.a,null,"Enter a time to send")),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:t,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:t,type:"submit",color:"primary"},"Set Time")))))},je=t(121),Ae=Object(Ce.a)((function(e){return{flex:{display:"flex",flexDirection:"row",alignItems:"center"},input:{margin:e.spacing(1),marginRight:0},button:{margin:e.spacing(1),marginLeft:0,alignSelf:"stretch"},rightIcon:{marginLeft:e.spacing(1)},standupTimer:{margin:e.spacing(2)}}}));var ke=function(e){var a=e.channelId,t=void 0===a?-1:a,n=e.dmId,r=void 0===n?-1:n,l=Ae(),c=i.a.useState(""),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState(-1),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useState(!1),v=Object(E.a)(g,2),b=v[0],S=v[1],I=i.a.useState(!1),O=Object(E.a)(I,2),y=O[0],C=O[1],T=i.a.useContext(h),N=i.a.useContext(Xe),j=i.a.useContext(Me);N=N||function(){},j=j||function(){};var A=-1!==f,M=i.a.useState(),w=Object(E.a)(M,2),D=w[0],_=w[1],L=i.a.useState(),R=Object(E.a)(L,2),P=R[0],x=R[1],H=function(){var e=s.trim();if(e)if(u(""),-1===r&&D&&D>0)q("POST","STANDUP_SEND",{token:T,channelId:Number.parseInt(t),message:e}).then((function(e){var a=e.data;console.log(a),N()})).catch((function(e){return console.log(e)}));else{if(A)return-1===r?q("POST","MESSAGE_SENDLATER",{token:T,channelId:Number.parseInt(t),message:e,timeSent:f.getTime()/1e3}).then((function(e){var a=e.data;return console.log(a)})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_SENDLATERDM",{token:T,dmId:Number.parseInt(r),message:e,timeSent:f.getTime()/1e3}).then((function(e){var a=e.data;return console.log(a)})).catch((function(e){return console.log(e)})),void p(-1);if(-1===r&&e.startsWith("/standup")){var a=e.match(/\/standup\s+([1-9][0-9]*)/);if(!a||a.length<2)alert("Usage: /standup <duration in seconds>");else{var n=parseInt(a[1],10);isNaN(n)||!Number.isInteger(n)?alert("Usage: /standup <duration in seconds>"):q("POST","STANDUP_START",{token:T,channelId:Number.parseInt(t),length:n}).then((function(e){var a=e.data.timeFinish;x(a),alert("You've started a standup for ".concat(n," seconds"))})).catch((function(e){return console.log(e)}))}}else-1===r?q("POST","MESSAGE_SEND",{token:T,channelId:Number.parseInt(t),message:e}).then((function(e){var a=e.data;console.log(a),N()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_SENDDM",{token:T,dmId:Number.parseInt(r),message:e}).then((function(e){var a=e.data;console.log(a),j()})).catch((function(e){return console.log(e)}))}};B((function(){P>Date.now()/1e3?_((function(){return Math.round(P-Math.round(Date.now()/1e3))})):_()}),1e3);var G=function(){-1!==t&&q("GET","STANDUP_ACTIVE",{token:T,channelId:t}).then((function(e){var a=e.data,t=a.isActive,n=void 0!==t&&t,r=a.timeFinish;n&&r?x(r):(_(0),x(-1))})).catch((function(e){return console.log(e)}))};return Z(G,[s]),i.a.useEffect(G,[t]),i.a.createElement(i.a.Fragment,null,D>0&&i.a.createElement(k.a,{variant:"caption",className:l.standupTimer},"STANDUP ACTIVE: ".concat(D," seconds remaining")),i.a.createElement("div",{className:l.flex},i.a.createElement(ge.a,{className:l.input,label:"Send a message \ud83d\udcac",multiline:!0,placeholder:"...",fullWidth:!0,margin:"normal",variant:"filled",onKeyDown:function(e){"Enter"!==e.key||e.getModifierState("Shift")||(e.preventDefault(),H())},value:s,onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:i.a.createElement(he.a,{position:"end"},i.a.createElement(U.a,null,i.a.createElement(ye.a,{onClick:function(){C(!y)}})),i.a.createElement(U.a,{"aria-label":"toggle visibility",disabled:D>0,onClick:function(){return A?p(-1):S(!0)}},i.a.createElement(Ie.a,{color:A?"secondary":void 0})))}}),y&&i.a.createElement(je.b,{emojiStyle:je.a.FACEBOOK,onEmojiClick:function(e){u(s+e.emoji)},autoFocusSearch:!1,width:270,height:350,previewConfig:{showPreview:!1},skinTonesDisabled:!0}),i.a.createElement(F.a,{className:l.button,variant:"contained",color:"primary",onClick:H},"Send",i.a.createElement(be.a,{className:l.rightIcon}))),i.a.createElement(Ne,{open:b,handleClose:function(){return S(!1)},onTimerChange:p}))},Me=i.a.createContext(),we=Me.Provider;Me.Consumer;var De=function(e){var a=e.dmId,t=void 0===a?"":a,n=i.a.useState([]),r=Object(E.a)(n,2),l=r[0],c=r[1],o=i.a.useState({dmId:t,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(E.a)(o,2),u=s[0],m=s[1],d=i.a.useContext(h),f=function(){var e=u.dmId===t?u:{dmId:t,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};q("GET","DM_MESSAGES",{token:d,dmId:Number.parseInt(t),start:e.isPaginating?e.currentStart:0}).then((function(a){var n=a.data,r=n.messages,l=n.end;m(Object(v.a)(Object(v.a)({},e),{},{dmId:t,currentEnd:l})),c(r)})).catch((function(e){return console.log(e)}))};Z(f,[t,u.currentStart]);var p=u.currentStart,g=u.currentEnd,b=u.sliceStart,S=u.isPaginating,I=-1==g&&b>=l.length-10,O=l.filter((function(e){return e.isPinned})),y=l.length?"Messages [".concat(p+b+1,"...").concat(Math.min(p+l.length,p+b+10),"]"):"Messages (None)";return i.a.createElement(we,{value:f},O.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Pinned Messages")},O.map((function(e){return i.a.createElement($e,Object.assign({key:e.messageId},e))})))),i.a.createElement("hr",null),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,y),style:{width:"100%"}},!I&&i.a.createElement(D.a,null,i.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return m((function(e){var a=e.sliceStart,t=e.currentStart,n=e.currentEnd,r=Object(A.a)(e,["sliceStart","currentStart","currentEnd"]);return a+10<l.length?Object(v.a)(Object(v.a)({},r),{},{currentStart:t,currentEnd:n,sliceStart:a+10,isPaginating:!0}):Object(v.a)(Object(v.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),l.slice(b,b+10).reverse().map((function(e){return i.a.createElement($e,Object.assign({key:e.messageId},e))})),S&&i.a.createElement(D.a,null,i.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return m((function(e){var a=e.sliceStart,t=e.currentStart,n=Object(A.a)(e,["sliceStart","currentStart"]);return a>=10?Object(v.a)(Object(v.a)({},n),{},{currentStart:t,sliceStart:a-10,isPaginating:!(0==t&&10==a)}):t>=50&&t?Object(v.a)(Object(v.a)({},n),{},{currentStart:t-50,sliceStart:40}):Object(v.a)(Object(v.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),i.a.createElement(ke,{dmId:t}))};var _e=function(e){var a=e.messageId,t=e.disabled,n=void 0!==t&&t,r=i.a.useContext(h),l=i.a.useContext(Xe),c=i.a.useContext(Me);return l=l||function(){},c=c||function(){},i.a.createElement(U.a,{disabled:n,onClick:function(){var e=prompt();null!==e&&(""!==e?q("PUT","MESSAGE_EDIT",{token:r,messageId:Number.parseInt(a),message:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):q("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(a)}).then((function(){l(),c()})).catch((function(e){return console.log(e)})))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},i.a.createElement(pe.a,{fontSize:"small"}))},Le=t(389),Re=t(123),Pe=t(122),xe=t.n(Pe);var Ue=Object(Le.a)((function(e){var a=e.messageId,t=e.isPinned,n=void 0!==t&&t,r=e.theme,l=i.a.useState(n),c=Object(E.a)(l,2),o=c[0],s=c[1];i.a.useEffect((function(){return s(n)}),[n]);var u=i.a.useContext(h),m=i.a.useContext(Xe),d=i.a.useContext(Me);return m=m||function(){},d=d||function(){},i.a.createElement(U.a,{onClick:function(){o?q("POST","MESSAGE_UNPIN",{token:u,messageId:Number.parseInt(a)}).then((function(){m(),d()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_PIN",{token:u,messageId:Number.parseInt(a)}).then((function(){m(),d()})).catch((function(e){return console.log(e)}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},o?i.a.createElement(xe.a,{path:Re.a,size:"1em",color:r&&r.palette.action.active}):i.a.createElement(xe.a,{path:Re.b,size:"1em",color:r&&r.palette.action.active}))})),Fe=t(390),He=t(167),Ge=t.n(He),We=t(168),Ve=t.n(We);var ze=function(e){var a=e.messageId,t=e.reacts,n=void 0===t?[]:t,r=i.a.useContext(h),l=i.a.useContext(Xe),c=i.a.useContext(Me);l=l||function(){},c=c||function(){};var o=0,s=!1,u=n.findIndex((function(e){return 1===e.reactId}));return-1!==u&&(o=n[u].uIds.length,s=n[u].isThisUserReacted),i.a.createElement(Fe.a,{anchorOrigin:{horizontal:"right",vertical:"bottom"},badgeContent:o,color:"secondary"},i.a.createElement(U.a,{onClick:function(){return function(e){e?q("POST","MESSAGE_UNREACT",{token:r,messageId:Number.parseInt(a),reactId:1}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_REACT",{token:r,messageId:Number.parseInt(a),reactId:1}).then((function(){l(),c()})).catch((function(e){return console.log(e)}))}(s)},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},s?i.a.createElement(Ge.a,{fontSize:"small"}):i.a.createElement(Ve.a,{fontSize:"small"})))},qe=t(169),Be=t.n(qe);var Je=function(e){var a=e.messageId,t=e.disabled,n=void 0!==t&&t,r=i.a.useContext(h),l=i.a.useContext(Xe),c=i.a.useContext(Me);return l=l||function(){},c=c||function(){},i.a.createElement(U.a,{disabled:n,onClick:function(){q("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(a)}).then((function(){l(),c()}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},i.a.createElement(Be.a,{fontSize:"small"}))},Ke=t(170),Ye=t.n(Ke);var Qe=function(e){var a=e.ogMessageId,t=(Object(A.a)(e,["ogMessageId"]),i.a.useState(!1)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState(-1),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState(-1),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useState(""),v=Object(E.a)(g,2),b=v[0],S=v[1],I=i.a.useState([]),O=Object(E.a)(I,2),y=O[0],C=O[1],T=i.a.useState([]),N=Object(E.a)(T,2),j=N[0],k=N[1],M=i.a.useState(""),w=Object(E.a)(M,2),D=w[0],_=w[1],L=i.a.useContext(h),R=Z();function P(){l(!1)}return i.a.useEffect((function(){q("GET","CHANNELS_LIST",{token:L}).then((function(e){var a=e.data;C(a.channels)})).catch((function(e){return console.log(e)})),q("GET","DM_LIST",{token:L}).then((function(e){var a=e.data;k(a.dms)})).catch((function(e){return console.log(e)}))}),[L]),i.a.createElement("div",null,i.a.createElement(U.a,{onClick:function(){l(!0)},style:{margin:1},size:"small",edge:"end","aria-label":"share"},i.a.createElement(Ye.a,{fontSize:"small"})),i.a.createElement(re.a,{open:r,onClose:P,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Share message"),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q("POST","MESSAGE_SHARE",{token:L,ogMessageId:Number.parseInt(a),message:D,channelId:Number.parseInt(s),dmId:Number.parseInt(f)}).then((function(e){console.log(e),R()})).catch((function(e){return console.log(e)}))}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Enter a channel below to share the message to"),i.a.createElement(ie.a,{style:{width:"100%"},id:"u_id",onChange:function(e){S(e.target.value),"d"===e.target.value.slice(0,1)?(p(e.target.value.slice(1)),u(-1)):(u(e.target.value.slice(1)),p(-1))},value:b},y.map((function(e){return i.a.createElement(se.a,{key:e.channelId,value:"c".concat(e.channelId)},e.name)})),j.map((function(e){return i.a.createElement(se.a,{key:e.dmId,value:"d".concat(e.dmId)},e.name)}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(oe.a,null,"Optionally, enter an additional message"),i.a.createElement(ge.a,{multiline:!0,fullWidth:!0,rowsMax:4,value:D,onChange:function(e){_(e.target.value)}})),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:P,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:P,type:"submit",color:"primary"},"Share")))))};var $e=function(e){var a=e.messageId,t=e.message,n=void 0===t?"":t,r=e.uId,l=e.timeSent,c=e.isPinned,o=void 0!==c&&c,s=e.reacts,u=void 0===s?[]:s,m=i.a.useState(),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useState(),v=Object(E.a)(g,2),b=v[0],S=v[1],I=i.a.useState(),O=Object(E.a)(I,2),y=O[0],C=O[1],T=i.a.useContext(h),N=[f,b].filter((function(e){return null!=e&&""!==e})).join(" "),j=[f,b].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join("");return i.a.useEffect((function(){p(),S(),C(),q("GET","USER_PROFILE",{token:T,uId:r}).then((function(e){var a=e.data.user,t=a.nameFirst,n=void 0===t?"":t,r=a.nameLast,l=void 0===r?"":r,c=a.profileImgUrl,o=void 0===c?"":c;p(n),S(l),C("".concat(o))})).catch((function(e){return console.log(e)}))}),[a,T,r]),i.a.createElement(D.a,{key:a,style:{width:"100%"}},n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,null,i.a.createElement(L.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:y},j)),i.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"}},i.a.createElement(R.a,{primary:i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,N),i.a.createElement("span",{style:{paddingLeft:10,fontSize:10}},de()(1e3*l))),secondary:i.a.createElement("div",null,i.a.createElement("pre",{style:{fontFamily:"inherit"}},n))}),i.a.createElement("div",{style:{display:"flex",height:30,marginLeft:20}},i.a.createElement(ze,{messageId:a,reacts:u,uId:r}),i.a.createElement(Ue,{messageId:a,isPinned:o}),i.a.createElement(Qe,{ogMessageId:a}),i.a.createElement(_e,{messageId:a}),i.a.createElement(Je,{messageId:a})))))},Xe=i.a.createContext(),Ze=Xe.Provider;Xe.Consumer;var ea=function(e){var a=e.channelId,t=void 0===a?"":a,n=i.a.useState([]),r=Object(E.a)(n,2),l=r[0],c=r[1],o=i.a.useState({channelId:t,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(E.a)(o,2),u=s[0],m=s[1],d=i.a.useContext(h),f=function(){var e=u.channelId===t?u:{channelId:t,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};q("GET","CHANNEL_MESSAGES",{token:d,channelId:Number.parseInt(t),start:e.isPaginating?e.currentStart:0}).then((function(a){var n=a.data,r=n.messages,l=n.end;m(Object(v.a)(Object(v.a)({},e),{},{channelId:t,currentEnd:l})),c(r)})).catch((function(e){return console.log(e)}))};Z(f,[t,u.currentStart]);var p=u.currentStart,g=u.currentEnd,b=u.sliceStart,S=u.isPaginating,I=-1==g&&b>=l.length-10,O=l.filter((function(e){return e.isPinned})),y=l.length?"Messages [".concat(p+b+1,"...").concat(Math.min(p+l.length,p+b+10),"]"):"Messages (None)";return i.a.createElement(Ze,{value:f},O.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Pinned Messages")},O.map((function(e){return i.a.createElement($e,Object.assign({key:e.messageId},e))})))),i.a.createElement("hr",null),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,y),style:{width:"100%"}},!I&&i.a.createElement(D.a,null,i.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return m((function(e){var a=e.sliceStart,t=e.currentStart,n=e.currentEnd,r=Object(A.a)(e,["sliceStart","currentStart","currentEnd"]);return a+10<l.length?Object(v.a)(Object(v.a)({},r),{},{currentStart:t,currentEnd:n,sliceStart:a+10,isPaginating:!0}):Object(v.a)(Object(v.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),l.slice(b,b+10).reverse().map((function(e){return i.a.createElement($e,Object.assign({key:e.messageId},e))})),S&&i.a.createElement(D.a,null,i.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return m((function(e){var a=e.sliceStart,t=e.currentStart,n=Object(A.a)(e,["sliceStart","currentStart"]);return a>=10?Object(v.a)(Object(v.a)({},n),{},{currentStart:t,sliceStart:a-10,isPaginating:!(0==t&&10==a)}):t>=50&&t?Object(v.a)(Object(v.a)({},n),{},{currentStart:t-50,sliceStart:40}):Object(v.a)(Object(v.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),i.a.createElement(ke,{channelId:t}))};var aa=function(e){var a=e.channelId,t=(Object(A.a)(e,["channelId"]),i.a.useState(!0)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState(""),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState([]),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useState([]),v=Object(E.a)(g,2),b=v[0],S=v[1],I=i.a.useContext(h),O=K();function y(){q("GET","CHANNEL_DETAILS",{token:I,channelId:a}).then((function(e){var a=e.data,t=a.name,n=a.ownerMembers,r=a.allMembers;p(r),S(n),u(t)})).catch((function(e){console.log(e),p([]),S([]),u("")})).finally((function(){return l(!1)}))}function C(e){return void 0!==e.find((function(e){return J(e.uId,O)}))}function T(e,a){return void 0!==e.find((function(e){return J(e.uId,a)}))}Z(y,[a,I],2);var N=C(f);return i.a.createElement(i.a.Fragment,null,r?i.a.createElement(ne,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4"},s.toUpperCase()),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Members")},f.map((function(e){var t=e.uId,n=e.nameFirst,r=e.nameLast,l=e.profileImgUrl;return i.a.createElement(D.a,{key:t},i.a.createElement(_.a,null,i.a.createElement(L.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:l},[n,r].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),i.a.createElement(R.a,{primary:i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{container:!0,alignItems:"center",spacing:1},i.a.createElement(P.a,{item:!0},i.a.createElement(x.a,{href:"/profile/".concat(t)},"".concat(n," ").concat(r)),"".concat(T(b,t)?" \u2b50":" ")),i.a.createElement(P.a,{item:!0},T(b,t)?i.a.createElement(U.a,{size:"small",onClick:function(){return function(e){q("POST","CHANNEL_REMOVEOWNER",{token:I,channelId:Number.parseInt(a),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t)}},i.a.createElement(V.a,null)):i.a.createElement(U.a,{size:"small",onClick:function(){return function(e){q("POST","CHANNEL_ADDOWNER",{token:I,channelId:Number.parseInt(a),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t)}},i.a.createElement(G.a,null)))))}))})),i.a.createElement(D.a,{key:"invite_member"},C(f)?i.a.createElement(P.a,{container:!0,spacing:1},i.a.createElement(P.a,{item:!0},i.a.createElement(me,{channelId:a})),i.a.createElement(P.a,{item:!0},i.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,a){q("POST","CHANNEL_LEAVE",{token:a,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a,I)}},"Leave Channel"))):i.a.createElement(F.a,{variant:"outlined",color:"primary",onClick:function(){return function(e,a){q("POST","CHANNEL_JOIN",{token:a,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a,I)}},"Join Channel"))),N&&i.a.createElement(ea,{channelId:a})))},ta=t(28),na=t(385),ra=Object(na.a)((function(e){var a;return{body:(a={},Object(ta.a)(a,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),Object(ta.a)(a,"padding",20),a),toolbar:e.mixins.toolbar}}));var la=function(e){var a=e.children,t=ra();return i.a.createElement("div",{className:t.body},i.a.createElement("div",{className:t.toolbar}),a)},ca=t(400),oa=t(386),ia=t(23),sa=t(399),ua=t(176),ma=t.n(ua),Ea=t(162),da=t(416),fa=t(395),pa=t(412);var ga=function(e){var a=e.children,t=(Object(A.a)(e,["children"]),i.a.useState(!1)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState(T),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState([]),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useState(""),v=Object(E.a)(g,2),b=v[0],S=v[1],I=i.a.useContext(h);function O(){l(!1)}return i.a.useEffect((function(){q("GET","USERS_ALL",{token:I}).then((function(e){var a=e.data;p(a.users)})).catch((function(e){return console.log(e)}))}),[I]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onClick:function(){l(!0)}},a),i.a.createElement(re.a,{open:r,onClose:O,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Set User Permissions"),i.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var a=parseInt(e.target[0].value,10);q("POST","ADMIN_USERPERMISSION_CHANGE",{token:I,uId:Number.parseInt(a),permissionId:Number.parseInt(s)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Select a user below to set permissions for this user"),i.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(P.a,{item:!0,xs:12},i.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var a=parseInt(e.target.value,10);S(a)},value:b},f.map((function(e,a){return i.a.createElement(se.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),i.a.createElement(P.a,{container:!0,item:!0,justify:"center",alignItems:"center"},i.a.createElement(da.a,{"aria-label":"position",name:"position",value:s,onChange:function(e){var a=parseInt(e.target.value,10);u(a)},row:!0},i.a.createElement(fa.a,{value:T,control:i.a.createElement(pa.a,{color:"primary"}),label:"Member",labelPlacement:"bottom"}),i.a.createElement(fa.a,{value:C,control:i.a.createElement(pa.a,{color:"primary"}),label:"Owner",labelPlacement:"bottom"}))))),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:O,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:O,type:"submit",color:"primary"},"Set")))))};var ha=function(e){var a=e.children,t=(Object(A.a)(e,["children"]),i.a.useState(!1)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState([]),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState(""),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useContext(h);function v(){l(!1)}return i.a.useEffect((function(){q("GET","USERS_ALL",{token:g}).then((function(e){var a=e.data;u(a.users)})).catch((function(e){return console.log(e)}))}),[g]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onClick:function(){l(!0)}},a),i.a.createElement(re.a,{open:r,onClose:v,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Remove Users"),i.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var a=parseInt(e.target[0].value,10);q("DELETE","ADMIN_USER_REMOVE",{token:g,uId:Number.parseInt(a)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Select a user below to remove"),i.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(P.a,{item:!0,xs:12},i.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var a=parseInt(e.target.value,10);p(a)},value:f},s.map((function(e){return i.a.createElement(se.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))))),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:v,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:v,type:"submit",color:"primary"},"Remove")))))};function va(){var e=i.a.useState(!1),a=Object(E.a)(e,2),t=a[0],n=a[1],r=i.a.useRef(),l=function(){return n(!1)};return i.a.createElement("div",null,i.a.createElement(F.a,{ref:r,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return n(!0)},color:"inherit"},"Admin"),i.a.createElement(Ea.a,{id:"simple-menu",anchorEl:r.current,keepMounted:!0,open:t,onClose:l},i.a.createElement(ga,null,i.a.createElement(se.a,{onClick:l},"Set User Permissions")),i.a.createElement(ha,null,i.a.createElement(se.a,{onClick:l},"Remove Users")),i.a.createElement(se.a,{onClick:l},"Close")))}function ba(){var e=i.a.useState(!1),a=Object(E.a)(e,2),t=a[0],n=a[1],r=i.a.useState([]),l=Object(E.a)(r,2),c=l[0],o=l[1],s=i.a.useRef(),u=i.a.useContext(h);i.a.useEffect((function(){q("GET","NOTIFICATIONS_GET",{token:u}).then((function(e){var a=e.data;o(a.notifications)})).catch((function(e){return console.log(e)}))}),[t,u]);var m=function(){return n(!1)};return i.a.createElement("div",null,i.a.createElement(F.a,{ref:s,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return n(!0)},color:"inherit"},"Notifications"),i.a.createElement(Ea.a,{id:"simple-menu",anchorEl:s.current,keepMounted:!0,open:t,onClose:m},0===c.length?i.a.createElement("div",null,"\xa0You don't have any notifications.\xa0"):c.map((function(e){return-1===e.dmId?i.a.createElement(se.a,{component:d.b,to:"/channel/".concat(e.channelId)},e.notificationMessage):i.a.createElement(se.a,{component:d.b,to:"/dm/".concat(e.dmId)},e.notificationMessage)})),i.a.createElement(se.a,{onClick:m},"Close")))}var Sa=t(396),Ia=t(398),Oa=t(346),ya=t(347),Ca=t(124),Ta=t(397),Na=t(173),ja=t.n(Na),Aa=["Live","Step"];var ka=function(){var e=i.a.useState(!1),a=Object(E.a)(e,2),t=a[0],n=a[1],r=i.a.useRef(null),l=i.a.useState(ee?0:1),c=Object(E.a)(l,2),o=c[0],s=c[1];B((function(){ee&&X(ae++)}),2e3);var u=function(e,a){ee=!!(0===a),s(a),n(!1)},m=function(e){r.current&&r.current.contains(e.target)||n(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Sa.a,{variant:"contained",color:"primary",ref:r,"aria-label":"split button",style:{marginRight:15}},i.a.createElement(F.a,{onClick:function(){X()},disabled:0===o},Aa[o]),i.a.createElement(F.a,{color:"primary",size:"small","aria-owns":t?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){n((function(e){return!e}))}},i.a.createElement(ja.a,null))),i.a.createElement(Ta.a,{open:t,anchorEl:r.current,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,t=e.placement;return i.a.createElement(Oa.a,Object.assign({},a,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),i.a.createElement(Ca.a,{id:"menu-list-grow"},i.a.createElement(Ia.a,{onClickAway:m},i.a.createElement(ya.a,null,Aa.map((function(e,a){return i.a.createElement(se.a,{key:e,disabled:2===a,selected:a===o,onClick:function(e){return u(0,a)}},e)}))))))})))},Ma=t(190),wa=t(15),Da=t(175),_a=t.n(Da),La=Object(na.a)((function(e){return{search:Object(ta.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(wa.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wa.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto",marginRight:e.spacing(2)}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ta.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));var Ra=Object(f.g)((function(e){var a=La(),t=i.a.useState(""),n=Object(E.a)(t,2),r=n[0],l=n[1];return i.a.createElement("form",{onSubmit:function(){return e.history.push("/search/".concat(r))}},i.a.createElement("div",{className:a.search},i.a.createElement("div",{className:a.searchIcon},i.a.createElement(_a.a,null)),i.a.createElement(Ma.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},value:r,onChange:function(e){return l(e.target.value)}})))})),Pa=t(177),xa=t.n(Pa),Ua=Object(na.a)((function(e){return{appBar:Object(ta.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logoutButton:{float:"right"}}}));var Fa=function(e){var a=e.handleMenuToggle,t=void 0===a?function(){}:a,n=Ua(),r=Object(ia.a)(),l=Object(sa.a)(r.breakpoints.up("sm")),c=i.a.useContext(h),o=i.a.useState(!1),s=Object(E.a)(o,2),u=s[0],m=s[1];return u?(q("POST","AUTH_LOGOUT",{token:c}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),localStorage.removeItem("token"),localStorage.removeItem("uId"),i.a.createElement(f.a,{to:"/login"})):i.a.createElement(ca.a,{position:"fixed",className:n.appBar},i.a.createElement(oa.a,null,!l&&i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,className:n.menuButton},i.a.createElement(ma.a,null)),i.a.createElement(d.b,{to:"/",style:{color:"white",textDecoration:"none"}},i.a.createElement(k.a,{variant:"h5",noWrap:!0},"Memes"))),i.a.createElement("div",{variant:"h6",className:n.title}),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(U.a,null,i.a.createElement(xa.a,null)),i.a.createElement(Ra,null),i.a.createElement(ka,null),i.a.createElement(ba,null),i.a.createElement(va,null),i.a.createElement(F.a,{color:"inherit",className:n.logoutButton,onClick:function(){m(!0)}},"Logout"))))},Ha=t(413),Ga=t(417),Wa=t(401),Va=Object(na.a)((function(e){return{drawer:Object(ta.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),drawerPaper:{width:240},toolbar:Object(v.a)(Object(v.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",paddingLeft:e.spacing(2)})}}));var za=function(e){var a=e.container,t=e.children,n=e.open,r=e.setOpen,l=Va(),c=Object(ia.a)();return i.a.createElement("nav",{className:l.drawer,"aria-label":"channels"},i.a.createElement(Ha.a,{smUp:!0,implementation:"css"},i.a.createElement(Ga.a,{container:a,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:n,onClose:function(){return r(!1)},classes:{paper:l.drawerPaper},ModalProps:{keepMounted:!0}},i.a.createElement("div",{className:l.toolbar}),i.a.createElement(Wa.a,null),t)),i.a.createElement(Ha.a,{xsDown:!0,implementation:"css"},i.a.createElement(Ga.a,{classes:{paper:l.drawerPaper},variant:"permanent",open:!0},i.a.createElement("div",{className:l.toolbar},i.a.createElement(d.b,{to:"/",style:{textDecoration:"none"}},i.a.createElement(k.a,{variant:"h5",noWrap:!0},"Treats"))),t)))};var qa=function(e){var a=e.menu,t=e.body,n=i.a.useState(!1),r=Object(E.a)(n,2),l=r[0],c=r[1];return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Fa,{handleMenuToggle:function(){c((function(e){return!e}))}}),i.a.createElement(za,{open:l,setOpen:c},a),i.a.createElement(la,null,t))},Ba=t(403),Ja=t(76),Ka=t.n(Ja),Ya=t(77),Qa=t.n(Ya),$a=t(402),Xa=t(103),Za=t.n(Xa),et=t(178),at=t.n(et),tt=t(179),nt=t.n(tt);var rt=function(e){var a=Object.assign({},e),t=i.a.useState(!1),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useContext(h);function o(){l(!1)}return i.a.createElement("div",null,i.a.createElement(U.a,{size:"small",onClick:function(){l(!0)}},i.a.createElement(Za.a,null)),i.a.createElement(re.a,{open:r,onClose:o,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Create Channel"),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target[0].value,n=e.target[1].checked;t&&q("POST","CHANNELS_CREATE",{token:c,name:t,isPublic:!n}).then((function(e){console.log(e),a.callback()})).catch((function(e){return console.log(e)}))}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Complete the form below to create a new channel"),i.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(P.a,{item:!0,xs:12},i.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"channelName",label:"Channel Name",name:"channelName",fullWidth:!0})),i.a.createElement(P.a,{container:!0,item:!0,justify:"center",alignItems:"center"},i.a.createElement(at.a,null),i.a.createElement(fa.a,{control:i.a.createElement($a.a,{value:"secret",inputProps:{"aria-label":"Secret"}}),label:"Secret",labelPlacement:"top"}),i.a.createElement(nt.a,null)))),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:o,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:o,type:"submit",color:"primary"},"Create")))))};var lt=function(e){var a=e.channelId,t=i.a.useState([]),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState([]),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useContext(h),f=function(){var e=q("GET","CHANNELS_LIST",{token:m}),a=q("GET","CHANNELS_LISTALL",{token:m});S.a.all([e,a]).then(S.a.spread((function(e,a){var t=e.data.channels,n=a.data.channels.filter((function(e){return void 0===t.find((function(a){return a.channelId===e.channelId}))}));l(t),u(n)})))};return Z(f,[],2),i.a.createElement(i.a.Fragment,null,i.a.createElement(M.a,{subheader:i.a.createElement(w.a,{style:{display:"flex"}},i.a.createElement("span",{style:{flex:1}},"My Channels"),i.a.createElement(rt,{callback:f}))},r.map((function(e,t){var n=e.channelId,r=e.name;return i.a.createElement(D.a,{button:!0,key:n,component:d.b,to:"/channel/".concat(n)},i.a.createElement(Ba.a,null,n==a?i.a.createElement(Ka.a,null):i.a.createElement(Qa.a,null)),i.a.createElement(R.a,{primary:r}))}))),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Other Channels")},s.map((function(e,t){var n=e.channelId,r=e.name;return i.a.createElement(D.a,{button:!0,key:n,component:d.b,to:"/channel/".concat(n)},i.a.createElement(Ba.a,null,n==a?i.a.createElement(Ka.a,null):i.a.createElement(Qa.a,null)),i.a.createElement(R.a,{primary:r}))}))))},ct=t(381),ot={PaperProps:{style:{maxHeight:224,width:250}}};var it=function(e){var a=Object.assign({},e),t=i.a.useState(!1),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState([]),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState([]),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useContext(h),v=K();function b(){l(!1)}return i.a.useEffect((function(){q("GET","USERS_ALL",{token:g}).then((function(e){var a=e.data;p(a.users)})).catch((function(e){return console.log(e)}))}),[g]),i.a.createElement("div",null,i.a.createElement(U.a,{size:"small",onClick:function(){l(!0)}},i.a.createElement(Za.a,null)),i.a.createElement(re.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title"},i.a.createElement(le.a,{id:"form-dialog-title"},"Create Dm"),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q("POST","DM_CREATE",{token:g,uIds:s}).then((function(e){console.log(e),a.callback()})).catch((function(e){return console.log(e)}))}},i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,"Select the users below to create a new dm"),i.a.createElement(ie.a,{multiple:!0,value:s,onChange:function(e){u(e.target.value)},input:i.a.createElement(ct.a,null),MenuProps:ot,style:{width:"100%"}},f.map((function(e){if(v!=e.uId)return i.a.createElement(se.a,{key:e.uId,value:e.uId},e.nameFirst+" "+e.nameLast)})))),i.a.createElement(ue.a,null,i.a.createElement(F.a,{onClick:b,color:"primary"},"Cancel"),i.a.createElement(F.a,{onClick:b,type:"submit",color:"primary"},"Create")))))};var st=function(e){var a=e.dmId,t=i.a.useState([]),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useContext(h),o=function(){q("GET","DM_LIST",{token:c}).then((function(e){var a=e.data;l(a.dms)})).catch((function(e){return console.log(e)}))};return Z(o,[],2),i.a.createElement(i.a.Fragment,null,i.a.createElement(M.a,{subheader:i.a.createElement(w.a,{style:{display:"flex"}},i.a.createElement("span",{style:{flex:1}},"My Dms"),i.a.createElement(it,{callback:o}))},r.map((function(e){var t=e.dmId,n=e.name;return i.a.createElement(D.a,{button:!0,key:t,component:d.b,to:"/dm/".concat(t)},i.a.createElement(Ba.a,null,t==a?i.a.createElement(Ka.a,null):i.a.createElement(Qa.a,null)),i.a.createElement(R.a,{primary:n}))}))))},ut=t(180),mt=t.n(ut);var Et=function(){var e=K(i.a.useContext(h));return i.a.createElement(M.a,null,i.a.createElement(D.a,{button:!0,key:"profile",component:d.b,to:"/profile/".concat(e)},i.a.createElement(Ba.a,null,i.a.createElement(mt.a,null)),i.a.createElement(R.a,{primary:"Profile"})))};var dt=function(e){var a=e.channelId,t=e.dmId;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Et,null),i.a.createElement(lt,{channelId:a}),i.a.createElement(st,{dmId:t}))};var ft=function(e){var a=e.match.params.channelId;return i.a.createElement(qa,{menu:i.a.createElement(dt,{channelId:a,dmId:null}),body:i.a.createElement(aa,{channelId:a})})};var pt=function(e){var a=e.dmId,t=(Object(A.a)(e,["dmId"]),i.a.useState(!0)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState(""),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useState([]),d=Object(E.a)(m,2),f=d[0],p=d[1],g=i.a.useContext(h);function v(){q("GET","DM_DETAILS",{token:g,dmId:a}).then((function(e){var a=e.data,t=a.name,n=a.members;console.log(n),p(n),u(t)})).catch((function(e){console.log(e),p([]),u("")})).finally((function(){return l(!1)}))}return Z(v,[a,g],2),i.a.createElement(i.a.Fragment,null,r?i.a.createElement(ne,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4"},s.toUpperCase()),i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Members")},f.map((function(e){var a=e.uId,t=e.nameFirst,n=e.nameLast,r=e.profileImgUrl;return i.a.createElement(D.a,{key:a},i.a.createElement(_.a,null,i.a.createElement(L.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:r},[t,n].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),i.a.createElement(R.a,{primary:i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{container:!0,alignItems:"center",spacing:1},i.a.createElement(P.a,{item:!0},i.a.createElement(x.a,{href:"/profile/".concat(a)},"".concat(t," ").concat(n)))))}))})),i.a.createElement(D.a,{key:"leave_dm"},i.a.createElement(P.a,{container:!0,spacing:1},i.a.createElement(P.a,{item:!0},i.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,a){q("POST","DM_LEAVE",{token:a,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(a,g)}},"Leave Dm"),"\xa0",i.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,a){q("DELETE","DM_REMOVE",{token:a,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(a,g)}},"Remove Dm"))))),i.a.createElement(De,{dmId:a})))};var gt=function(e){var a=e.match.params.dmId;return i.a.createElement(qa,{menu:i.a.createElement(dt,{channelId:null,dmId:a}),body:i.a.createElement(pt,{dmId:a})})},ht=t(404),vt=t(409),bt=t(69),St=t.n(bt),It=Object(na.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ot=function(e){var a=i.a.useState(!1),t=Object(E.a)(a,2),n=t[0],r=t[1],l=It();return i.a.createElement(ht.a,{component:"main",maxWidth:"sm"},i.a.createElement(vt.a,{boxShadow:3,className:l.card},i.a.createElement(L.a,null,i.a.createElement(St.a,{color:"secondary"})),i.a.createElement(k.a,{component:"h1",variant:"h5"},"Forgot Password"),n?i.a.createElement("div",{style:{marginTop:"64px"}},i.a.createElement(ne,null)):i.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault();var t=a.target[0].value;t&&(r(!0),q("POST","AUTH_PASSWORDRESET_REQUEST",{email:t}).then((function(a){console.log(a),e.history.push("/reset_password")})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)})))}},i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",autoFocus:!0}),i.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Send Recovery Email"),i.a.createElement(P.a,{container:!0},i.a.createElement(P.a,{item:!0},i.a.createElement("br",null),i.a.createElement(x.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},yt=t(104);var Ct=function(){var e=i.a.useContext(h),a=i.a.useState(0),t=Object(E.a)(a,2),n=t[0],r=t[1],l=i.a.useState([]),c=Object(E.a)(l,2),o=c[0],s=c[1],u=i.a.useState([]),m=Object(E.a)(u,2),d=m[0],f=m[1],p=i.a.useState([]),g=Object(E.a)(p,2),v=g[0],b=g[1];return i.a.useEffect((function(){q("GET","USERS_STATS",{token:e}).then((function(e){var a=e.data;console.log(a);var t=a.workspaceStats;r(t.utilizationRate),s(t.channelsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsExist}}))),f(t.dmsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsExist}}))),b(t.messagesExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesExist}})))})).catch((function(e){return console.log(e)}))}),[e]),i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h5"},"Workspace statistics"),i.a.createElement("p",null,"Wow! ",(100*n).toFixed(2),"% utilisation"),i.a.createElement(yt.Scatter,{data:{datasets:[{label:"Channels",data:o,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms",data:d,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages",data:v,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}}}]}}}))};var Tt=function(){return i.a.createElement(qa,{menu:i.a.createElement(dt,null),body:i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4"},"WELCOME"),i.a.createElement("div",{style:{paddingTop:15}},i.a.createElement(k.a,{variant:"body1"},"This is Memes: agile messaging for Software Engineers")),i.a.createElement("br",null),i.a.createElement(Ct,null))})},Nt=t(181),jt=t.n(Nt),At=Object(na.a)((function(e){return{"@global":{},card:{marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var kt=function(e){var a=e.setAuth,t=Object(A.a)(e,["setAuth"]),n=i.a.useState(!1),r=Object(E.a)(n,2),l=r[0],c=r[1],o=At();return i.a.createElement(ht.a,{component:"main",maxWidth:"sm"},i.a.createElement(vt.a,{boxShadow:3,className:o.card},i.a.createElement(L.a,null,i.a.createElement(jt.a,null)),i.a.createElement(k.a,{component:"h1",variant:"h5"},"Login"),l?i.a.createElement("div",{style:{marginTop:"64px"}},i.a.createElement(ne,null)):i.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var n=e.target[0].value,r=e.target[2].value;n&&r&&(c(!0),q("POST","AUTH_LOGIN",{email:n,password:r}).then((function(e){console.log(e);var n=e.data;a(n.token,n.authUserId),t.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)})))}},i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"text",autoFocus:!0}),i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),i.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",i.a.createElement("br",null),"Do not enter any currently used passwords."),i.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),i.a.createElement(P.a,{container:!0,direction:"column",alignItems:"center"},i.a.createElement(P.a,{item:!0},i.a.createElement("br",null),i.a.createElement(x.a,{href:"/register",variant:"body1"},"Don't have an account? Register")),i.a.createElement(P.a,{item:!0},i.a.createElement("br",null),i.a.createElement(x.a,{href:"/forgot_password",variant:"body1"},"Forgot password?"))))))},Mt=t(185),wt=t(183),Dt=t.n(wt),_t=t(182),Lt=t.n(_t);var Rt=function(e){var a=e.editable,t=e.master,n=e.masterValue,r=e.slaves,l=e.slaveValues,c=e.onSave,o=(Object(A.a)(e,["editable","master","masterValue","slaves","slaveValues","onSave"]),i.a.useState(!1)),s=Object(E.a)(o,2),u=s[0],m=s[1],d=i.a.useState(),f=Object(E.a)(d,2),p=f[0],g=f[1],h=i.a.useState(n),v=Object(E.a)(h,2),b=v[0],S=v[1],I=i.a.useState([]),O=Object(E.a)(I,2),y=O[0],C=O[1],T=i.a.useState(l),N=Object(E.a)(T,2),j=N[0],k=N[1];function M(){g(b),C(j),m(!u)}return i.a.useEffect((function(){S(n),k(l)}),[n,l]),i.a.createElement(P.a,{container:!0,spacing:1,alignItems:"flex-end"},r&&r.map((function(e,a){return i.a.createElement(P.a,{item:!0,key:a},e({value:j[a]||"",InputProps:{readOnly:!u},onChange:function(e){return function(e,a){var t=j.map((function(t,n){return n===a?e.target.value:t}));k(t)}(e,a)}}))})),i.a.createElement(P.a,{item:!0},t({value:b||"",InputProps:{readOnly:!u},onChange:function(e){S(e.target.value)}})),a&&i.a.createElement(P.a,{item:!0},a?u?i.a.createElement(i.a.Fragment,null,i.a.createElement(Lt.a,{style:{cursor:"pointer"},onClick:function(){null!=b&&(c&&(j?c.apply(void 0,[b].concat(Object(Mt.a)(j))):c(b)),M())}}),i.a.createElement(Dt.a,{style:{cursor:"pointer"},onClick:function(){S(p),k(y),M()}})):i.a.createElement(pe.a,{style:{cursor:"pointer"},onClick:M}):null))};var Pt=function(){var e=i.a.useContext(h),a=i.a.useState(0),t=Object(E.a)(a,2),n=t[0],r=t[1],l=i.a.useState([]),c=Object(E.a)(l,2),o=c[0],s=c[1],u=i.a.useState([]),m=Object(E.a)(u,2),d=m[0],f=m[1],p=i.a.useState([]),g=Object(E.a)(p,2),v=g[0],b=g[1];return i.a.useEffect((function(){q("GET","USER_STATS",{token:e}).then((function(e){var a=e.data;console.log(a);var t=a.userStats;r(t.involvementRate),s(t.channelsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsJoined}}))),f(t.dmsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsJoined}}))),b(t.messagesSent.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesSent}})))})).catch((function(e){return console.log(e)}))}),[e]),i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h5"},"User statistics"),i.a.createElement("p",null,"Involvement rate: ",(100*n).toFixed(2),"%"),i.a.createElement(yt.Scatter,{data:{datasets:[{label:"Channels joined",data:o,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms joined",data:d,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages sent",data:v,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}}}]}}}))};var xt=function(e){var a=e.profile,t=i.a.useState(!0),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState({}),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useContext(h),d=K();i.a.useEffect((function(){q("GET","USER_PROFILE",{token:m,uId:a}).then((function(e){var a=e.data;console.log(a);var t=a.user;u(t)})).catch((function(e){console.log(e)})).finally((function(){return l(!1)}))}),[a,m]);var f=d.toString()===a;return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4"},"Profile"),r?i.a.createElement(ne,null):i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Profile Details")},i.a.createElement(D.a,{key:"name"},i.a.createElement(Rt,{editable:f,masterValue:s.nameLast,slaveValues:[s.nameFirst],master:function(e){return i.a.createElement(ge.a,Object.assign({label:"Last Name"},e))},slaves:[function(e){return i.a.createElement(ge.a,Object.assign({label:"First Name"},e))}],onSave:function(e,a){q("PUT","USER_PROFILE_SETNAME",{token:m,nameFirst:a,nameLast:e}).then((function(e){var a=e.data;console.log(a)})).catch((function(e){console.log(e)}))}})),i.a.createElement(D.a,{key:"email"},i.a.createElement(Rt,{editable:f,masterValue:s.email,master:function(e){return i.a.createElement(ge.a,Object.assign({label:"Email"},e))},onSave:function(e){q("PUT","USER_PROFILE_SETEMAIL",{token:m,email:e}).then((function(e){var a=e.data;console.log(a)})).catch((function(e){console.log(e)}))}})),i.a.createElement(D.a,{key:"handle"},i.a.createElement(Rt,{editable:f,masterValue:s.handleStr,master:function(e){return i.a.createElement(ge.a,Object.assign({label:"Handle"},e))},onSave:function(e){q("PUT","USER_PROFILE_SETHANDLE",{token:m,handleStr:e}).then((function(e){var a=e.data;console.log(a)})).catch((function(e){return console.log(e)}))}})),i.a.createElement(D.a,{key:"imgUrl"},i.a.createElement(Rt,{editable:f,masterValue:s.profileImgUrl,master:function(e){return i.a.createElement(ge.a,Object.assign({label:"imgUrl,x1,y1,x2,y2"},e))},onSave:function(e){var a=e.split(",");q("POST","USER_PROFILE_UPLOADPHOTO",{token:m,imgUrl:a[0],xStart:Number.parseInt(a[1]),yStart:Number.parseInt(a[2]),xEnd:Number.parseInt(a[3]),yEnd:Number.parseInt(a[4])}).then((function(e){var a=e.data;console.log(a)})).catch((function(e){return console.log(e)}))}})),i.a.createElement("br",null),i.a.createElement("div",null,"NOTE: The final field input is to set a profile image. Please enter the 5 components (image url, xStart, yStart, xEnd, yEnd) separated by commas.")),i.a.createElement("br",null),f&&i.a.createElement(Pt,null))};var Ut=function(e){var a=e.match.params.profile;return i.a.createElement(qa,{menu:i.a.createElement(dt,null),body:i.a.createElement(xt,{profile:a})})},Ft=Object(na.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ht=function(e){var a=e.setAuth,t=Object(A.a)(e,["setAuth"]),n=i.a.useState(!1),r=Object(E.a)(n,2),l=r[0],c=r[1],o=i.a.useState({nameFirst:"",nameLast:"",email:"",password:""}),s=Object(E.a)(o,2),u=s[0],m=s[1],d=function(e){return function(a){m(Object(v.a)(Object(v.a)({},u),{},Object(ta.a)({},e,a.target.value)))}},f=Ft();return i.a.createElement(ht.a,{component:"main",maxWidth:"sm"},i.a.createElement(vt.a,{boxShadow:3,className:f.card},i.a.createElement(L.a,null,i.a.createElement(St.a,{color:"secondary"})),i.a.createElement(k.a,{component:"h1",variant:"h5"},"Register"),l?i.a.createElement("div",{style:{marginTop:"64px"}},i.a.createElement(ne,null)):i.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),u.email&&u.password&&(c(!0),q("POST","AUTH_REGISTER",Object(v.a)({},u)).then((function(e){console.log(e);var n=e.data;a(n.token,n.authUserId),t.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)})))}},i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameFirst",label:"First name",name:"nameFirst",type:"text",autoFocus:!0,value:u.nameFirst,onChange:d("nameFirst")}),i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameLast",label:"Last name",name:"nameLast",type:"text",value:u.nameLast,onChange:d("nameLast")}),i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",value:u.email,onChange:d("email")}),i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u.password,onChange:d("password")}),i.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",i.a.createElement("br",null),"Do not enter any currently used passwords."),i.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign Up"),i.a.createElement(P.a,{container:!0},i.a.createElement(P.a,{item:!0},i.a.createElement("br",null),i.a.createElement(x.a,{href:"/login",variant:"body1"},"Already have an account? Login"))))))},Gt=Object(na.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Wt=function(e){var a=i.a.useState(!1),t=Object(E.a)(a,2),n=t[0],r=t[1],l=Gt();return i.a.createElement(ht.a,{component:"main",maxWidth:"sm"},i.a.createElement(vt.a,{boxShadow:3,className:l.card},i.a.createElement(L.a,null,i.a.createElement(St.a,{color:"secondary"})),i.a.createElement(k.a,{component:"h1",variant:"h5"},"Reset Password"),n?i.a.createElement("div",{style:{marginTop:"64px"}},i.a.createElement(ne,null)):i.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault();var t=a.target[0].value,n=a.target[2].value;t&&n&&(r(!0),q("POST","AUTH_PASSWORDRESET_RESET",{resetCode:t,newPassword:n}).then((function(a){console.log(a),e.history.push("/login")})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)})))}},i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"resetCode",label:"Reset code",name:"resetCode",type:"text",autoFocus:!0}),i.a.createElement(ge.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"newPassword",label:"New Password",name:"newPassword",type:"password"}),i.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Change Password"),i.a.createElement(P.a,{container:!0},i.a.createElement(P.a,{item:!0},i.a.createElement("br",null),i.a.createElement(x.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},Vt=t(405);var zt=function(e){var a=e.queryStr,t=(Object(A.a)(e,["queryStr"]),i.a.useState(!0)),n=Object(E.a)(t,2),r=n[0],l=n[1],c=i.a.useState([]),o=Object(E.a)(c,2),s=o[0],u=o[1],m=i.a.useContext(h);return i.a.useEffect((function(){""!==a&&q("GET","SEARCH",{token:m,queryStr:a}).then((function(e){var a=e.data.messages;("undefined"===typeof a||Array.isArray(a))&&(u(a),l(!1))})).catch((function(e){console.log(e),l(!1)}))}),[m,a]),""===a?i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4",style:{marginBottom:10}},"Search"),i.a.createElement(k.a,{variant:"h6"},"Enter a query in the search bar above")):i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"h4",style:{marginBottom:10}},"Search Results"),r?i.a.createElement(Vt.a,null):0==s.length?i.a.createElement(k.a,{variant:"h6"},"Your search did not return any results"):i.a.createElement(M.a,{subheader:i.a.createElement(w.a,null,"Messages"),style:{width:"100%"}},s.slice().reverse().map((function(e){return i.a.createElement($e,Object.assign({key:e.messageId},e))}))))};var qt=function(e){var a=e.match.params.queryStr,t=void 0===a?"":a;return i.a.createElement(qa,{menu:i.a.createElement(dt,null),body:i.a.createElement(zt,{queryStr:t})})},Bt=t(184);Object(Bt.a)({palette:{mode:"dark"}});var Jt=function(){document.title="UNSW Memes";var e=Object(sa.a)("(prefers-color-scheme: dark)"),a=i.a.useState(localStorage.getItem("token")),t=Object(E.a)(a,2),n=t[0],l=t[1],o=i.a.useState(!1),s=Object(E.a)(o,2),u=(s[0],s[1],i.a.useMemo((function(){return Object(Bt.a)({palette:{type:e?"dark":"light"}})}),[e]));function m(e,a){localStorage.setItem("token",e),localStorage.setItem("uId",a),l(e)}return i.a.createElement(g,{value:n},i.a.createElement(c.a,{theme:u},i.a.createElement(r.a,null),i.a.createElement(d.a,null,i.a.createElement(f.d,null,i.a.createElement(f.b,{exact:!0,path:"/login",render:function(e){return i.a.createElement(kt,Object.assign({},e,{setAuth:m}))}}),i.a.createElement(f.b,{exact:!0,path:"/register",render:function(e){return i.a.createElement(Ht,Object.assign({},e,{setAuth:m}))}}),i.a.createElement(f.b,{exact:!0,path:"/forgot_password",component:Ot}),i.a.createElement(f.b,{exact:!0,path:"/reset_password",component:Wt}),i.a.createElement(j,{exact:!0,path:"/",component:Tt}),i.a.createElement(j,{path:"/profile/:profile",component:Ut}),i.a.createElement(j,{path:"/channel/:channelId",component:ft}),i.a.createElement(j,{path:"/dm/:dmId",component:gt}),i.a.createElement(j,{path:"/search/:queryStr",component:qt}),i.a.createElement(j,{path:"/search",component:qt})))))};t(337),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kt=t(105),Yt=(Kt.a.A400,{primary:{main:"#23368f"},secondary:{main:"#5f93d8"},error:{main:Kt.a.A400},background:{default:"#131516"},color:"#FFFFFF"}),Qt=Object(Bt.a)({palette:Yt});u.a.render(i.a.createElement(c.a,{theme:Qt},i.a.createElement(l.a,{utils:n.a},i.a.createElement(r.a,null),i.a.createElement(Jt,null),i.a.createElement(m.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[213,1,2]]]);
//# sourceMappingURL=main.12f1316e.chunk.js.map