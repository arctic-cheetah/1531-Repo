(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{133:function(e,t,a){},215:function(e,t,a){e.exports=a(340)},339:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n=a(157),r=a(409),l=a(26),c=a(0),o=a.n(c),i=a(13),s=a.n(i),u=a(75),m=(a(220),a(5)),E=a(25),d=a(60),f=(a(133),o.a.createContext()),g=f.Provider,h=(f.Consumer,f),p=a(106),v={type:"light",light:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:p.a.A400},background:{default:"#fff"}},dark:{type:"dark",primary:{main:"#77adf7"},secondary:{main:"#73acfa"},error:{main:p.a.A400},background:{default:"#303030"}}},b=o.a.createContext({isDark:!1,theme:v.light}),S=b.Provider,I=(b.Consumer,a(11)),O=a(24),y=a.n(O);a(237);a(238).config();var C="0",T="https://example.alwaysdata.net";void 0!==window.BACKEND_PORT?(C=window.BACKEND_PORT,T=window.DEPLOYED_URL):C=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BACKEND_PORT;var k="0"===C||void 0===C?T:"http://localhost:"+C,N=1,j=2,A=void 0!==window.ITERATION?parseInt(window.ITERATION):parseInt(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ITERATION);console.log("Using backend at",k),console.log("Running frontend for iteration",A);y.a.defaults.baseURL=k,y.a.defaults.headers.put["Content-Type"]="application/json",y.a.defaults.headers.post["Content-Type"]="application/json",y.a.defaults.headers.delete["Content-Type"]="application/json",y.a.interceptors.request.use((function(e){return e}));y.a.interceptors.response.use((function(e){return"error"in e.data?(u.b.error("An error occured. Try again later"),Promise.reject()):e}),(function(e){return console.error(e),u.b.error(e.response.data.error.message||"An error occured. Try again later"),Promise.reject(Object(I.a)({},e))}));var M=function(e){return o.a.useContext(h)?o.a.createElement(d.b,e):o.a.createElement(d.a,{to:"/login"})},D=a(14),w=a(55),_=a(350),L=a(390),R=a(351),P=a(393),x=a(417),U=a(394),F=a(395),H=a(396),G=a(352),W=a(344),V=a(172),z=a.n(V),q=a(171),B=a.n(q),J=[{},{},{AUTH_LOGIN:"auth/login/v2",AUTH_REGISTER:"auth/register/v2",AUTH_LOGOUT:"auth/logout/v1",CHANNEL_INVITE:"channel/invite/v2",CHANNEL_DETAILS:"channel/details/v2",CHANNEL_MESSAGES:"channel/messages/v2",CHANNEL_JOIN:"channel/join/v2",CHANNEL_ADDOWNER:"channel/addowner/v1",CHANNEL_REMOVEOWNER:"channel/removeowner/v1",CHANNEL_LEAVE:"channel/leave/v1",CHANNELS_LIST:"channels/list/v2",CHANNELS_LISTALL:"channels/listall/v2",CHANNELS_CREATE:"channels/create/v2",MESSAGE_SEND:"message/send/v1",MESSAGE_EDIT:"message/edit/v1",MESSAGE_REMOVE:"message/remove/v1",DM_DETAILS:"dm/details/v1",DM_LIST:"dm/list/v1",DM_CREATE:"dm/create/v1",DM_REMOVE:"dm/remove/v1",DM_LEAVE:"dm/leave/v1",DM_MESSAGES:"dm/messages/v1",MESSAGE_SENDDM:"message/senddm/v1",USER_PROFILE:"user/profile/v2",USER_PROFILE_SETNAME:"user/profile/setname/v1",USER_PROFILE_SETEMAIL:"user/profile/setemail/v1",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v1",USERS_ALL:"users/all/v1",SEARCH:"search/v1",CLEAR:"clear/v1"},{AUTH_LOGIN:"auth/login/v3",AUTH_REGISTER:"auth/register/v3",AUTH_LOGOUT:"auth/logout/v2",CHANNEL_INVITE:"channel/invite/v3",CHANNEL_DETAILS:"channel/details/v3",CHANNEL_MESSAGES:"channel/messages/v3",CHANNEL_JOIN:"channel/join/v3",CHANNEL_ADDOWNER:"channel/addowner/v2",CHANNEL_REMOVEOWNER:"channel/removeowner/v2",CHANNEL_LEAVE:"channel/leave/v2",CHANNELS_LIST:"channels/list/v3",CHANNELS_LISTALL:"channels/listall/v3",CHANNELS_CREATE:"channels/create/v3",MESSAGE_SEND:"message/send/v2",MESSAGE_EDIT:"message/edit/v2",MESSAGE_REMOVE:"message/remove/v2",MESSAGE_SHARE:"message/share/v1",DM_DETAILS:"dm/details/v2",DM_LIST:"dm/list/v2",DM_CREATE:"dm/create/v2",DM_REMOVE:"dm/remove/v2",DM_LEAVE:"dm/leave/v2",DM_MESSAGES:"dm/messages/v2",MESSAGE_SENDDM:"message/senddm/v2",USER_PROFILE:"user/profile/v3",USER_PROFILE_SETNAME:"user/profile/setname/v2",USER_PROFILE_SETEMAIL:"user/profile/setemail/v2",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v2",USERS_ALL:"users/all/v2",SEARCH:"search/v1",ADMIN_USER_REMOVE:"admin/user/remove/v1",ADMIN_USERPERMISSION_CHANGE:"admin/userpermission/change/v1",NOTIFICATIONS_GET:"notifications/get/v1",CLEAR:"clear/v1",STANDUP_START:"standup/start/v1",STANDUP_ACTIVE:"standup/active/v1",STANDUP_SEND:"standup/send/v1",AUTH_PASSWORDRESET_REQUEST:"auth/passwordreset/request/v1",AUTH_PASSWORDRESET_RESET:"auth/passwordreset/reset/v1",USER_STATS:"user/stats/v1",USERS_STATS:"users/stats/v1",USER_PROFILE_UPLOADPHOTO:"user/profile/uploadphoto/v1",MESSAGE_SENDLATER:"message/sendlater/v1",MESSAGE_SENDLATERDM:"message/sendlaterdm/v1",MESSAGE_REACT:"message/react/v1",MESSAGE_UNREACT:"message/unreact/v1",MESSAGE_PIN:"message/pin/v1",MESSAGE_UNPIN:"message/unpin/v1"}],K=function(e,t,a){if(2===A){if(null==J[A][t])return Promise.reject(new Error("Don't worry - this is not part of iteration 2 so this error is expected"));switch(e){case"GET":return y.a.get(J[A][t],{params:a});case"POST":return y.a.post(J[A][t],a);case"PUT":return y.a.put(J[A][t],a);case"DELETE":return y.a.delete(J[A][t],{params:a});default:console.log("yikes")}}else if(3===A){var n=a.token,r=Object(D.a)(a,["token"]);switch(e){case"GET":return y.a.get(J[A][t],{params:r,headers:{token:n}});case"POST":return y.a.post(J[A][t],r,{headers:{token:n}});case"PUT":return y.a.put(J[A][t],r,{headers:{token:n}});case"DELETE":return y.a.delete(J[A][t],{params:r,headers:{token:n}});default:console.log("yikes")}}};function Y(e,t){var a=Object(c.useRef)();Object(c.useEffect)((function(){a.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}var Q=function(e,t){return parseInt(e,10)===parseInt(t,10)};function $(e){var t=localStorage.getItem("uId");return null==t&&(t=-1),t}var X=[],Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===X.find((function(t){return t.subscriber===e}))&&X.push({subscriber:e,interval:t})},ee=function(e){return X=X.filter((function(t){return t.subscriber!==e}))},te=function(e){X.forEach((function(t){e&&e%t.interval!==0||t.subscriber()}))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e&&"function"===typeof e;return o.a.useEffect((function(){if(n)return e(),Z(e,a),function(){return ee(e)}}),t),te},ne=!1,re=0,le=a(377);var ce=function(){return o.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}},o.a.createElement(le.a,null))},oe=a(379),ie=a(380),se=a(381),ue=a(382),me=a(413),Ee=a(385),de=a(386);var fe=function(e){var t=e.channelId,a=(Object(D.a)(e,["channelId"]),o.a.useState(!1)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState(""),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useContext(h),v=ae();function b(){l(!1)}return o.a.useEffect((function(){K("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[p]),o.a.createElement("div",null,o.a.createElement(W.a,{variant:"outlined",color:"primary",onClick:function(){l(!0)}},"Invite Member"),o.a.createElement(oe.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Invite User"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!=s&&K("POST","CHANNEL_INVITE",{token:p,uId:s,channelId:Number.parseInt(t)}).then((function(e){console.log(e),v()})).catch((function(e){return console.log(e)}))}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Select a user below to invite them to this channel"),o.a.createElement(me.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);u(t)},value:s},f.map((function(e,t){return o.a.createElement(Ee.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:b,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:b,type:"submit",color:"primary"},"Invite")))))},ge=a(163),he=a.n(ge),pe=a(101),ve=a.n(pe),be=a(412),Se=a(389),Ie=a(166),Oe=a.n(Ie),ye=a(165),Ce=a.n(ye),Te=a(164),ke=a.n(Te),Ne=a(353),je=a(410);var Ae=function(e){var t=e.open,a=e.handleClose,n=e.onTimerChange,r=(Object(D.a)(e,["open","handleClose","onTimerChange"]),o.a.useState(new Date)),l=Object(m.a)(r,2),c=l[0],i=l[1];return o.a.createElement("div",null,o.a.createElement(oe.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Send later"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(c)}},o.a.createElement(se.a,null,o.a.createElement(je.a,{margin:"normal",id:"time-picker",label:"Time picker",value:c,onChange:function(e){return i(e.toDate())},KeyboardButtonProps:{"aria-label":"change time"}}),o.a.createElement(ue.a,null,"Enter a time to send")),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:a,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:a,type:"submit",color:"primary"},"Set Time")))))},Me=a(71),De=Object(Ne.a)((function(e){return{flex:{display:"flex",flexDirection:"row",alignItems:"center"},input:{margin:e.spacing(1),marginRight:0},button:{margin:e.spacing(1),marginLeft:0,alignSelf:"stretch"},rightIcon:{marginLeft:e.spacing(1)},standupTimer:{margin:e.spacing(2)}}}));var we=function(e){var t=e.channelId,a=void 0===t?-1:t,n=e.dmId,r=void 0===n?-1:n,l=De(),c=o.a.useState(""),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState(-1),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState(!1),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useState(!1),O=Object(m.a)(I,2),y=O[0],C=O[1],T=o.a.useContext(h),k=o.a.useContext(nt),N=o.a.useContext(_e);k=k||function(){},N=N||function(){};var j=-1!==f,A=o.a.useState(),M=Object(m.a)(A,2),D=M[0],_=M[1],L=o.a.useState(),R=Object(m.a)(L,2),P=R[0],x=R[1],U=function(){var e=s.trim();if(e)if(u(""),-1===r&&D&&D>0)K("POST","STANDUP_SEND",{token:T,channelId:Number.parseInt(a),message:e}).then((function(e){var t=e.data;console.log(t),k()})).catch((function(e){return console.log(e)}));else{if(j)return-1===r?K("POST","MESSAGE_SENDLATER",{token:T,channelId:Number.parseInt(a),message:e,timeSent:f.getTime()/1e3}).then((function(e){var t=e.data;return console.log(t)})).catch((function(e){return console.log(e)})):K("POST","MESSAGE_SENDLATERDM",{token:T,dmId:Number.parseInt(r),message:e,timeSent:f.getTime()/1e3}).then((function(e){var t=e.data;return console.log(t)})).catch((function(e){return console.log(e)})),void g(-1);if(-1===r&&e.startsWith("/standup")){var t=e.match(/\/standup\s+([1-9][0-9]*)/);if(!t||t.length<2)alert("Usage: /standup <duration in seconds>");else{var n=parseInt(t[1],10);isNaN(n)||!Number.isInteger(n)?alert("Usage: /standup <duration in seconds>"):K("POST","STANDUP_START",{token:T,channelId:Number.parseInt(a),length:n}).then((function(e){var t=e.data.timeFinish;x(t),alert("You've started a standup for ".concat(n," seconds"))})).catch((function(e){return console.log(e)}))}}else-1===r?K("POST","MESSAGE_SEND",{token:T,channelId:Number.parseInt(a),message:e}).then((function(e){var t=e.data;console.log(t),k()})).catch((function(e){return console.log(e)})):K("POST","MESSAGE_SENDDM",{token:T,dmId:Number.parseInt(r),message:e}).then((function(e){var t=e.data;console.log(t),N()})).catch((function(e){return console.log(e)}))}};Y((function(){P>Date.now()/1e3?_((function(){return Math.round(P-Math.round(Date.now()/1e3))})):_()}),1e3);var F=function(){-1!==a&&K("GET","STANDUP_ACTIVE",{token:T,channelId:a}).then((function(e){var t=e.data,a=t.isActive,n=void 0!==a&&a,r=t.timeFinish;n&&r?x(r):(_(0),x(-1))})).catch((function(e){return console.log(e)}))};return ae(F,[s]),o.a.useEffect(F,[a]),o.a.createElement(o.a.Fragment,null,D>0&&o.a.createElement(w.a,{variant:"caption",className:l.standupTimer},"STANDUP ACTIVE: ".concat(D," seconds remaining")),o.a.createElement("div",{className:l.flex},o.a.createElement(be.a,{className:l.input,label:"Send a message \ud83d\udcac",multiline:!0,placeholder:"...",fullWidth:!0,margin:"normal",variant:"filled",onKeyDown:function(e){"Enter"!==e.key||e.getModifierState("Shift")||(e.preventDefault(),U())},value:s,onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:o.a.createElement(Se.a,{position:"end"},o.a.createElement(G.a,null,o.a.createElement(ke.a,{onClick:function(){C(!y)}})),o.a.createElement(G.a,{"aria-label":"toggle visibility",disabled:D>0,onClick:function(){return j?g(-1):S(!0)}},o.a.createElement(Ce.a,{color:j?"secondary":void 0})))}}),y&&o.a.createElement(Me.b,{emojiStyle:Me.a.FACEBOOK,onEmojiClick:function(e){u(s+e.emoji)},autoFocusSearch:!1,width:270,height:350,previewConfig:{showPreview:!1},skinTonesDisabled:!0}),o.a.createElement(W.a,{className:l.button,variant:"contained",color:"primary",onClick:U},"Send",o.a.createElement(Oe.a,{className:l.rightIcon}))),o.a.createElement(Ae,{open:b,handleClose:function(){return S(!1)},onTimerChange:g}))},_e=o.a.createContext(),Le=_e.Provider;_e.Consumer;var Re=function(e){var t=e.dmId,a=void 0===t?"":t,n=o.a.useState([]),r=Object(m.a)(n,2),l=r[0],c=r[1],i=o.a.useState({dmId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(m.a)(i,2),u=s[0],E=s[1],d=o.a.useContext(h),f=function(){var e=u.dmId===a?u:{dmId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};K("GET","DM_MESSAGES",{token:d,dmId:Number.parseInt(a),start:e.isPaginating?e.currentStart:0}).then((function(t){var n=t.data,r=n.messages,l=n.end;E(Object(I.a)(Object(I.a)({},e),{},{dmId:a,currentEnd:l})),c(r)})).catch((function(e){return console.log(e)}))};ae(f,[a,u.currentStart]);var g=u.currentStart,p=u.currentEnd,v=u.sliceStart,b=u.isPaginating,S=-1==p&&v>=l.length-10,O=l.filter((function(e){return e.isPinned})),y=l.length?"Messages [".concat(g+v+1,"...").concat(Math.min(g+l.length,g+v+10),"]"):"Messages (None)";return o.a.createElement(Le,{value:f},O.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Pinned Messages")},O.map((function(e){return o.a.createElement(at,Object.assign({key:e.messageId},e))})))),o.a.createElement("hr",null),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,y),style:{width:"100%"}},!S&&o.a.createElement(R.a,null,o.a.createElement(W.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=e.currentEnd,r=Object(D.a)(e,["sliceStart","currentStart","currentEnd"]);return t+10<l.length?Object(I.a)(Object(I.a)({},r),{},{currentStart:a,currentEnd:n,sliceStart:t+10,isPaginating:!0}):Object(I.a)(Object(I.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),l.slice(v,v+10).reverse().map((function(e){return o.a.createElement(at,Object.assign({key:e.messageId},e))})),b&&o.a.createElement(R.a,null,o.a.createElement(W.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=Object(D.a)(e,["sliceStart","currentStart"]);return t>=10?Object(I.a)(Object(I.a)({},n),{},{currentStart:a,sliceStart:t-10,isPaginating:!(0==a&&10==t)}):a>=50&&a?Object(I.a)(Object(I.a)({},n),{},{currentStart:a-50,sliceStart:40}):Object(I.a)(Object(I.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),o.a.createElement(we,{dmId:a}))};var Pe=function(e){var t=e.messageId,a=e.disabled,n=void 0!==a&&a,r=o.a.useContext(h),l=o.a.useContext(nt),c=o.a.useContext(_e);return l=l||function(){},c=c||function(){},o.a.createElement(G.a,{disabled:n,onClick:function(){var e=prompt();null!==e&&(""!==e?K("PUT","MESSAGE_EDIT",{token:r,messageId:Number.parseInt(t),message:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):K("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(t)}).then((function(){l(),c()})).catch((function(e){return console.log(e)})))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},o.a.createElement(ve.a,{fontSize:"small"}))},xe=a(391),Ue=a(123),Fe=a(122),He=a.n(Fe);var Ge=Object(xe.a)((function(e){var t=e.messageId,a=e.isPinned,n=void 0!==a&&a,r=e.theme,l=o.a.useState(n),c=Object(m.a)(l,2),i=c[0],s=c[1];o.a.useEffect((function(){return s(n)}),[n]);var u=o.a.useContext(h),E=o.a.useContext(nt),d=o.a.useContext(_e);return E=E||function(){},d=d||function(){},o.a.createElement(G.a,{onClick:function(){i?K("POST","MESSAGE_UNPIN",{token:u,messageId:Number.parseInt(t)}).then((function(){E(),d()})).catch((function(e){return console.log(e)})):K("POST","MESSAGE_PIN",{token:u,messageId:Number.parseInt(t)}).then((function(){E(),d()})).catch((function(e){return console.log(e)}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},i?o.a.createElement(He.a,{path:Ue.a,size:"1em",color:r&&r.palette.action.active}):o.a.createElement(He.a,{path:Ue.b,size:"1em",color:r&&r.palette.action.active}))})),We=a(392),Ve=a(168),ze=a.n(Ve),qe=a(167),Be=a.n(qe);function Je(e){return e.reactions.map((function(e){var t=String.fromCodePoint(e.reactId),a=0===e.uIds.length?"No reactions, react to this message!":e.usersReacted.reduce((function(e,t){return e+"\n"+t.handleStr}),"".concat(t," by:"));return 0===e.uIds.length?null:o.a.createElement("div",{style:{fontSize:10},title:a},"".concat(e.uIds.length).concat(t))}))}var Ke=a(186);var Ye=function(e){var t=e.messageId,a=e.reacts,n=void 0===a?[]:a,r=o.a.useContext(h),l=o.a.useContext(nt),c=o.a.useContext(_e),i=o.a.useState([]),s=Object(m.a)(i,2),u=s[0],E=s[1],d=o.a.useState(!1),f=Object(m.a)(d,2),g=f[0],p=f[1],v=o.a.useRef<HTMLDivElement>null,b=0;n.forEach((function(e){b+=e.uIds.length,e.usersReacted=u.filter((function(t){return e.uIds.find((function(e){return e===t.uId}))}))})),console.log(n);var S=function(){p(!g)};o.a.useEffect((function(){K("GET","USERS_ALL",{token:r}).then((function(e){var t=e.data;E(t.users)})).catch((function(e){return console.log(e)}))}),[r]),l=l||function(){},c=c||function(){};var I=function(e){var a=n.find((function(t){return t.reactId===e}));void 0===a?K("POST","MESSAGE_REACT",{token:r,messageId:Number.parseInt(t),reactId:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):!0===a.isThisUserReacted?K("POST","MESSAGE_UNREACT",{token:r,messageId:Number.parseInt(t),reactId:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):K("POST","MESSAGE_REACT",{token:r,messageId:Number.parseInt(t),reactId:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{style:{zIndex:11},className:"target",ref:v},g&&o.a.createElement(G.a,null,o.a.createElement(Be.a,{onClick:S})),g&&o.a.createElement(Me.b,{emojiStyle:Me.a.FACEBOOK,onEmojiClick:function(e){var t=e.emoji.codePointAt();I(t)},autoFocusSearch:!1,width:270,height:300,previewConfig:{showPreview:!1},skinTonesDisabled:!0})),o.a.createElement(Ke.a,{target:v,draggable:!0,throttleDrag:1,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,onDrag:function(e){e.target.style.transform=e.transform}})),o.a.createElement(We.a,{anchorOrigin:{horizontal:"right",vertical:"bottom"},badgeContent:b,color:"secondary",style:{zIndex:10}},o.a.createElement(G.a,{onClick:function(){S()},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},o.a.createElement(ze.a,{fontSize:"small"})),n.length>0?o.a.createElement(Je,{reactions:n}):null))},Qe=a(169),$e=a.n(Qe);var Xe=function(e){var t=e.messageId,a=e.disabled,n=void 0!==a&&a,r=o.a.useContext(h),l=o.a.useContext(nt),c=o.a.useContext(_e);return l=l||function(){},c=c||function(){},o.a.createElement(G.a,{disabled:n,onClick:function(){K("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(t)}).then((function(){l(),c()}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},o.a.createElement($e.a,{fontSize:"small"}))},Ze=a(170),et=a.n(Ze);var tt=function(e){var t=e.ogMessageId,a=(Object(D.a)(e,["ogMessageId"]),o.a.useState(!1)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState(-1),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState(-1),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState(""),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useState([]),O=Object(m.a)(I,2),y=O[0],C=O[1],T=o.a.useState([]),k=Object(m.a)(T,2),N=k[0],j=k[1],A=o.a.useState(""),M=Object(m.a)(A,2),w=M[0],_=M[1],L=o.a.useContext(h),R=ae();function P(){l(!1)}return o.a.useEffect((function(){K("GET","CHANNELS_LIST",{token:L}).then((function(e){var t=e.data;C(t.channels)})).catch((function(e){return console.log(e)})),K("GET","DM_LIST",{token:L}).then((function(e){var t=e.data;j(t.dms)})).catch((function(e){return console.log(e)}))}),[L]),o.a.createElement("div",null,o.a.createElement(G.a,{onClick:function(){l(!0)},style:{margin:1},size:"small",edge:"end","aria-label":"share"},o.a.createElement(et.a,{fontSize:"small"})),o.a.createElement(oe.a,{open:r,onClose:P,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Share message"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),K("POST","MESSAGE_SHARE",{token:L,ogMessageId:Number.parseInt(t),message:w,channelId:Number.parseInt(s),dmId:Number.parseInt(f)}).then((function(e){console.log(e),R()})).catch((function(e){return console.log(e)}))}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Enter a channel below to share the message to"),o.a.createElement(me.a,{style:{width:"100%"},id:"u_id",onChange:function(e){S(e.target.value),"d"===e.target.value.slice(0,1)?(g(e.target.value.slice(1)),u(-1)):(u(e.target.value.slice(1)),g(-1))},value:b},y.map((function(e){return o.a.createElement(Ee.a,{key:e.channelId,value:"c".concat(e.channelId)},e.name)})),N.map((function(e){return o.a.createElement(Ee.a,{key:e.dmId,value:"d".concat(e.dmId)},e.name)}))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ue.a,null,"Optionally, enter an additional message"),o.a.createElement(be.a,{multiline:!0,fullWidth:!0,rowsMax:4,value:w,onChange:function(e){_(e.target.value)}})),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:P,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:P,type:"submit",color:"primary"},"Share")))))};var at=function(e){var t=e.messageId,a=e.message,n=void 0===a?"":a,r=e.uId,l=e.timeSent,c=e.isPinned,i=void 0!==c&&c,s=e.reacts,u=void 0===s?[]:s,E=o.a.useState(),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState(),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useState(),O=Object(m.a)(I,2),y=O[0],C=O[1],T=o.a.useContext(h),k=[f,b].filter((function(e){return null!=e&&""!==e})).join(" "),N=[f,b].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join("");return o.a.useEffect((function(){g(),S(),C(),K("GET","USER_PROFILE",{token:T,uId:r}).then((function(e){var t=e.data.user,a=t.nameFirst,n=void 0===a?"":a,r=t.nameLast,l=void 0===r?"":r,c=t.profileImgUrl,o=void 0===c?"":c;g(n),S(l),C("".concat(o))})).catch((function(e){return console.log(e)}))}),[t,T,r]),o.a.createElement(R.a,{key:t,style:{width:"100%"}},n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,null,o.a.createElement(x.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:y},N)),o.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"}},o.a.createElement(U.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,k),o.a.createElement("span",{style:{paddingLeft:10,fontSize:10}},he()(1e3*l))),secondary:o.a.createElement("div",null,o.a.createElement("pre",{style:{fontFamily:"inherit"}},n))}),o.a.createElement("div",{style:{display:"flex",height:30,marginLeft:20}},o.a.createElement(Ye,{messageId:t,reacts:u,uId:r}),o.a.createElement(Ge,{messageId:t,isPinned:i}),o.a.createElement(tt,{ogMessageId:t}),o.a.createElement(Pe,{messageId:t}),o.a.createElement(Xe,{messageId:t})))))},nt=o.a.createContext(),rt=nt.Provider;nt.Consumer;var lt=function(e){var t=e.channelId,a=void 0===t?"":t,n=o.a.useState([]),r=Object(m.a)(n,2),l=r[0],c=r[1],i=o.a.useState({channelId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(m.a)(i,2),u=s[0],E=s[1],d=o.a.useContext(h),f=function(){var e=u.channelId===a?u:{channelId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};K("GET","CHANNEL_MESSAGES",{token:d,channelId:Number.parseInt(a),start:e.isPaginating?e.currentStart:0}).then((function(t){var n=t.data,r=n.messages,l=n.end;E(Object(I.a)(Object(I.a)({},e),{},{channelId:a,currentEnd:l})),c(r)})).catch((function(e){return console.log(e)}))};ae(f,[a,u.currentStart]);var g=u.currentStart,p=u.currentEnd,v=u.sliceStart,b=u.isPaginating,S=-1==p&&v>=l.length-10,O=l.filter((function(e){return e.isPinned})),y=l.length?"Messages [".concat(g+v+1,"...").concat(Math.min(g+l.length,g+v+10),"]"):"Messages (None)";return o.a.createElement(rt,{value:f},O.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Pinned Messages")},O.map((function(e){return o.a.createElement(at,Object.assign({key:e.messageId},e))})))),o.a.createElement("hr",null),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,y),style:{width:"100%"}},!S&&o.a.createElement(R.a,null,o.a.createElement(W.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=e.currentEnd,r=Object(D.a)(e,["sliceStart","currentStart","currentEnd"]);return t+10<l.length?Object(I.a)(Object(I.a)({},r),{},{currentStart:a,currentEnd:n,sliceStart:t+10,isPaginating:!0}):Object(I.a)(Object(I.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),l.slice(v,v+10).reverse().map((function(e){return o.a.createElement(at,Object.assign({key:e.messageId},e))})),b&&o.a.createElement(R.a,null,o.a.createElement(W.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=Object(D.a)(e,["sliceStart","currentStart"]);return t>=10?Object(I.a)(Object(I.a)({},n),{},{currentStart:a,sliceStart:t-10,isPaginating:!(0==a&&10==t)}):a>=50&&a?Object(I.a)(Object(I.a)({},n),{},{currentStart:a-50,sliceStart:40}):Object(I.a)(Object(I.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),o.a.createElement(we,{channelId:a}))};var ct=function(e){var t=e.channelId,a=(Object(D.a)(e,["channelId"]),o.a.useState(!0)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState(""),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState([]),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useContext(h),O=$();function y(){K("GET","CHANNEL_DETAILS",{token:I,channelId:t}).then((function(e){var t=e.data,a=t.name,n=t.ownerMembers,r=t.allMembers;g(r),S(n),u(a)})).catch((function(e){console.log(e),g([]),S([]),u("")})).finally((function(){return l(!1)}))}function C(e){return void 0!==e.find((function(e){return Q(e.uId,O)}))}function T(e,t){return void 0!==e.find((function(e){return Q(e.uId,t)}))}ae(y,[t,I],2);var k=C(f);return o.a.createElement(o.a.Fragment,null,r?o.a.createElement(ce,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4"},s.toUpperCase()),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Members")},f.map((function(e){var a=e.uId,n=e.nameFirst,r=e.nameLast,l=e.profileImgUrl;return o.a.createElement(R.a,{key:a},o.a.createElement(P.a,null,o.a.createElement(x.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:l},[n,r].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),o.a.createElement(U.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{container:!0,alignItems:"center",spacing:1},o.a.createElement(F.a,{item:!0},o.a.createElement(H.a,{href:"/profile/".concat(a)},"".concat(n," ").concat(r)),"".concat(T(b,a)?" \u2b50":" ")),o.a.createElement(F.a,{item:!0},T(b,a)?o.a.createElement(G.a,{size:"small",onClick:function(){return function(e){K("POST","CHANNEL_REMOVEOWNER",{token:I,channelId:Number.parseInt(t),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a)}},o.a.createElement(B.a,null)):o.a.createElement(G.a,{size:"small",onClick:function(){return function(e){K("POST","CHANNEL_ADDOWNER",{token:I,channelId:Number.parseInt(t),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a)}},o.a.createElement(z.a,null)))))}))})),o.a.createElement(R.a,{key:"invite_member"},C(f)?o.a.createElement(F.a,{container:!0,spacing:1},o.a.createElement(F.a,{item:!0},o.a.createElement(fe,{channelId:t})),o.a.createElement(F.a,{item:!0},o.a.createElement(W.a,{variant:"outlined",onClick:function(){return function(e,t){K("POST","CHANNEL_LEAVE",{token:t,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t,I)}},"Leave Channel"))):o.a.createElement(W.a,{variant:"outlined",color:"primary",onClick:function(){return function(e,t){K("POST","CHANNEL_JOIN",{token:t,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t,I)}},"Join Channel"))),k&&o.a.createElement(lt,{channelId:t})))},ot=a(27),it=a(387),st=Object(it.a)((function(e){var t;return{body:(t={},Object(ot.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),Object(ot.a)(t,"padding",20),t),toolbar:e.mixins.toolbar}}));var ut=function(e){var t=e.children,a=st();return o.a.createElement("div",{className:a.body},o.a.createElement("div",{className:a.toolbar}),t)},mt=a(402),Et=a(388),dt=a(22),ft=a(401),gt=a(178),ht=a.n(gt),pt=a(162),vt=a(418),bt=a(397),St=a(414);var It=function(e){var t=e.children,a=(Object(D.a)(e,["children"]),o.a.useState(!1)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState(j),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState(""),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useContext(h);function O(){l(!1)}return o.a.useEffect((function(){K("GET","USERS_ALL",{token:I}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[I]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(){l(!0)}},t),o.a.createElement(oe.a,{open:r,onClose:O,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Set User Permissions"),o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var t=parseInt(e.target[0].value,10);K("POST","ADMIN_USERPERMISSION_CHANGE",{token:I,uId:Number.parseInt(t),permissionId:Number.parseInt(s)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Select a user below to set permissions for this user"),o.a.createElement(F.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(me.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);S(t)},value:b},f.map((function(e,t){return o.a.createElement(Ee.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),o.a.createElement(F.a,{container:!0,item:!0,justify:"center",alignItems:"center"},o.a.createElement(vt.a,{"aria-label":"position",name:"position",value:s,onChange:function(e){var t=parseInt(e.target.value,10);u(t)},row:!0},o.a.createElement(bt.a,{value:j,control:o.a.createElement(St.a,{color:"primary"}),label:"Member",labelPlacement:"bottom"}),o.a.createElement(bt.a,{value:N,control:o.a.createElement(St.a,{color:"primary"}),label:"Owner",labelPlacement:"bottom"}))))),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:O,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:O,type:"submit",color:"primary"},"Set")))))};var Ot=function(e){var t=e.children,a=(Object(D.a)(e,["children"]),o.a.useState(!1)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState([]),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState(""),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useContext(h);function v(){l(!1)}return o.a.useEffect((function(){K("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;u(t.users)})).catch((function(e){return console.log(e)}))}),[p]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(){l(!0)}},t),o.a.createElement(oe.a,{open:r,onClose:v,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Remove Users"),o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var t=parseInt(e.target[0].value,10);K("DELETE","ADMIN_USER_REMOVE",{token:p,uId:Number.parseInt(t)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Select a user below to remove"),o.a.createElement(F.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(me.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);g(t)},value:f},s.map((function(e){return o.a.createElement(Ee.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))))),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:v,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:v,type:"submit",color:"primary"},"Remove")))))};function yt(){var e=o.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],r=o.a.useRef(),l=function(){return n(!1)};return o.a.createElement("div",null,o.a.createElement(W.a,{ref:r,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return n(!0)},color:"inherit"},"Admin"),o.a.createElement(pt.a,{id:"simple-menu",anchorEl:r.current,keepMounted:!0,open:a,onClose:l},o.a.createElement(It,null,o.a.createElement(Ee.a,{onClick:l},"Set User Permissions")),o.a.createElement(Ot,null,o.a.createElement(Ee.a,{onClick:l},"Remove Users")),o.a.createElement(Ee.a,{onClick:l},"Close")))}function Ct(){var e=o.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],r=o.a.useState([]),l=Object(m.a)(r,2),c=l[0],i=l[1],s=o.a.useRef(),u=o.a.useContext(h);o.a.useEffect((function(){K("GET","NOTIFICATIONS_GET",{token:u}).then((function(e){var t=e.data;i(t.notifications)})).catch((function(e){return console.log(e)}))}),[a,u]);var d=function(){return n(!1)};return o.a.createElement("div",null,o.a.createElement(W.a,{ref:s,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return n(!0)},color:"inherit"},"Notifications"),o.a.createElement(pt.a,{id:"simple-menu",anchorEl:s.current,keepMounted:!0,open:a,onClose:d},0===c.length?o.a.createElement("div",null,"\xa0You don't have any notifications.\xa0"):c.map((function(e){return-1===e.dmId?o.a.createElement(Ee.a,{component:E.b,to:"/channel/".concat(e.channelId)},e.notificationMessage):o.a.createElement(Ee.a,{component:E.b,to:"/dm/".concat(e.dmId)},e.notificationMessage)})),o.a.createElement(Ee.a,{onClick:d},"Close")))}var Tt=a(398),kt=a(400),Nt=a(348),jt=a(349),At=a(124),Mt=a(399),Dt=a(173),wt=a.n(Dt),_t=["Live","Step"];var Lt=function(){var e=o.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],r=o.a.useRef(null),l=o.a.useState(ne?0:1),c=Object(m.a)(l,2),i=c[0],s=c[1];Y((function(){ne&&te(re++)}),2e3);var u=function(e,t){ne=!!(0===t),s(t),n(!1)},E=function(e){r.current&&r.current.contains(e.target)||n(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Tt.a,{variant:"contained",color:"primary",ref:r,"aria-label":"split button",style:{marginRight:15}},o.a.createElement(W.a,{onClick:function(){te()},disabled:0===i},_t[i]),o.a.createElement(W.a,{color:"primary",size:"small","aria-owns":a?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){n((function(e){return!e}))}},o.a.createElement(wt.a,null))),o.a.createElement(Mt.a,{open:a,anchorEl:r.current,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return o.a.createElement(Nt.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),o.a.createElement(At.a,{id:"menu-list-grow"},o.a.createElement(kt.a,{onClickAway:E},o.a.createElement(jt.a,null,_t.map((function(e,t){return o.a.createElement(Ee.a,{key:e,disabled:2===t,selected:t===i,onClick:function(e){return u(0,t)}},e)}))))))})))},Rt=a(192),Pt=a(15),xt=a(175),Ut=a.n(xt),Ft=Object(it.a)((function(e){return{search:Object(ot.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Pt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Pt.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto",marginRight:e.spacing(2)}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ot.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));var Ht=Object(d.g)((function(e){var t=Ft(),a=o.a.useState(""),n=Object(m.a)(a,2),r=n[0],l=n[1];return o.a.createElement("form",{onSubmit:function(){return e.history.push("/search/".concat(r))}},o.a.createElement("div",{className:t.search},o.a.createElement("div",{className:t.searchIcon},o.a.createElement(Ut.a,null)),o.a.createElement(Rt.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:r,onChange:function(e){return l(e.target.value)}})))})),Gt=a(176),Wt=a.n(Gt),Vt=a(177),zt=a.n(Vt);function qt(){var e=Object(c.useContext)(b);return o.a.createElement(W.a,{onClick:e.switchTheme},e.isDark?o.a.createElement(zt.a,null):o.a.createElement(Wt.a,null))}var Bt=Object(it.a)((function(e){return{appBar:Object(ot.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logoutButton:{float:"right"}}}));var Jt=function(e){var t=e.handleMenuToggle,a=void 0===t?function(){}:t,n=Bt(),r=Object(dt.a)(),l=Object(ft.a)(r.breakpoints.up("sm")),c=o.a.useContext(h),i=o.a.useState(!1),s=Object(m.a)(i,2),u=s[0],f=s[1];return u?(K("POST","AUTH_LOGOUT",{token:c}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),localStorage.removeItem("token"),localStorage.removeItem("uId"),o.a.createElement(d.a,{to:"/login"})):o.a.createElement(mt.a,{position:"fixed",className:n.appBar},o.a.createElement(Et.a,null,!l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:a,className:n.menuButton},o.a.createElement(ht.a,null)),o.a.createElement(E.b,{to:"/",style:{color:"white",textDecoration:"none"}},o.a.createElement(w.a,{variant:"h5",noWrap:!0},"Memes"))),o.a.createElement("div",{variant:"h6",className:n.title}),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(qt,null),o.a.createElement(Ht,null),o.a.createElement(Lt,null),o.a.createElement(Ct,null),o.a.createElement(yt,null),o.a.createElement(W.a,{color:"inherit",className:n.logoutButton,onClick:function(){f(!0)}},"Logout"))))},Kt=a(415),Yt=a(419),Qt=a(403),$t=Object(it.a)((function(e){return{drawer:Object(ot.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),drawerPaper:{width:240},toolbar:Object(I.a)(Object(I.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",paddingLeft:e.spacing(2)})}}));var Xt=function(e){var t=e.container,a=e.children,n=e.open,r=e.setOpen,l=Object(c.useContext)(b),i=$t(),s=Object(dt.a)(),u=l.isDark?"#FFFFFF":"#000000";return o.a.createElement("nav",{className:i.drawer,"aria-label":"channels"},o.a.createElement(Kt.a,{smUp:!0,implementation:"css"},o.a.createElement(Yt.a,{container:t,variant:"temporary",anchor:"rtl"===s.direction?"right":"left",open:n,onClose:function(){return r(!1)},classes:{paper:i.drawerPaper},ModalProps:{keepMounted:!0}},o.a.createElement("div",{className:i.toolbar}),o.a.createElement(Qt.a,null),a)),o.a.createElement(Kt.a,{xsDown:!0,implementation:"css"},o.a.createElement(Yt.a,{classes:{paper:i.drawerPaper},variant:"permanent",open:!0},o.a.createElement("div",{className:i.toolbar},o.a.createElement(E.b,{to:"/",style:{color:u,textDecoration:"none"}},o.a.createElement(w.a,{variant:"h5",noWrap:!0},"1531-MEME"))),a)))};var Zt=function(e){var t=e.menu,a=e.body,n=o.a.useState(!1),r=Object(m.a)(n,2),l=r[0],c=r[1];return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Jt,{handleMenuToggle:function(){c((function(e){return!e}))}}),o.a.createElement(Xt,{open:l,setOpen:c},t),o.a.createElement(ut,null,a))},ea=a(405),ta=a(77),aa=a.n(ta),na=a(78),ra=a.n(na),la=a(404),ca=a(104),oa=a.n(ca),ia=a(179),sa=a.n(ia),ua=a(180),ma=a.n(ua);var Ea=function(e){var t=Object.assign({},e),a=o.a.useState(!1),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useContext(h);function i(){l(!1)}return o.a.createElement("div",null,o.a.createElement(G.a,{size:"small",onClick:function(){l(!0)}},o.a.createElement(oa.a,null)),o.a.createElement(oe.a,{open:r,onClose:i,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Create Channel"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.target[0].value,n=e.target[1].checked;a&&K("POST","CHANNELS_CREATE",{token:c,name:a,isPublic:!n}).then((function(e){console.log(e),t.callback()})).catch((function(e){return console.log(e)}))}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Complete the form below to create a new channel"),o.a.createElement(F.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(be.a,{autoFocus:!0,margin:"dense",id:"channelName",label:"Channel Name",name:"channelName",fullWidth:!0})),o.a.createElement(F.a,{container:!0,item:!0,justify:"center",alignItems:"center"},o.a.createElement(sa.a,null),o.a.createElement(bt.a,{control:o.a.createElement(la.a,{value:"secret",inputProps:{"aria-label":"Secret"}}),label:"Secret",labelPlacement:"top"}),o.a.createElement(ma.a,null)))),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:i,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:i,type:"submit",color:"primary"},"Create")))))};var da=function(e){var t=e.channelId,a=o.a.useState([]),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState([]),i=Object(m.a)(c,2),s=i[0],u=i[1],d=o.a.useContext(h),f=function(){var e=K("GET","CHANNELS_LIST",{token:d}),t=K("GET","CHANNELS_LISTALL",{token:d});y.a.all([e,t]).then(y.a.spread((function(e,t){var a=e.data.channels,n=t.data.channels.filter((function(e){return void 0===a.find((function(t){return t.channelId===e.channelId}))}));l(a),u(n)})))};return ae(f,[],2),o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{subheader:o.a.createElement(L.a,{style:{display:"flex"}},o.a.createElement("span",{style:{flex:1}},"My Channels"),o.a.createElement(Ea,{callback:f}))},r.map((function(e,a){var n=e.channelId,r=e.name;return o.a.createElement(R.a,{button:!0,key:n,component:E.b,to:"/channel/".concat(n)},o.a.createElement(ea.a,null,n==t?o.a.createElement(aa.a,null):o.a.createElement(ra.a,null)),o.a.createElement(U.a,{primary:r}))}))),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Other Channels")},s.map((function(e,a){var n=e.channelId,r=e.name;return o.a.createElement(R.a,{button:!0,key:n,component:E.b,to:"/channel/".concat(n)},o.a.createElement(ea.a,null,n==t?o.a.createElement(aa.a,null):o.a.createElement(ra.a,null)),o.a.createElement(U.a,{primary:r}))}))))},fa=a(383),ga={PaperProps:{style:{maxHeight:224,width:250}}};var ha=function(e){var t=Object.assign({},e),a=o.a.useState(!1),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState([]),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useContext(h),v=$();function b(){l(!1)}return o.a.useEffect((function(){K("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[p]),o.a.createElement("div",null,o.a.createElement(G.a,{size:"small",onClick:function(){l(!0)}},o.a.createElement(oa.a,null)),o.a.createElement(oe.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title"},o.a.createElement(ie.a,{id:"form-dialog-title"},"Create Dm"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),K("POST","DM_CREATE",{token:p,uIds:s}).then((function(e){console.log(e),t.callback()})).catch((function(e){return console.log(e)}))}},o.a.createElement(se.a,null,o.a.createElement(ue.a,null,"Select the users below to create a new dm"),o.a.createElement(me.a,{multiple:!0,value:s,onChange:function(e){u(e.target.value)},input:o.a.createElement(fa.a,null),MenuProps:ga,style:{width:"100%"}},f.map((function(e){if(v!=e.uId)return o.a.createElement(Ee.a,{key:e.uId,value:e.uId},e.nameFirst+" "+e.nameLast)})))),o.a.createElement(de.a,null,o.a.createElement(W.a,{onClick:b,color:"primary"},"Cancel"),o.a.createElement(W.a,{onClick:b,type:"submit",color:"primary"},"Create")))))};var pa=function(e){var t=e.dmId,a=o.a.useState([]),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useContext(h),i=function(){K("GET","DM_LIST",{token:c}).then((function(e){var t=e.data;l(t.dms)})).catch((function(e){return console.log(e)}))};return ae(i,[],2),o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{subheader:o.a.createElement(L.a,{style:{display:"flex"}},o.a.createElement("span",{style:{flex:1}},"My Dms"),o.a.createElement(ha,{callback:i}))},r.map((function(e){var a=e.dmId,n=e.name;return o.a.createElement(R.a,{button:!0,key:a,component:E.b,to:"/dm/".concat(a)},o.a.createElement(ea.a,null,a==t?o.a.createElement(aa.a,null):o.a.createElement(ra.a,null)),o.a.createElement(U.a,{primary:n}))}))))},va=a(181),ba=a.n(va);var Sa=function(){var e=$(o.a.useContext(h));return o.a.createElement(_.a,null,o.a.createElement(R.a,{button:!0,key:"profile",component:E.b,to:"/profile/".concat(e)},o.a.createElement(ea.a,null,o.a.createElement(ba.a,null)),o.a.createElement(U.a,{primary:"Profile"})))};var Ia=function(e){var t=e.channelId,a=e.dmId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Sa,null),o.a.createElement(da,{channelId:t}),o.a.createElement(pa,{dmId:a}))};var Oa=function(e){var t=e.match.params.channelId;return o.a.createElement(Zt,{menu:o.a.createElement(Ia,{channelId:t,dmId:null}),body:o.a.createElement(ct,{channelId:t})})};var ya=function(e){var t=e.dmId,a=(Object(D.a)(e,["dmId"]),o.a.useState(!0)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState(""),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useContext(h);function v(){K("GET","DM_DETAILS",{token:p,dmId:t}).then((function(e){var t=e.data,a=t.name,n=t.members;console.log(n),g(n),u(a)})).catch((function(e){console.log(e),g([]),u("")})).finally((function(){return l(!1)}))}return ae(v,[t,p],2),o.a.createElement(o.a.Fragment,null,r?o.a.createElement(ce,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4"},s.toUpperCase()),o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Members")},f.map((function(e){var t=e.uId,a=e.nameFirst,n=e.nameLast,r=e.profileImgUrl;return o.a.createElement(R.a,{key:t},o.a.createElement(P.a,null,o.a.createElement(x.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:r},[a,n].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),o.a.createElement(U.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{container:!0,alignItems:"center",spacing:1},o.a.createElement(F.a,{item:!0},o.a.createElement(H.a,{href:"/profile/".concat(t)},"".concat(a," ").concat(n)))))}))})),o.a.createElement(R.a,{key:"leave_dm"},o.a.createElement(F.a,{container:!0,spacing:1},o.a.createElement(F.a,{item:!0},o.a.createElement(W.a,{variant:"outlined",onClick:function(){return function(e,t){K("POST","DM_LEAVE",{token:t,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(t,p)}},"Leave Dm"),"\xa0",o.a.createElement(W.a,{variant:"outlined",onClick:function(){return function(e,t){K("DELETE","DM_REMOVE",{token:t,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(t,p)}},"Remove Dm"))))),o.a.createElement(Re,{dmId:t})))};var Ca=function(e){var t=e.match.params.dmId;return o.a.createElement(Zt,{menu:o.a.createElement(Ia,{channelId:null,dmId:t}),body:o.a.createElement(ya,{dmId:t})})},Ta=a(406),ka=a(411),Na=a(69),ja=a.n(Na),Aa=Object(it.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ma=function(e){var t=o.a.useState(!1),a=Object(m.a)(t,2),n=a[0],r=a[1],l=Aa();return o.a.createElement(Ta.a,{component:"main",maxWidth:"sm"},o.a.createElement(ka.a,{boxShadow:3,className:l.card},o.a.createElement(x.a,null,o.a.createElement(ja.a,{color:"secondary"})),o.a.createElement(w.a,{component:"h1",variant:"h5"},"Forgot Password"),n?o.a.createElement("div",{style:{marginTop:"64px"}},o.a.createElement(ce,null)):o.a.createElement("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target[0].value;a&&(r(!0),K("POST","AUTH_PASSWORDRESET_REQUEST",{email:a}).then((function(t){console.log(t),e.history.push("/reset_password")})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)})))}},o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",autoFocus:!0}),o.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Send Recovery Email"),o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0},o.a.createElement("br",null),o.a.createElement(H.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},Da=a(105);var wa=function(){var e=o.a.useContext(h),t=o.a.useState(0),a=Object(m.a)(t,2),n=a[0],r=a[1],l=o.a.useState([]),i=Object(m.a)(l,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState([]),v=Object(m.a)(p,2),S=v[0],I=v[1],O=Object(c.useContext)(b).isDark?"#FFFFFFEE":"#000000EE";return o.a.useEffect((function(){K("GET","USERS_STATS",{token:e}).then((function(e){var t=e.data;console.log(t);var a=t.workspaceStats;r(a.utilizationRate),u(a.channelsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsExist}}))),g(a.dmsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsExist}}))),I(a.messagesExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesExist}})))})).catch((function(e){return console.log(e)}))}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h5"},"Workspace statistics"),o.a.createElement("p",null,"Wow! ",(100*n).toFixed(2),"% utilisation"),o.a.createElement(Da.Scatter,{data:{datasets:[{label:"Channels",data:s,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms",data:f,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages",data:S,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{legend:{labels:{fontColor:O}},scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2,color:O},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}},ticks:{fontColor:O}}],yAxes:[{gridLines:{color:O},ticks:{fontColor:O}}]}}}))};var _a=function(){return o.a.createElement(Zt,{menu:o.a.createElement(Ia,null),body:o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4"},"WELCOME"),o.a.createElement("div",{style:{paddingTop:15}},o.a.createElement(w.a,{variant:"body1"},"This is Memes: agile messaging for Software Engineers")),o.a.createElement("br",null),o.a.createElement(wa,null))})},La=a(182),Ra=a.n(La),Pa=Object(it.a)((function(e){return{"@global":{},card:{marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var xa=function(e){var t=e.setAuth,a=Object(D.a)(e,["setAuth"]),n=o.a.useState(!1),r=Object(m.a)(n,2),l=r[0],c=r[1],i=Pa();return o.a.createElement(Ta.a,{component:"main",maxWidth:"sm"},o.a.createElement(ka.a,{boxShadow:3,className:i.card},o.a.createElement(x.a,null,o.a.createElement(Ra.a,null)),o.a.createElement(w.a,{component:"h1",variant:"h5"},"Login"),l?o.a.createElement("div",{style:{marginTop:"64px"}},o.a.createElement(ce,null)):o.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var n=e.target[0].value,r=e.target[2].value;n&&r&&(c(!0),K("POST","AUTH_LOGIN",{email:n,password:r}).then((function(e){console.log(e);var n=e.data;t(n.token,n.authUserId),a.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)})))}},o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"text",autoFocus:!0}),o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),o.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",o.a.createElement("br",null),"Do not enter any currently used passwords."),o.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),o.a.createElement(F.a,{container:!0,direction:"column",alignItems:"center"},o.a.createElement(F.a,{item:!0},o.a.createElement("br",null),o.a.createElement(H.a,{href:"/register",variant:"body1"},"Don't have an account? Register")),o.a.createElement(F.a,{item:!0},o.a.createElement("br",null),o.a.createElement(H.a,{href:"/forgot_password",variant:"body1"},"Forgot password?"))))))},Ua=a(187),Fa=a(184),Ha=a.n(Fa),Ga=a(183),Wa=a.n(Ga);var Va=function(e){var t=e.editable,a=e.master,n=e.masterValue,r=e.slaves,l=e.slaveValues,c=e.onSave,i=(Object(D.a)(e,["editable","master","masterValue","slaves","slaveValues","onSave"]),o.a.useState(!1)),s=Object(m.a)(i,2),u=s[0],E=s[1],d=o.a.useState(),f=Object(m.a)(d,2),g=f[0],h=f[1],p=o.a.useState(n),v=Object(m.a)(p,2),b=v[0],S=v[1],I=o.a.useState([]),O=Object(m.a)(I,2),y=O[0],C=O[1],T=o.a.useState(l),k=Object(m.a)(T,2),N=k[0],j=k[1];function A(){h(b),C(N),E(!u)}return o.a.useEffect((function(){S(n),j(l)}),[n,l]),o.a.createElement(F.a,{container:!0,spacing:1,alignItems:"flex-end"},r&&r.map((function(e,t){return o.a.createElement(F.a,{item:!0,key:t},e({value:N[t]||"",InputProps:{readOnly:!u},onChange:function(e){return function(e,t){var a=N.map((function(a,n){return n===t?e.target.value:a}));j(a)}(e,t)}}))})),o.a.createElement(F.a,{item:!0},a({value:b||"",InputProps:{readOnly:!u},onChange:function(e){S(e.target.value)}})),t&&o.a.createElement(F.a,{item:!0},t?u?o.a.createElement(o.a.Fragment,null,o.a.createElement(Wa.a,{style:{cursor:"pointer"},onClick:function(){null!=b&&(c&&(N?c.apply(void 0,[b].concat(Object(Ua.a)(N))):c(b)),A())}}),o.a.createElement(Ha.a,{style:{cursor:"pointer"},onClick:function(){S(g),j(y),A()}})):o.a.createElement(ve.a,{style:{cursor:"pointer"},onClick:A}):null))};var za=function(){var e=o.a.useContext(h),t=o.a.useState(0),a=Object(m.a)(t,2),n=a[0],r=a[1],l=o.a.useState([]),i=Object(m.a)(l,2),s=i[0],u=i[1],E=o.a.useState([]),d=Object(m.a)(E,2),f=d[0],g=d[1],p=o.a.useState([]),v=Object(m.a)(p,2),S=v[0],I=v[1],O=Object(c.useContext)(b).isDark?"#FFFFFFEE":"#000000EE";return o.a.useEffect((function(){K("GET","USER_STATS",{token:e}).then((function(e){var t=e.data;console.log(t);var a=t.userStats;r(a.involvementRate),u(a.channelsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsJoined}}))),g(a.dmsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsJoined}}))),I(a.messagesSent.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesSent}})))})).catch((function(e){return console.log(e)}))}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h5"},"User statistics"),o.a.createElement("p",null,"Involvement rate: ",(100*n).toFixed(2),"%"),o.a.createElement(Da.Scatter,{data:{datasets:[{label:"Channels joined",data:s,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms joined",data:f,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages sent",data:S,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{legend:{labels:{fontColor:O}},scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2,color:O},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}},ticks:{fontColor:O}}],yAxes:[{gridLines:{color:O},ticks:{fontColor:O}}]}}}))};var qa=function(e){var t=e.profile,a=o.a.useState(!0),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState({}),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useContext(h),d=$();o.a.useEffect((function(){K("GET","USER_PROFILE",{token:E,uId:t}).then((function(e){var t=e.data;console.log(t);var a=t.user;u(a)})).catch((function(e){console.log(e)})).finally((function(){return l(!1)}))}),[t,E]);var f=d.toString()===t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4"},"Profile"),r?o.a.createElement(ce,null):o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Profile Details")},o.a.createElement(R.a,{key:"name"},o.a.createElement(Va,{editable:f,masterValue:s.nameLast,slaveValues:[s.nameFirst],master:function(e){return o.a.createElement(be.a,Object.assign({label:"Last Name"},e))},slaves:[function(e){return o.a.createElement(be.a,Object.assign({label:"First Name"},e))}],onSave:function(e,t){K("PUT","USER_PROFILE_SETNAME",{token:E,nameFirst:t,nameLast:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){console.log(e)}))}})),o.a.createElement(R.a,{key:"email"},o.a.createElement(Va,{editable:f,masterValue:s.email,master:function(e){return o.a.createElement(be.a,Object.assign({label:"Email"},e))},onSave:function(e){K("PUT","USER_PROFILE_SETEMAIL",{token:E,email:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){console.log(e)}))}})),o.a.createElement(R.a,{key:"handle"},o.a.createElement(Va,{editable:f,masterValue:s.handleStr,master:function(e){return o.a.createElement(be.a,Object.assign({label:"Handle"},e))},onSave:function(e){K("PUT","USER_PROFILE_SETHANDLE",{token:E,handleStr:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){return console.log(e)}))}})),o.a.createElement(R.a,{key:"imgUrl"},o.a.createElement(Va,{editable:f,masterValue:s.profileImgUrl,master:function(e){return o.a.createElement(be.a,Object.assign({label:"imgUrl,x1,y1,x2,y2"},e))},onSave:function(e){var t=e.split(",");K("POST","USER_PROFILE_UPLOADPHOTO",{token:E,imgUrl:t[0],xStart:Number.parseInt(t[1]),yStart:Number.parseInt(t[2]),xEnd:Number.parseInt(t[3]),yEnd:Number.parseInt(t[4])}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){return console.log(e)}))}})),o.a.createElement("br",null),o.a.createElement("div",null,"NOTE: The final field input is to set a profile image. Please enter the 5 components (image url, xStart, yStart, xEnd, yEnd) separated by commas.")),o.a.createElement("br",null),f&&o.a.createElement(za,null))};var Ba=function(e){var t=e.match.params.profile;return o.a.createElement(Zt,{menu:o.a.createElement(Ia,null),body:o.a.createElement(qa,{profile:t})})},Ja=Object(it.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ka=function(e){var t=e.setAuth,a=Object(D.a)(e,["setAuth"]),n=o.a.useState(!1),r=Object(m.a)(n,2),l=r[0],c=r[1],i=o.a.useState({nameFirst:"",nameLast:"",email:"",password:""}),s=Object(m.a)(i,2),u=s[0],E=s[1],d=function(e){return function(t){E(Object(I.a)(Object(I.a)({},u),{},Object(ot.a)({},e,t.target.value)))}},f=Ja();return o.a.createElement(Ta.a,{component:"main",maxWidth:"sm"},o.a.createElement(ka.a,{boxShadow:3,className:f.card},o.a.createElement(x.a,null,o.a.createElement(ja.a,{color:"secondary"})),o.a.createElement(w.a,{component:"h1",variant:"h5"},"Register"),l?o.a.createElement("div",{style:{marginTop:"64px"}},o.a.createElement(ce,null)):o.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),u.email&&u.password&&(c(!0),K("POST","AUTH_REGISTER",Object(I.a)({},u)).then((function(e){console.log(e);var n=e.data;t(n.token,n.authUserId),a.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)})))}},o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameFirst",label:"First name",name:"nameFirst",type:"text",autoFocus:!0,value:u.nameFirst,onChange:d("nameFirst")}),o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameLast",label:"Last name",name:"nameLast",type:"text",value:u.nameLast,onChange:d("nameLast")}),o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",value:u.email,onChange:d("email")}),o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u.password,onChange:d("password")}),o.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",o.a.createElement("br",null),"Do not enter any currently used passwords."),o.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign Up"),o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0},o.a.createElement("br",null),o.a.createElement(H.a,{href:"/login",variant:"body1"},"Already have an account? Login"))))))},Ya=Object(it.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Qa=function(e){var t=o.a.useState(!1),a=Object(m.a)(t,2),n=a[0],r=a[1],l=Ya();return o.a.createElement(Ta.a,{component:"main",maxWidth:"sm"},o.a.createElement(ka.a,{boxShadow:3,className:l.card},o.a.createElement(x.a,null,o.a.createElement(ja.a,{color:"secondary"})),o.a.createElement(w.a,{component:"h1",variant:"h5"},"Reset Password"),n?o.a.createElement("div",{style:{marginTop:"64px"}},o.a.createElement(ce,null)):o.a.createElement("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target[0].value,n=t.target[2].value;a&&n&&(r(!0),K("POST","AUTH_PASSWORDRESET_RESET",{resetCode:a,newPassword:n}).then((function(t){console.log(t),e.history.push("/login")})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)})))}},o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"resetCode",label:"Reset code",name:"resetCode",type:"text",autoFocus:!0}),o.a.createElement(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"newPassword",label:"New Password",name:"newPassword",type:"password"}),o.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Change Password"),o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0},o.a.createElement("br",null),o.a.createElement(H.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},$a=a(407);var Xa=function(e){var t=e.queryStr,a=(Object(D.a)(e,["queryStr"]),o.a.useState(!0)),n=Object(m.a)(a,2),r=n[0],l=n[1],c=o.a.useState([]),i=Object(m.a)(c,2),s=i[0],u=i[1],E=o.a.useContext(h);return o.a.useEffect((function(){""!==t&&K("GET","SEARCH",{token:E,queryStr:t}).then((function(e){var t=e.data.messages;("undefined"===typeof t||Array.isArray(t))&&(u(t),l(!1))})).catch((function(e){console.log(e),l(!1)}))}),[E,t]),""===t?o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4",style:{marginBottom:10}},"Search"),o.a.createElement(w.a,{variant:"h6"},"Enter a query in the search bar above")):o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{variant:"h4",style:{marginBottom:10}},"Search Results"),r?o.a.createElement($a.a,null):0==s.length?o.a.createElement(w.a,{variant:"h6"},"Your search did not return any results"):o.a.createElement(_.a,{subheader:o.a.createElement(L.a,null,"Messages"),style:{width:"100%"}},s.slice().reverse().map((function(e){return o.a.createElement(at,Object.assign({key:e.messageId},e))}))))};var Za=function(e){var t=e.match.params.queryStr,a=void 0===t?"":t;return o.a.createElement(Zt,{menu:o.a.createElement(Ia,null),body:o.a.createElement(Xa,{queryStr:a})})},en=a(185),tn=a(408);var an=function(){document.title="UNSW Memes";var e=o.a.useState(localStorage.getItem("token")),t=Object(m.a)(e,2),a=t[0],n=t[1],l=/true/.test(localStorage.getItem("darkMode")),i=Object(c.useState)({isDark:!!l,theme:v.light,switchTheme:function e(){f((function(t){return localStorage.setItem("darkMode",!t.isDark),{theme:t.isDark?v.dark:v.light,isDark:!t.isDark,switchTheme:e}}))}}),s=Object(m.a)(i,2),u=s[0],f=s[1],h=o.a.useMemo((function(){return Object(en.a)({palette:u.isDark?v.dark:v.light})}),[u]);function p(e,t){localStorage.setItem("token",e),localStorage.setItem("uId",t),n(e)}return o.a.createElement(g,{value:a},o.a.createElement(S,{value:u},o.a.createElement(tn.a,{theme:h},o.a.createElement(r.a,null),o.a.createElement(E.a,null,o.a.createElement(d.d,null,o.a.createElement(d.b,{exact:!0,path:"/login",render:function(e){return o.a.createElement(xa,Object.assign({},e,{setAuth:p}))}}),o.a.createElement(d.b,{exact:!0,path:"/register",render:function(e){return o.a.createElement(Ka,Object.assign({},e,{setAuth:p}))}}),o.a.createElement(d.b,{exact:!0,path:"/forgot_password",component:Ma}),o.a.createElement(d.b,{exact:!0,path:"/reset_password",component:Qa}),o.a.createElement(M,{exact:!0,path:"/",component:_a}),o.a.createElement(M,{path:"/profile/:profile",component:Ba}),o.a.createElement(M,{path:"/channel/:channelId",component:Oa}),o.a.createElement(M,{path:"/dm/:dmId",component:Ca}),o.a.createElement(M,{path:"/search/:queryStr",component:Za}),o.a.createElement(M,{path:"/search",component:Za}))))))};a(339),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(l.a,{utils:n.a},o.a.createElement(r.a,null),o.a.createElement(an,null),o.a.createElement(u.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[215,1,2]]]);
//# sourceMappingURL=main.fd2e52e1.chunk.js.map